{"ast":null,"code":"import _classCallCheck from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { extend, defer, requestAnimationFrame } from \"../../utils/core\";\nimport DefaultViewManager from \"../default\";\nimport Snap from \"../helpers/snap\";\nimport { EVENTS } from \"../../utils/constants\";\nimport debounce from \"lodash/debounce\";\nvar ContinuousViewManager = /*#__PURE__*/function (_DefaultViewManager) {\n  _inherits(ContinuousViewManager, _DefaultViewManager);\n  var _super = _createSuper(ContinuousViewManager);\n  function ContinuousViewManager(options) {\n    var _this;\n    _classCallCheck(this, ContinuousViewManager);\n    _this = _super.call(this, options);\n    _this.name = \"continuous\";\n    _this.settings = extend(_this.settings || {}, {\n      infinite: true,\n      overflow: undefined,\n      axis: undefined,\n      writingMode: undefined,\n      flow: \"scrolled\",\n      offset: 500,\n      offsetDelta: 250,\n      width: undefined,\n      height: undefined,\n      snap: false,\n      afterScrolledTimeout: 10,\n      allowScriptedContent: false,\n      allowPopups: false\n    });\n    extend(_this.settings, options.settings || {});\n\n    // Gap can be 0, but defaults doesn't handle that\n    if (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n      _this.settings.gap = options.settings.gap;\n    }\n    _this.viewSettings = {\n      ignoreClass: _this.settings.ignoreClass,\n      axis: _this.settings.axis,\n      flow: _this.settings.flow,\n      layout: _this.layout,\n      width: 0,\n      height: 0,\n      forceEvenPages: false,\n      allowScriptedContent: _this.settings.allowScriptedContent,\n      allowPopups: _this.settings.allowPopups\n    };\n    _this.scrollTop = 0;\n    _this.scrollLeft = 0;\n    return _this;\n  }\n  _createClass(ContinuousViewManager, [{\n    key: \"display\",\n    value: function display(section, target) {\n      return DefaultViewManager.prototype.display.call(this, section, target).then(function () {\n        return this.fill();\n      }.bind(this));\n    }\n  }, {\n    key: \"fill\",\n    value: function fill(_full) {\n      var _this2 = this;\n      var full = _full || new defer();\n      this.q.enqueue(function () {\n        return _this2.check();\n      }).then(function (result) {\n        if (result) {\n          _this2.fill(full);\n        } else {\n          full.resolve();\n        }\n      });\n      return full.promise;\n    }\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(offset) {\n      // var bounds = this.stage.bounds();\n      // var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n      var distX = 0,\n        distY = 0;\n      var offsetX = 0,\n        offsetY = 0;\n      if (!this.isPaginated) {\n        distY = offset.top;\n        offsetY = offset.top + this.settings.offsetDelta;\n      } else {\n        distX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n        offsetX = distX + this.settings.offsetDelta;\n      }\n      if (distX > 0 || distY > 0) {\n        this.scrollBy(distX, distY, true);\n      }\n    }\n  }, {\n    key: \"afterResized\",\n    value: function afterResized(view) {\n      this.emit(EVENTS.MANAGERS.RESIZE, view.section);\n    }\n\n    // Remove Previous Listeners if present\n  }, {\n    key: \"removeShownListeners\",\n    value: function removeShownListeners(view) {\n      // view.off(\"shown\", this.afterDisplayed);\n      // view.off(\"shown\", this.afterDisplayedAbove);\n      view.onDisplayed = function () {};\n    }\n  }, {\n    key: \"add\",\n    value: function add(section) {\n      var _this3 = this;\n      var view = this.createView(section);\n      this.views.append(view);\n      view.on(EVENTS.VIEWS.RESIZED, function (bounds) {\n        view.expanded = true;\n      });\n      view.on(EVENTS.VIEWS.AXIS, function (axis) {\n        _this3.updateAxis(axis);\n      });\n      view.on(EVENTS.VIEWS.WRITING_MODE, function (mode) {\n        _this3.updateWritingMode(mode);\n      });\n\n      // view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n      view.onDisplayed = this.afterDisplayed.bind(this);\n      view.onResize = this.afterResized.bind(this);\n      return view.display(this.request);\n    }\n  }, {\n    key: \"append\",\n    value: function append(section) {\n      var _this4 = this;\n      var view = this.createView(section);\n      view.on(EVENTS.VIEWS.RESIZED, function (bounds) {\n        view.expanded = true;\n      });\n      view.on(EVENTS.VIEWS.AXIS, function (axis) {\n        _this4.updateAxis(axis);\n      });\n      view.on(EVENTS.VIEWS.WRITING_MODE, function (mode) {\n        _this4.updateWritingMode(mode);\n      });\n      this.views.append(view);\n      view.onDisplayed = this.afterDisplayed.bind(this);\n      return view;\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend(section) {\n      var _this5 = this;\n      var view = this.createView(section);\n      view.on(EVENTS.VIEWS.RESIZED, function (bounds) {\n        _this5.counter(bounds);\n        view.expanded = true;\n      });\n      view.on(EVENTS.VIEWS.AXIS, function (axis) {\n        _this5.updateAxis(axis);\n      });\n      view.on(EVENTS.VIEWS.WRITING_MODE, function (mode) {\n        _this5.updateWritingMode(mode);\n      });\n      this.views.prepend(view);\n      view.onDisplayed = this.afterDisplayed.bind(this);\n      return view;\n    }\n  }, {\n    key: \"counter\",\n    value: function counter(bounds) {\n      if (this.settings.axis === \"vertical\") {\n        this.scrollBy(0, bounds.heightDelta, true);\n      } else {\n        this.scrollBy(bounds.widthDelta, 0, true);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_offset) {\n      var container = this.bounds();\n      var views = this.views.all();\n      var viewsLength = views.length;\n      var visible = [];\n      var offset = typeof _offset != \"undefined\" ? _offset : this.settings.offset || 0;\n      var isVisible;\n      var view;\n      var updating = new defer();\n      var promises = [];\n      for (var i = 0; i < viewsLength; i++) {\n        view = views[i];\n        isVisible = this.isVisible(view, offset, offset, container);\n        if (isVisible === true) {\n          // console.log(\"visible \" + view.index, view.displayed);\n\n          if (!view.displayed) {\n            var displayed = view.display(this.request).then(function (view) {\n              view.show();\n            }, function (err) {\n              view.hide();\n            });\n            promises.push(displayed);\n          } else {\n            view.show();\n          }\n          visible.push(view);\n        } else {\n          this.q.enqueue(view.destroy.bind(view));\n          // console.log(\"hidden \" + view.index, view.displayed);\n\n          clearTimeout(this.trimTimeout);\n          this.trimTimeout = setTimeout(function () {\n            this.q.enqueue(this.trim.bind(this));\n          }.bind(this), 250);\n        }\n      }\n      if (promises.length) {\n        return Promise.all(promises).catch(function (err) {\n          updating.reject(err);\n        });\n      } else {\n        updating.resolve();\n        return updating.promise;\n      }\n    }\n  }, {\n    key: \"check\",\n    value: function check(_offsetLeft, _offsetTop) {\n      var _this6 = this;\n      var checking = new defer();\n      var newViews = [];\n      var horizontal = this.settings.axis === \"horizontal\";\n      var delta = this.settings.offset || 0;\n      if (_offsetLeft && horizontal) {\n        delta = _offsetLeft;\n      }\n      if (_offsetTop && !horizontal) {\n        delta = _offsetTop;\n      }\n      var bounds = this._bounds; // bounds saved this until resize\n\n      var offset = horizontal ? this.scrollLeft : this.scrollTop;\n      var visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n      var contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n      var writingMode = this.writingMode && this.writingMode.indexOf(\"vertical\") === 0 ? \"vertical\" : \"horizontal\";\n      var rtlScrollType = this.settings.rtlScrollType;\n      var rtl = this.settings.direction === \"rtl\";\n      if (!this.settings.fullsize) {\n        // Scroll offset starts at width of element\n        if (rtl && rtlScrollType === \"default\" && writingMode === \"horizontal\") {\n          offset = contentLength - visibleLength - offset;\n        }\n        // Scroll offset starts at 0 and goes negative\n        if (rtl && rtlScrollType === \"negative\" && writingMode === \"horizontal\") {\n          offset = offset * -1;\n        }\n      } else {\n        // Scroll offset starts at 0 and goes negative\n        if (horizontal && rtl && rtlScrollType === \"negative\" || !horizontal && rtl && rtlScrollType === \"default\") {\n          offset = offset * -1;\n        }\n      }\n      var prepend = function prepend() {\n        var first = _this6.views.first();\n        var prev = first && first.section.prev();\n        if (prev) {\n          newViews.push(_this6.prepend(prev));\n        }\n      };\n      var append = function append() {\n        var last = _this6.views.last();\n        var next = last && last.section.next();\n        if (next) {\n          newViews.push(_this6.append(next));\n        }\n      };\n      var end = offset + visibleLength + delta;\n      var start = offset - delta;\n      if (end >= contentLength) {\n        append();\n      }\n      if (start < 0) {\n        prepend();\n      }\n      var promises = newViews.map(function (view) {\n        return view.display(_this6.request);\n      });\n      if (newViews.length) {\n        return Promise.all(promises).then(function () {\n          return _this6.check();\n        }).then(function () {\n          // Check to see if anything new is on screen after rendering\n          return _this6.update(delta);\n        }, function (err) {\n          return err;\n        });\n      } else {\n        this.q.enqueue(function () {\n          this.update();\n        }.bind(this));\n        checking.resolve(false);\n        return checking.promise;\n      }\n    }\n  }, {\n    key: \"trim\",\n    value: function trim() {\n      var task = new defer();\n      var displayed = this.views.displayed();\n      var first = displayed[0];\n      var last = displayed[displayed.length - 1];\n      var firstIndex = this.views.indexOf(first);\n      var lastIndex = this.views.indexOf(last);\n      var above = this.views.slice(0, firstIndex);\n      var below = this.views.slice(lastIndex + 1);\n\n      // Erase all but last above\n      for (var i = 0; i < above.length - 1; i++) {\n        this.erase(above[i], above);\n      }\n\n      // Erase all except first below\n      for (var j = 1; j < below.length; j++) {\n        this.erase(below[j]);\n      }\n      task.resolve();\n      return task.promise;\n    }\n  }, {\n    key: \"erase\",\n    value: function erase(view, above) {\n      //Trim\n\n      var prevTop;\n      var prevLeft;\n      if (!this.settings.fullsize) {\n        prevTop = this.container.scrollTop;\n        prevLeft = this.container.scrollLeft;\n      } else {\n        prevTop = window.scrollY;\n        prevLeft = window.scrollX;\n      }\n      var bounds = view.bounds();\n      this.views.remove(view);\n      if (above) {\n        if (this.settings.axis === \"vertical\") {\n          this.scrollTo(0, prevTop - bounds.height, true);\n        } else {\n          if (this.settings.direction === 'rtl') {\n            if (!this.settings.fullsize) {\n              this.scrollTo(prevLeft, 0, true);\n            } else {\n              this.scrollTo(prevLeft + Math.floor(bounds.width), 0, true);\n            }\n          } else {\n            this.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(stage) {\n      window.addEventListener(\"unload\", function (e) {\n        this.ignore = true;\n        // this.scrollTo(0,0);\n        this.destroy();\n      }.bind(this));\n      this.addScrollListeners();\n      if (this.isPaginated && this.settings.snap) {\n        this.snapper = new Snap(this, this.settings.snap && typeof this.settings.snap === \"object\" && this.settings.snap);\n      }\n    }\n  }, {\n    key: \"addScrollListeners\",\n    value: function addScrollListeners() {\n      var scroller;\n      this.tick = requestAnimationFrame;\n      var dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n      this.scrollDeltaVert = 0;\n      this.scrollDeltaHorz = 0;\n      if (!this.settings.fullsize) {\n        scroller = this.container;\n        this.scrollTop = this.container.scrollTop;\n        this.scrollLeft = this.container.scrollLeft;\n      } else {\n        scroller = window;\n        this.scrollTop = window.scrollY * dir;\n        this.scrollLeft = window.scrollX * dir;\n      }\n      this._onScroll = this.onScroll.bind(this);\n      scroller.addEventListener(\"scroll\", this._onScroll);\n      this._scrolled = debounce(this.scrolled.bind(this), 30);\n      // this.tick.call(window, this.onScroll.bind(this));\n\n      this.didScroll = false;\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      var scroller;\n      if (!this.settings.fullsize) {\n        scroller = this.container;\n      } else {\n        scroller = window;\n      }\n      scroller.removeEventListener(\"scroll\", this._onScroll);\n      this._onScroll = undefined;\n    }\n  }, {\n    key: \"onScroll\",\n    value: function onScroll() {\n      var scrollTop;\n      var scrollLeft;\n      var dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n      if (!this.settings.fullsize) {\n        scrollTop = this.container.scrollTop;\n        scrollLeft = this.container.scrollLeft;\n      } else {\n        scrollTop = window.scrollY * dir;\n        scrollLeft = window.scrollX * dir;\n      }\n      this.scrollTop = scrollTop;\n      this.scrollLeft = scrollLeft;\n      if (!this.ignore) {\n        this._scrolled();\n      } else {\n        this.ignore = false;\n      }\n      this.scrollDeltaVert += Math.abs(scrollTop - this.prevScrollTop);\n      this.scrollDeltaHorz += Math.abs(scrollLeft - this.prevScrollLeft);\n      this.prevScrollTop = scrollTop;\n      this.prevScrollLeft = scrollLeft;\n      clearTimeout(this.scrollTimeout);\n      this.scrollTimeout = setTimeout(function () {\n        this.scrollDeltaVert = 0;\n        this.scrollDeltaHorz = 0;\n      }.bind(this), 150);\n      clearTimeout(this.afterScrolled);\n      this.didScroll = false;\n    }\n  }, {\n    key: \"scrolled\",\n    value: function scrolled() {\n      this.q.enqueue(function () {\n        return this.check();\n      }.bind(this));\n      this.emit(EVENTS.MANAGERS.SCROLL, {\n        top: this.scrollTop,\n        left: this.scrollLeft\n      });\n      clearTimeout(this.afterScrolled);\n      this.afterScrolled = setTimeout(function () {\n        // Don't report scroll if we are about the snap\n        if (this.snapper && this.snapper.supportsTouch && this.snapper.needsSnap()) {\n          return;\n        }\n        this.emit(EVENTS.MANAGERS.SCROLLED, {\n          top: this.scrollTop,\n          left: this.scrollLeft\n        });\n      }.bind(this), this.settings.afterScrolledTimeout);\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      var delta = this.layout.props.name === \"pre-paginated\" && this.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n      if (!this.views.length) return;\n      if (this.isPaginated && this.settings.axis === \"horizontal\") {\n        this.scrollBy(delta, 0, true);\n      } else {\n        this.scrollBy(0, this.layout.height, true);\n      }\n      this.q.enqueue(function () {\n        return this.check();\n      }.bind(this));\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      var delta = this.layout.props.name === \"pre-paginated\" && this.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n      if (!this.views.length) return;\n      if (this.isPaginated && this.settings.axis === \"horizontal\") {\n        this.scrollBy(-delta, 0, true);\n      } else {\n        this.scrollBy(0, -this.layout.height, true);\n      }\n      this.q.enqueue(function () {\n        return this.check();\n      }.bind(this));\n    }\n  }, {\n    key: \"updateFlow\",\n    value: function updateFlow(flow) {\n      if (this.rendered && this.snapper) {\n        this.snapper.destroy();\n        this.snapper = undefined;\n      }\n      _get(_getPrototypeOf(ContinuousViewManager.prototype), \"updateFlow\", this).call(this, flow, \"scroll\");\n      if (this.rendered && this.isPaginated && this.settings.snap) {\n        this.snapper = new Snap(this, this.settings.snap && typeof this.settings.snap === \"object\" && this.settings.snap);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(ContinuousViewManager.prototype), \"destroy\", this).call(this);\n      if (this.snapper) {\n        this.snapper.destroy();\n      }\n    }\n  }]);\n  return ContinuousViewManager;\n}(DefaultViewManager);\nexport default ContinuousViewManager;","map":{"version":3,"names":["extend","defer","requestAnimationFrame","DefaultViewManager","Snap","EVENTS","debounce","ContinuousViewManager","options","name","settings","infinite","overflow","undefined","axis","writingMode","flow","offset","offsetDelta","width","height","snap","afterScrolledTimeout","allowScriptedContent","allowPopups","gap","viewSettings","ignoreClass","layout","forceEvenPages","scrollTop","scrollLeft","section","target","prototype","display","call","then","fill","bind","_full","full","q","enqueue","check","result","resolve","promise","distX","distY","offsetX","offsetY","isPaginated","top","Math","floor","left","delta","scrollBy","view","emit","MANAGERS","RESIZE","onDisplayed","createView","views","append","on","VIEWS","RESIZED","bounds","expanded","AXIS","updateAxis","WRITING_MODE","mode","updateWritingMode","afterDisplayed","onResize","afterResized","request","counter","prepend","heightDelta","widthDelta","_offset","container","all","viewsLength","length","visible","isVisible","updating","promises","i","displayed","show","err","hide","push","destroy","clearTimeout","trimTimeout","setTimeout","trim","Promise","catch","reject","_offsetLeft","_offsetTop","checking","newViews","horizontal","_bounds","visibleLength","contentLength","scrollWidth","scrollHeight","indexOf","rtlScrollType","rtl","direction","fullsize","first","prev","last","next","end","start","map","update","task","firstIndex","lastIndex","above","slice","below","erase","j","prevTop","prevLeft","window","scrollY","scrollX","remove","scrollTo","stage","addEventListener","e","ignore","addScrollListeners","snapper","scroller","tick","dir","scrollDeltaVert","scrollDeltaHorz","_onScroll","onScroll","_scrolled","scrolled","didScroll","removeEventListener","abs","prevScrollTop","prevScrollLeft","scrollTimeout","afterScrolled","SCROLL","supportsTouch","needsSnap","SCROLLED","props","spread","rendered"],"sources":["/home/parallels/Downloads/read/node_modules/epubjs/src/managers/continuous/index.js"],"sourcesContent":["import {extend, defer, requestAnimationFrame} from \"../../utils/core\";\nimport DefaultViewManager from \"../default\";\nimport Snap from \"../helpers/snap\";\nimport { EVENTS } from \"../../utils/constants\";\nimport debounce from \"lodash/debounce\";\n\nclass ContinuousViewManager extends DefaultViewManager {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.name = \"continuous\";\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\toverflow: undefined,\n\t\t\taxis: undefined,\n\t\t\twritingMode: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\toffset: 500,\n\t\t\toffsetDelta: 250,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tsnap: false,\n\t\t\tafterScrolledTimeout: 10,\n\t\t\tallowScriptedContent: false,\n\t\t\tallowPopups: false\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\t// Gap can be 0, but defaults doesn't handle that\n\t\tif (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n\t\t\tthis.settings.gap = options.settings.gap;\n\t\t}\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: false,\n\t\t\tallowScriptedContent: this.settings.allowScriptedContent,\n\t\t\tallowPopups: this.settings.allowPopups\n\t\t};\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tdisplay(section, target){\n\t\treturn DefaultViewManager.prototype.display.call(this, section, target)\n\t\t\t.then(function () {\n\t\t\t\treturn this.fill();\n\t\t\t}.bind(this));\n\t}\n\n\tfill(_full){\n\t\tvar full = _full || new defer();\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.fill(full);\n\t\t\t} else {\n\t\t\t\tfull.resolve();\n\t\t\t}\n\t\t});\n\n\t\treturn full.promise;\n\t}\n\n\tmoveTo(offset){\n\t\t// var bounds = this.stage.bounds();\n\t\t// var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n\t\tvar distX = 0,\n\t\t\t\tdistY = 0;\n\n\t\tvar offsetX = 0,\n\t\t\t\toffsetY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t\toffsetY = offset.top+this.settings.offsetDelta;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\t\t\toffsetX = distX+this.settings.offsetDelta;\n\t\t}\n\n\t\tif (distX > 0 || distY > 0) {\n\t\t\tthis.scrollBy(distX, distY, true);\n\t\t}\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\t// Remove Previous Listeners if present\n\tremoveShownListeners(view){\n\n\t\t// view.off(\"shown\", this.afterDisplayed);\n\t\t// view.off(\"shown\", this.afterDisplayedAbove);\n\t\tview.onDisplayed = function(){};\n\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\treturn view.display(this.request);\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\t}\n\n\tupdate(_offset){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.all();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar offset = typeof _offset != \"undefined\" ? _offset : (this.settings.offset || 0);\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tvar updating = new defer();\n\t\tvar promises = [];\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\n\t\t\tisVisible = this.isVisible(view, offset, offset, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\t// console.log(\"visible \" + view.index, view.displayed);\n\n\t\t\t\tif (!view.displayed) {\n\t\t\t\t\tlet displayed = view.display(this.request)\n\t\t\t\t\t\t.then(function (view) {\n\t\t\t\t\t\t\tview.show();\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tview.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\tpromises.push(displayed);\n\t\t\t\t} else {\n\t\t\t\t\tview.show();\n\t\t\t\t}\n\t\t\t\tvisible.push(view);\n\t\t\t} else {\n\t\t\t\tthis.q.enqueue(view.destroy.bind(view));\n\t\t\t\t// console.log(\"hidden \" + view.index, view.displayed);\n\n\t\t\t\tclearTimeout(this.trimTimeout);\n\t\t\t\tthis.trimTimeout = setTimeout(function(){\n\t\t\t\t\tthis.q.enqueue(this.trim.bind(this));\n\t\t\t\t}.bind(this), 250);\n\t\t\t}\n\n\t\t}\n\n\t\tif(promises.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tupdating.reject(err);\n\t\t\t\t});\n\t\t} else {\n\t\t\tupdating.resolve();\n\t\t\treturn updating.promise;\n\t\t}\n\n\t}\n\n\tcheck(_offsetLeft, _offsetTop){\n\t\tvar checking = new defer();\n\t\tvar newViews = [];\n\n\t\tvar horizontal = (this.settings.axis === \"horizontal\");\n\t\tvar delta = this.settings.offset || 0;\n\n\t\tif (_offsetLeft && horizontal) {\n\t\t\tdelta = _offsetLeft;\n\t\t}\n\n\t\tif (_offsetTop && !horizontal) {\n\t\t\tdelta = _offsetTop;\n\t\t}\n\n\t\tvar bounds = this._bounds; // bounds saved this until resize\n\n\t\tlet offset = horizontal ? this.scrollLeft : this.scrollTop;\n\t\tlet visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n\t\tlet contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\t\tlet writingMode = (this.writingMode && this.writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\t\tlet rtlScrollType = this.settings.rtlScrollType;\n\t\tlet rtl = this.settings.direction === \"rtl\";\n\n\t\tif (!this.settings.fullsize) {\n\t\t\t// Scroll offset starts at width of element\n\t\t\tif (rtl && rtlScrollType === \"default\" && writingMode === \"horizontal\") {\n\t\t\t\toffset = contentLength - visibleLength - offset;\n\t\t\t}\n\t\t\t// Scroll offset starts at 0 and goes negative\n\t\t\tif (rtl && rtlScrollType === \"negative\" && writingMode === \"horizontal\") {\n\t\t\t\toffset = offset * -1;\n\t\t\t}\n\t\t} else {\n\t\t\t// Scroll offset starts at 0 and goes negative\n\t\t\tif ((horizontal && rtl && rtlScrollType === \"negative\") ||\n\t\t\t\t(!horizontal && rtl && rtlScrollType === \"default\")) {\n\t\t\t\toffset = offset * -1;\n\t\t\t}\n\t\t}\n\n\t\tlet prepend = () => {\n\t\t\tlet first = this.views.first();\n\t\t\tlet prev = first && first.section.prev();\n\n\t\t\tif(prev) {\n\t\t\t\tnewViews.push(this.prepend(prev));\n\t\t\t}\n\t\t};\n\n\t\tlet append = () => {\n\t\t\tlet last = this.views.last();\n\t\t\tlet next = last && last.section.next();\n\n\t\t\tif(next) {\n\t\t\t\tnewViews.push(this.append(next));\n\t\t\t}\n\n\t\t};\n\n\t\tlet end = offset + visibleLength + delta;\n\t\tlet start = offset - delta;\n\n\t\tif (end >= contentLength) {\n\t\t\tappend();\n\t\t}\n\t\t\n\t\tif (start < 0) {\n\t\t\tprepend();\n\t\t}\n\t\t\n\n\t\tlet promises = newViews.map((view) => {\n\t\t\treturn view.display(this.request);\n\t\t});\n\n\t\tif(newViews.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.then(() => {\n\t\t\t\t\treturn this.check();\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Check to see if anything new is on screen after rendering\n\t\t\t\t\treturn this.update(delta);\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.q.enqueue(function(){\n\t\t\t\tthis.update();\n\t\t\t}.bind(this));\n\t\t\tchecking.resolve(false);\n\t\t\treturn checking.promise;\n\t\t}\n\n\n\t}\n\n\ttrim(){\n\t\tvar task = new defer();\n\t\tvar displayed = this.views.displayed();\n\t\tvar first = displayed[0];\n\t\tvar last = displayed[displayed.length-1];\n\t\tvar firstIndex = this.views.indexOf(first);\n\t\tvar lastIndex = this.views.indexOf(last);\n\t\tvar above = this.views.slice(0, firstIndex);\n\t\tvar below = this.views.slice(lastIndex+1);\n\n\t\t// Erase all but last above\n\t\tfor (var i = 0; i < above.length-1; i++) {\n\t\t\tthis.erase(above[i], above);\n\t\t}\n\n\t\t// Erase all except first below\n\t\tfor (var j = 1; j < below.length; j++) {\n\t\t\tthis.erase(below[j]);\n\t\t}\n\n\t\ttask.resolve();\n\t\treturn task.promise;\n\t}\n\n\terase(view, above){ //Trim\n\n\t\tvar prevTop;\n\t\tvar prevLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tprevTop = this.container.scrollTop;\n\t\t\tprevLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tprevTop = window.scrollY;\n\t\t\tprevLeft = window.scrollX;\n\t\t}\n\n\t\tvar bounds = view.bounds();\n\n\t\tthis.views.remove(view);\n\t\t\n\t\tif(above) {\n\t\t\tif (this.settings.axis === \"vertical\") {\n\t\t\t\tthis.scrollTo(0, prevTop - bounds.height, true);\n\t\t\t} else {\n\t\t\t\tif(this.settings.direction === 'rtl') {\n\t\t\t\t\tif (!this.settings.fullsize) {\n\t\t\t\t\t\tthis.scrollTo(prevLeft, 0, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scrollTo(prevLeft + Math.floor(bounds.width), 0, true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\taddEventListeners(stage){\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.ignore = true;\n\t\t\t// this.scrollTo(0,0);\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tthis.addScrollListeners();\n\n\t\tif (this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\taddScrollListeners() {\n\t\tvar scroller;\n\n\t\tthis.tick = requestAnimationFrame;\n\n\t\tlet dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n\n\t\tthis.scrollDeltaVert = 0;\n\t\tthis.scrollDeltaHorz = 0;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t\tthis.scrollTop = window.scrollY * dir;\n\t\t\tthis.scrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tscroller.addEventListener(\"scroll\", this._onScroll);\n\t\tthis._scrolled = debounce(this.scrolled.bind(this), 30);\n\t\t// this.tick.call(window, this.onScroll.bind(this));\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this._onScroll);\n\t\tthis._onScroll = undefined;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\t\tlet dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY * dir;\n\t\t\tscrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\n\t\t\tthis._scrolled();\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t\tthis.scrollDeltaVert += Math.abs(scrollTop-this.prevScrollTop);\n\t\tthis.scrollDeltaHorz += Math.abs(scrollLeft-this.prevScrollLeft);\n\n\t\tthis.prevScrollTop = scrollTop;\n\t\tthis.prevScrollLeft = scrollLeft;\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(function(){\n\t\t\tthis.scrollDeltaVert = 0;\n\t\t\tthis.scrollDeltaHorz = 0;\n\t\t}.bind(this), 150);\n\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tscrolled() {\n\n\t\tthis.q.enqueue(function() {\n\t\t\treturn this.check();\n\t\t}.bind(this));\n\n\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\ttop: this.scrollTop,\n\t\t\tleft: this.scrollLeft\n\t\t});\n\n\t\tclearTimeout(this.afterScrolled);\n\t\tthis.afterScrolled = setTimeout(function () {\n\n\t\t\t// Don't report scroll if we are about the snap\n\t\t\tif (this.snapper && this.snapper.supportsTouch && this.snapper.needsSnap()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\ttop: this.scrollTop,\n\t\t\t\tleft: this.scrollLeft\n\t\t\t});\n\n\t\t}.bind(this), this.settings.afterScrolledTimeout);\n\t}\n\n\tnext(){\n\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\treturn this.check();\n\t\t}.bind(this));\n\t}\n\n\tprev(){\n\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(-delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, -this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\treturn this.check();\n\t\t}.bind(this));\n\t}\n\n\tupdateFlow(flow){\n\t\tif (this.rendered && this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t\tthis.snapper = undefined;\n\t\t}\n\n\t\tsuper.updateFlow(flow, \"scroll\");\n\n\t\tif (this.rendered && this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\tdestroy(){\n\t\tsuper.destroy();\n\n\t\tif (this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t}\n\t}\n\n}\n\nexport default ContinuousViewManager;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}