{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/parallels/Downloads/react-epub-viewer-demo/node_modules/@babel/runtime/regenerator/index.js\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _EpubViewer = _interopRequireDefault(require(\"../epubViewer/EpubViewer\"));\nvar _LoadingView = _interopRequireDefault(require(\"../../LoadingView\"));\nvar _commonUtil = require(\"../../lib/utils/commonUtil\");\nvar _viewerStyle = _interopRequireDefault(require(\"./viewerStyle\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n/**\n * Epub React Viewer Module\n * @class\n * @param props\n * @param props.url Epub file path\n * @param props.viewerLayout Viewer layout\n * @param props.viewerStyle Viewer style\n * @param props.viewerOption Viewer option\n * @param props.onBookInfoChange Run when book information changed\n * @param props.onPageChange Run when page changed\n * @param props.onTocChange Run when toc changed\n * @param props.onSelection Run when selected\n * @param props.loadingView Loading component\n * @param ref Viewer ref\n */\nvar ReactViewer = function ReactViewer(_ref, ref) {\n  var url = _ref.url,\n    viewerLayout = _ref.viewerLayout,\n    viewerStyle = _ref.viewerStyle,\n    viewerOption = _ref.viewerOption,\n    onBookInfoChange = _ref.onBookInfoChange,\n    onPageChange = _ref.onPageChange,\n    onTocChange = _ref.onTocChange,\n    onSelection = _ref.onSelection,\n    loadingView = _ref.loadingView;\n\n  // TODO Fix the ref type correctly instead 'any' type.\n  var _useState = (0, _react.useState)(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    book = _useState2[0],\n    setBook = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    rendition = _useState4[0],\n    setRendition = _useState4[1];\n  var _useState5 = (0, _react.useState)({}),\n    _useState6 = _slicedToArray(_useState5, 2),\n    layoutStyle = _useState6[0],\n    setLayoutStyle = _useState6[1];\n  var _useState7 = (0, _react.useState)({\n      fontFamily: 'Origin',\n      fontSize: 16,\n      lineHeight: 1.4,\n      marginHorizontal: 0,\n      marginVertical: 0\n    }),\n    _useState8 = _slicedToArray(_useState7, 2),\n    bookStyle = _useState8[0],\n    setBookStyle = _useState8[1];\n  var _useState9 = (0, _react.useState)({\n      flow: \"paginated\",\n      resizeOnOrientationChange: true,\n      spread: \"auto\"\n    }),\n    _useState10 = _slicedToArray(_useState9, 2),\n    bookOption = _useState10[0],\n    setBookOption = _useState10[1];\n  var currentSelection = (0, _react.useRef)({\n    cfiRange: '',\n    contents: null\n  });\n  /**\n   * Run book changed\n   * @method\n   * @param book Epub Book\n   */\n\n  var bookChanged = function bookChanged(book) {\n    return setBook(book);\n  };\n  /**\n   * Run rendition changed\n   * @method\n   * @param rendition Epub Rendition\n   */\n\n  var rendtionChanged = function rendtionChanged(rendition) {\n    return setRendition(rendition);\n  };\n  /**\n   * Run selection changed [Debounce]\n   * @method\n   * @param cfiRange CFIRange\n   * @param contents Selection Epub Contents\n   */\n\n  var selectionChanged = function selectionChanged(cfiRange, contents) {\n    currentSelection.current = {\n      cfiRange: cfiRange,\n      contents: contents\n    };\n  };\n  /**\n   * Viewer resizing function\n   * @method\n   */\n\n  var onResize = (0, _react.useMemo)(function () {\n    return (0, _commonUtil.debounce)(250, function () {\n      if (!rendition) return;\n      var viewerLayout_ = viewerLayout || {\n        MIN_VIEWER_WIDTH: 600,\n        MIN_VIEWER_HEIGHT: 300,\n        VIEWER_HEADER_HEIGHT: 0,\n        VIEWER_FOOTER_HEIGHT: 0,\n        VIEWER_SIDEMENU_WIDTH: 0\n      };\n      var _window = window,\n        win_w = _window.innerWidth,\n        win_h = _window.innerHeight;\n      var componentHeight = viewerLayout_.VIEWER_HEADER_HEIGHT + viewerLayout_.VIEWER_FOOTER_HEIGHT;\n      var w = win_w - ~~((win_w - viewerLayout_.MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal);\n      var h = bookOption.flow === \"scrolled-doc\" ? win_h - componentHeight : win_h - componentHeight - ~~((win_h - componentHeight - viewerLayout_.MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical);\n      var marginVertical = bookOption.flow === \"scrolled-doc\" ? \"\" : \"\".concat(~~((win_h - componentHeight - viewerLayout_.MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical) / 2, \"px\");\n      setLayoutStyle(function (layout) {\n        if (layout.width !== w || layout.height !== h || layout.marginTop !== marginVertical) {\n          return _objectSpread(_objectSpread({}, layout), {}, {\n            width: w,\n            height: h,\n            marginTop: marginVertical,\n            marginBottom: marginVertical\n          });\n        }\n        return layout;\n      });\n      try {\n        rendition.resize(w, h);\n      } catch (_unused) {}\n    });\n  }, [rendition, viewerLayout, bookStyle.marginHorizontal, bookStyle.marginVertical, bookOption.flow]);\n  /**\n   * Selection Event, run when run mouseup event\n   * @method <br/>\n   * - Fire after the Epubjs selected event. [about 300ms]\n   */\n\n  var onSelected = (0, _react.useCallback)( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var iframe, iframeWin, selection_, selectionText, cfiRange, contents;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (ref.current) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            iframe = ref.current.querySelector('iframe');\n            if (iframe) {\n              _context.next = 5;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 5:\n            iframeWin = iframe.contentWindow;\n            if (iframeWin) {\n              _context.next = 8;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 8:\n            selection_ = iframeWin.getSelection();\n            if (selection_) {\n              _context.next = 11;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 11:\n            selectionText = selection_.toString();\n            if (!(selectionText === \"\")) {\n              _context.next = 14;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 14:\n            _context.next = 16;\n            return new Promise(function (resolve) {\n              return setTimeout(function () {\n                return resolve(currentSelection.current.cfiRange);\n              }, 350);\n            });\n          case 16:\n            cfiRange = _context.sent;\n            if (cfiRange) {\n              _context.next = 19;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 19:\n            contents = currentSelection.current.contents;\n            if (contents) {\n              _context.next = 22;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 22:\n            onSelection && onSelection(cfiRange, contents);\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [ref, onSelection]);\n  /** Ref checker */\n\n  (0, _react.useEffect)(function () {\n    if (!ref) {\n      throw new Error(\"[React-Epub-Viewer] Put a ref argument that has a ViewerRef type.\");\n    }\n  }, [ref]);\n  /** Epub parsing */\n  // TODO Fix the infinite re-rendering issue, when inlcude `onBookInfoChange` to dependencies array.\n\n  /* eslint-disable */\n\n  (0, _react.useEffect)(function () {\n    if (!book) return;\n    Promise.all([book.loaded.metadata, book.opened]).then(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        metaData = _ref4[0],\n        bookData = _ref4[1];\n      var newBookData = {\n        coverURL: bookData.archive.urlCache[bookData.cover],\n        title: metaData.title,\n        description: metaData.description,\n        published_date: (0, _commonUtil.timeFormatter)(new Date(metaData.pubdate)),\n        modified_date: (0, _commonUtil.timeFormatter)(new Date(metaData.modified_date)),\n        author: metaData.creator,\n        publisher: metaData.publisher,\n        language: metaData.language\n      };\n      onBookInfoChange && onBookInfoChange(newBookData);\n    }).catch(function (error) {\n      throw \"\".concat(error.stack, \" \\n\\n Message : Epub parsing failed.\");\n    });\n  }, [book]);\n  /* eslint-enable */\n\n  /** Set viewer Styles/Options */\n\n  (0, _react.useEffect)(function () {\n    viewerStyle && setBookStyle(function (v) {\n      return _objectSpread(_objectSpread({}, v), viewerStyle);\n    });\n    viewerOption && setBookOption(function (v) {\n      return _objectSpread(_objectSpread({}, v), viewerOption);\n    });\n  }, [viewerStyle, viewerOption]);\n  /** Apply viewer Styles/Options */\n\n  (0, _react.useEffect)(function () {\n    if (!rendition) return;\n    onResize();\n    var newStyle = {\n      \"body\": {\n        \"padding-top\": \"0px !important\",\n        \"padding-bottom\": \"0px !important\"\n      },\n      \"p\": {\n        \"font-size\": \"\".concat(bookStyle.fontSize, \"px !important\"),\n        \"line-height\": \"\".concat(bookStyle.lineHeight, \" !important\")\n      }\n    };\n    rendition.flow(bookOption.flow);\n    rendition.spread(bookOption.spread);\n    if (bookStyle.fontFamily !== \"Origin\") {\n      Object.assign(newStyle.body, {\n        \"font-family\": \"\".concat(bookStyle.fontFamily, \" !important\")\n      });\n    }\n    if (bookOption.flow === \"scrolled-doc\") {\n      // Scroll type\n      Object.assign(newStyle.body, {\n        \"margin\": \"auto !important\"\n      });\n    } else if (bookOption.spread === \"auto\") {\n      // View 2 pages\n      Object.assign(newStyle.body, {});\n    } else {\n      // View 1 page\n      Object.assign(newStyle.body, {});\n    }\n    rendition.themes.register(\"main\", _viewerStyle.default);\n    rendition.themes.register(\"default\", newStyle);\n    rendition.themes.select(\"main\");\n  }, [rendition, bookStyle.fontFamily, bookStyle.fontSize, bookStyle.lineHeight, bookOption, onResize]);\n  /** Emit screen resizing event */\n\n  (0, _react.useEffect)(function () {\n    window.addEventListener('resize', onResize);\n    return function () {\n      return window.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n  /** Emit selection event */\n\n  (0, _react.useEffect)(function () {\n    if (!rendition) return;\n    rendition.on(\"mouseup\", onSelected);\n    return function () {\n      return rendition.off(\"mouseup\", onSelected);\n    };\n  }, [rendition, onSelected]);\n  return /*#__PURE__*/(0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {\n    children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_EpubViewer.default, {\n      url: url,\n      style: layoutStyle,\n      bookChanged: bookChanged,\n      rendtionChanged: rendtionChanged,\n      tocChanged: onTocChange,\n      pageChanged: onPageChange,\n      selectionChanged: selectionChanged,\n      loadingView: loadingView || /*#__PURE__*/(0, _jsxRuntime.jsx)(_LoadingView.default, {}),\n      ref: ref\n    })\n  });\n};\nvar _default = /*#__PURE__*/_react.default.forwardRef(ReactViewer);\nexports.default = _default;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_EpubViewer","_interopRequireDefault","_LoadingView","_commonUtil","_viewerStyle","_jsxRuntime","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","len","arr2","_i","_arr","_n","_d","_s","_e","next","isArray","ReactViewer","_ref","ref","url","viewerLayout","viewerStyle","viewerOption","onBookInfoChange","onPageChange","onTocChange","onSelection","loadingView","_useState","useState","_useState2","book","setBook","_useState3","_useState4","rendition","setRendition","_useState5","_useState6","layoutStyle","setLayoutStyle","_useState7","fontFamily","fontSize","lineHeight","marginHorizontal","marginVertical","_useState8","bookStyle","setBookStyle","_useState9","flow","resizeOnOrientationChange","spread","_useState10","bookOption","setBookOption","currentSelection","useRef","cfiRange","contents","bookChanged","rendtionChanged","selectionChanged","current","onResize","useMemo","debounce","viewerLayout_","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","VIEWER_FOOTER_HEIGHT","VIEWER_SIDEMENU_WIDTH","_window","window","win_w","innerWidth","win_h","innerHeight","componentHeight","w","h","concat","layout","width","height","marginTop","marginBottom","resize","_unused","onSelected","useCallback","mark","_callee","iframe","iframeWin","selection_","selectionText","wrap","_callee$","_context","prev","abrupt","querySelector","contentWindow","getSelection","setTimeout","sent","stop","useEffect","Error","all","loaded","metadata","opened","_ref3","_ref4","metaData","bookData","newBookData","coverURL","archive","urlCache","cover","title","description","published_date","timeFormatter","Date","pubdate","modified_date","author","creator","publisher","language","catch","stack","v","newStyle","assign","body","themes","register","select","addEventListener","removeEventListener","on","off","jsx","Fragment","children","style","tocChanged","pageChanged","_default","forwardRef"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/node_modules/react-epub-viewer/lib/modules/reactViewer/ReactViewer.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _EpubViewer = _interopRequireDefault(require(\"../epubViewer/EpubViewer\"));\n\nvar _LoadingView = _interopRequireDefault(require(\"../../LoadingView\"));\n\nvar _commonUtil = require(\"../../lib/utils/commonUtil\");\n\nvar _viewerStyle = _interopRequireDefault(require(\"./viewerStyle\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * Epub React Viewer Module\n * @class\n * @param props\n * @param props.url Epub file path\n * @param props.viewerLayout Viewer layout\n * @param props.viewerStyle Viewer style\n * @param props.viewerOption Viewer option\n * @param props.onBookInfoChange Run when book information changed\n * @param props.onPageChange Run when page changed\n * @param props.onTocChange Run when toc changed\n * @param props.onSelection Run when selected\n * @param props.loadingView Loading component\n * @param ref Viewer ref\n */\nvar ReactViewer = function ReactViewer(_ref, ref) {\n  var url = _ref.url,\n      viewerLayout = _ref.viewerLayout,\n      viewerStyle = _ref.viewerStyle,\n      viewerOption = _ref.viewerOption,\n      onBookInfoChange = _ref.onBookInfoChange,\n      onPageChange = _ref.onPageChange,\n      onTocChange = _ref.onTocChange,\n      onSelection = _ref.onSelection,\n      loadingView = _ref.loadingView;\n\n  // TODO Fix the ref type correctly instead 'any' type.\n  var _useState = (0, _react.useState)(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      book = _useState2[0],\n      setBook = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      rendition = _useState4[0],\n      setRendition = _useState4[1];\n\n  var _useState5 = (0, _react.useState)({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      layoutStyle = _useState6[0],\n      setLayoutStyle = _useState6[1];\n\n  var _useState7 = (0, _react.useState)({\n    fontFamily: 'Origin',\n    fontSize: 16,\n    lineHeight: 1.4,\n    marginHorizontal: 0,\n    marginVertical: 0\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      bookStyle = _useState8[0],\n      setBookStyle = _useState8[1];\n\n  var _useState9 = (0, _react.useState)({\n    flow: \"paginated\",\n    resizeOnOrientationChange: true,\n    spread: \"auto\"\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      bookOption = _useState10[0],\n      setBookOption = _useState10[1];\n\n  var currentSelection = (0, _react.useRef)({\n    cfiRange: '',\n    contents: null\n  });\n  /**\n   * Run book changed\n   * @method\n   * @param book Epub Book\n   */\n\n  var bookChanged = function bookChanged(book) {\n    return setBook(book);\n  };\n  /**\n   * Run rendition changed\n   * @method\n   * @param rendition Epub Rendition\n   */\n\n\n  var rendtionChanged = function rendtionChanged(rendition) {\n    return setRendition(rendition);\n  };\n  /**\n   * Run selection changed [Debounce]\n   * @method\n   * @param cfiRange CFIRange\n   * @param contents Selection Epub Contents\n   */\n\n\n  var selectionChanged = function selectionChanged(cfiRange, contents) {\n    currentSelection.current = {\n      cfiRange: cfiRange,\n      contents: contents\n    };\n  };\n  /**\n   * Viewer resizing function\n   * @method\n   */\n\n\n  var onResize = (0, _react.useMemo)(function () {\n    return (0, _commonUtil.debounce)(250, function () {\n      if (!rendition) return;\n      var viewerLayout_ = viewerLayout || {\n        MIN_VIEWER_WIDTH: 600,\n        MIN_VIEWER_HEIGHT: 300,\n        VIEWER_HEADER_HEIGHT: 0,\n        VIEWER_FOOTER_HEIGHT: 0,\n        VIEWER_SIDEMENU_WIDTH: 0\n      };\n      var _window = window,\n          win_w = _window.innerWidth,\n          win_h = _window.innerHeight;\n      var componentHeight = viewerLayout_.VIEWER_HEADER_HEIGHT + viewerLayout_.VIEWER_FOOTER_HEIGHT;\n      var w = win_w - ~~((win_w - viewerLayout_.MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal);\n      var h = bookOption.flow === \"scrolled-doc\" ? win_h - componentHeight : win_h - componentHeight - ~~((win_h - componentHeight - viewerLayout_.MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical);\n      var marginVertical = bookOption.flow === \"scrolled-doc\" ? \"\" : \"\".concat(~~((win_h - componentHeight - viewerLayout_.MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical) / 2, \"px\");\n      setLayoutStyle(function (layout) {\n        if (layout.width !== w || layout.height !== h || layout.marginTop !== marginVertical) {\n          return _objectSpread(_objectSpread({}, layout), {}, {\n            width: w,\n            height: h,\n            marginTop: marginVertical,\n            marginBottom: marginVertical\n          });\n        }\n\n        return layout;\n      });\n\n      try {\n        rendition.resize(w, h);\n      } catch (_unused) {}\n    });\n  }, [rendition, viewerLayout, bookStyle.marginHorizontal, bookStyle.marginVertical, bookOption.flow]);\n  /**\n   * Selection Event, run when run mouseup event\n   * @method <br/>\n   * - Fire after the Epubjs selected event. [about 300ms]\n   */\n\n  var onSelected = (0, _react.useCallback)( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n    var iframe, iframeWin, selection_, selectionText, cfiRange, contents;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (ref.current) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            iframe = ref.current.querySelector('iframe');\n\n            if (iframe) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 5:\n            iframeWin = iframe.contentWindow;\n\n            if (iframeWin) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 8:\n            selection_ = iframeWin.getSelection();\n\n            if (selection_) {\n              _context.next = 11;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 11:\n            selectionText = selection_.toString();\n\n            if (!(selectionText === \"\")) {\n              _context.next = 14;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 14:\n            _context.next = 16;\n            return new Promise(function (resolve) {\n              return setTimeout(function () {\n                return resolve(currentSelection.current.cfiRange);\n              }, 350);\n            });\n\n          case 16:\n            cfiRange = _context.sent;\n\n            if (cfiRange) {\n              _context.next = 19;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 19:\n            contents = currentSelection.current.contents;\n\n            if (contents) {\n              _context.next = 22;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 22:\n            onSelection && onSelection(cfiRange, contents);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [ref, onSelection]);\n  /** Ref checker */\n\n  (0, _react.useEffect)(function () {\n    if (!ref) {\n      throw new Error(\"[React-Epub-Viewer] Put a ref argument that has a ViewerRef type.\");\n    }\n  }, [ref]);\n  /** Epub parsing */\n  // TODO Fix the infinite re-rendering issue, when inlcude `onBookInfoChange` to dependencies array.\n\n  /* eslint-disable */\n\n  (0, _react.useEffect)(function () {\n    if (!book) return;\n    Promise.all([book.loaded.metadata, book.opened]).then(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          metaData = _ref4[0],\n          bookData = _ref4[1];\n\n      var newBookData = {\n        coverURL: bookData.archive.urlCache[bookData.cover],\n        title: metaData.title,\n        description: metaData.description,\n        published_date: (0, _commonUtil.timeFormatter)(new Date(metaData.pubdate)),\n        modified_date: (0, _commonUtil.timeFormatter)(new Date(metaData.modified_date)),\n        author: metaData.creator,\n        publisher: metaData.publisher,\n        language: metaData.language\n      };\n      onBookInfoChange && onBookInfoChange(newBookData);\n    }).catch(function (error) {\n      throw \"\".concat(error.stack, \" \\n\\n Message : Epub parsing failed.\");\n    });\n  }, [book]);\n  /* eslint-enable */\n\n  /** Set viewer Styles/Options */\n\n  (0, _react.useEffect)(function () {\n    viewerStyle && setBookStyle(function (v) {\n      return _objectSpread(_objectSpread({}, v), viewerStyle);\n    });\n    viewerOption && setBookOption(function (v) {\n      return _objectSpread(_objectSpread({}, v), viewerOption);\n    });\n  }, [viewerStyle, viewerOption]);\n  /** Apply viewer Styles/Options */\n\n  (0, _react.useEffect)(function () {\n    if (!rendition) return;\n    onResize();\n    var newStyle = {\n      \"body\": {\n        \"padding-top\": \"0px !important\",\n        \"padding-bottom\": \"0px !important\"\n      },\n      \"p\": {\n        \"font-size\": \"\".concat(bookStyle.fontSize, \"px !important\"),\n        \"line-height\": \"\".concat(bookStyle.lineHeight, \" !important\")\n      }\n    };\n    rendition.flow(bookOption.flow);\n    rendition.spread(bookOption.spread);\n\n    if (bookStyle.fontFamily !== \"Origin\") {\n      Object.assign(newStyle.body, {\n        \"font-family\": \"\".concat(bookStyle.fontFamily, \" !important\")\n      });\n    }\n\n    if (bookOption.flow === \"scrolled-doc\") {\n      // Scroll type\n      Object.assign(newStyle.body, {\n        \"margin\": \"auto !important\"\n      });\n    } else if (bookOption.spread === \"auto\") {\n      // View 2 pages\n      Object.assign(newStyle.body, {});\n    } else {\n      // View 1 page\n      Object.assign(newStyle.body, {});\n    }\n\n    rendition.themes.register(\"main\", _viewerStyle.default);\n    rendition.themes.register(\"default\", newStyle);\n    rendition.themes.select(\"main\");\n  }, [rendition, bookStyle.fontFamily, bookStyle.fontSize, bookStyle.lineHeight, bookOption, onResize]);\n  /** Emit screen resizing event */\n\n  (0, _react.useEffect)(function () {\n    window.addEventListener('resize', onResize);\n    return function () {\n      return window.removeEventListener('resize', onResize);\n    };\n  }, [onResize]);\n  /** Emit selection event */\n\n  (0, _react.useEffect)(function () {\n    if (!rendition) return;\n    rendition.on(\"mouseup\", onSelected);\n    return function () {\n      return rendition.off(\"mouseup\", onSelected);\n    };\n  }, [rendition, onSelected]);\n  return /*#__PURE__*/(0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {\n    children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_EpubViewer.default, {\n      url: url,\n      style: layoutStyle,\n      bookChanged: bookChanged,\n      rendtionChanged: rendtionChanged,\n      tocChanged: onTocChange,\n      pageChanged: onPageChange,\n      selectionChanged: selectionChanged,\n      loadingView: loadingView || /*#__PURE__*/(0, _jsxRuntime.jsx)(_LoadingView.default, {}),\n      ref: ref\n    })\n  });\n};\n\nvar _default = /*#__PURE__*/_react.default.forwardRef(ReactViewer);\n\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}