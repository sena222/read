{"ast":null,"code":"import _objectSpread from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from'react';import{useSelector,useDispatch}from'react-redux';// slices\nimport{pushHighlight,popHighlight,updateHighlight}from'slices/book';import{newSnackbar}from'slices/snackbar';// utils\nimport{getParagraphCfi,clashCfiRange,getSelectionPosition,compareCfi,cfiRangeSpliter,getNodefromCfi}from'lib/utils/commonUtil';// styles\nimport viewerLayout,{contextmenuWidth}from'lib/styles/viewerLayout';// types\n/**\n * Epub Reader의 Highlight 관련 hook\n * - [selection]: 현재 selection의 정보\n * - [onSelection]: selection 적용 함수 (Iframe에 selection 이벤트로 등록해야 합니다.)\n * - [onClickHighlight]: highlight 클릭 함수\n * - [onAddHighlight] highlight 생성 함수\n * - [onRemoveHighlight]: highlight 제거 함수\n * - [onUpdateHighlight]: highlight 갱신 함수\n *\n * @param viewerRef Viewer에 등록된 가지고 있는 useRef\n * @param setIsContextMenu Contextmenu를 컨트롤 할 수 있는 useState 함수\n * \n * @example\n * const [isContextMenu, setIsContextMenu] = useState<boolean>(false);\n * \n * const { \n * \tselection, \n * \tonSelection, \n * \tonClickHighlight,\n * \tonRemoveHighlight\n * } = useSelection(viewerRef, setIsContextMenu);\n */var useHighlight=function useHighlight(viewerRef,setIsContextMenu,bookStyle,bookFlow){var dispatch=useDispatch();var currentLocation=useSelector(function(state){return state.book.currentLocation;});var highlights=useSelector(function(state){return state.book.highlights;});var _useState=useState({update:false,x:0,y:0,height:0,cfiRange:'',content:''}),_useState2=_slicedToArray(_useState,2),selection=_useState2[0],setSelection=_useState2[1];/** \n\t * Selection 발동 이벤트\n\t * @param cfiRange CfiRange\n\t * @return Whether event is success\n\t */var onSelection=useCallback(function(cfiRange){if(!viewerRef.current)return false;var iframe=viewerRef.current.querySelector('iframe');if(!iframe)return false;var iframeWin=iframe.contentWindow;if(!iframeWin)return false;var filtered=highlights.filter(function(highlight){return clashCfiRange(highlight.cfiRange,cfiRange);});if(filtered.length>0){dispatch(newSnackbar({text:\"There are already registered highlights in your selection.\",type:\"WARNING\"}));iframeWin.getSelection().removeAllRanges();return false;}var position=getSelectionPosition(viewerRef.current,bookStyle,bookFlow,viewerLayout.MIN_VIEWER_WIDTH,viewerLayout.MIN_VIEWER_HEIGHT,viewerLayout.VIEWER_HEADER_HEIGHT,contextmenuWidth);if(!position)return false;var x=position.x,y=position.y,height=position.height;var content=iframeWin.getSelection().toString().trim();if(content.length===0)return false;setSelection({update:false,x:x,y:y,height:height,cfiRange:cfiRange,content:content});return true;},[dispatch,viewerRef,highlights,bookFlow,bookStyle,setSelection]);/** Highlight 클릭 이벤트 */var onClickHighlight=useCallback(function(highlightNode){var targetNode=highlightNode.parentElement;if(!targetNode)return;var cfiRange=targetNode.dataset.epubcfi;if(!cfiRange)return;var _targetNode$getBoundi=targetNode.getBoundingClientRect(),x=_targetNode$getBoundi.x,y=_targetNode$getBoundi.y,width=_targetNode$getBoundi.width,height=_targetNode$getBoundi.height;setSelection({update:true,x:x+width/2-contextmenuWidth/2,y:y+height,height:height,cfiRange:cfiRange,content:\"\"});},[setSelection]);/** 하이라이트 생성 함수 */var onAddHighlight=useCallback(function(color){var paragraphCfi=getParagraphCfi(selection.cfiRange);if(!paragraphCfi)return;var highlight={key:paragraphCfi+selection.cfiRange,accessTime:new Date().toISOString(),createTime:new Date().toISOString(),color:color,paragraphCfi:paragraphCfi,cfiRange:selection.cfiRange,chpaterName:currentLocation.chapterName,pageNum:currentLocation.currentPage,content:selection.content};dispatch(pushHighlight(highlight));setSelection(_objectSpread(_objectSpread({},selection),{},{update:true}));},[dispatch,selection,currentLocation]);/** \n   * 하이라이트 수정\n   * @param color 색상 Hex 코드\n   */var onUpdateHighlight=useCallback(function(highlight,color){if(!highlight)return;dispatch(updateHighlight(_objectSpread(_objectSpread({},highlight),{},{color:color})));},[dispatch]);/** \n\t * 하이라이트 제거 함수 \n\t * @param key 북마크 식별값\n\t */var onRemoveHighlight=useCallback(function(key,cfiRange){if(!viewerRef.current||!key)return;dispatch(popHighlight(key));dispatch(newSnackbar({text:\"The highlight removed successful!\",type:\"INFO\"}));viewerRef.current.offHighlight(cfiRange);},[dispatch,viewerRef]);/**\n\t * 하이라이트 여부 확인\n\t * - 페이지 변경에 따른 하이라이트 확인 및 적용\n\t */useEffect(function(){if(!viewerRef.current)return;var iframe=viewerRef.current.querySelector('iframe');if(!iframe)return;var iframeWin=iframe.contentWindow;if(!iframeWin)return;highlights.forEach(function(highlight){var cfiRange=cfiRangeSpliter(highlight.cfiRange);if(!cfiRange)return;var startCfi=cfiRange.startCfi;if(compareCfi(currentLocation.startCfi,startCfi)<1&&compareCfi(currentLocation.endCfi,startCfi)>-1){var node=getNodefromCfi(highlight.paragraphCfi);if(!node)return;viewerRef.current.onHighlight(highlight.cfiRange,function(e){onClickHighlight(e.target);setIsContextMenu(true);},highlight.color);iframeWin.getSelection().removeAllRanges();}});},[dispatch,viewerRef,currentLocation,highlights,onRemoveHighlight,onClickHighlight,setIsContextMenu]);return{selection:selection,onSelection:onSelection,onClickHighlight:onClickHighlight,onAddHighlight:onAddHighlight,onRemoveHighlight:onRemoveHighlight,onUpdateHighlight:onUpdateHighlight};};export default useHighlight;","map":{"version":3,"names":["useState","useEffect","useCallback","useSelector","useDispatch","pushHighlight","popHighlight","updateHighlight","newSnackbar","getParagraphCfi","clashCfiRange","getSelectionPosition","compareCfi","cfiRangeSpliter","getNodefromCfi","viewerLayout","contextmenuWidth","useHighlight","viewerRef","setIsContextMenu","bookStyle","bookFlow","dispatch","currentLocation","state","book","highlights","update","x","y","height","cfiRange","content","selection","setSelection","onSelection","current","iframe","querySelector","iframeWin","contentWindow","filtered","filter","highlight","length","text","type","getSelection","removeAllRanges","position","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","toString","trim","onClickHighlight","highlightNode","targetNode","parentElement","dataset","epubcfi","getBoundingClientRect","width","onAddHighlight","color","paragraphCfi","key","accessTime","Date","toISOString","createTime","chpaterName","chapterName","pageNum","currentPage","onUpdateHighlight","onRemoveHighlight","offHighlight","forEach","startCfi","endCfi","node","onHighlight","e","target"],"sources":["/home/parallels/Downloads/read/src/lib/hooks/useHighlight.ts"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n// slices\nimport { pushHighlight, popHighlight, updateHighlight } from 'slices/book'\nimport { newSnackbar } from 'slices/snackbar'\n// utils\nimport {  \n\tgetParagraphCfi,\n\tclashCfiRange, \n\tgetSelectionPosition,\n\tcompareCfi,\n\tcfiRangeSpliter,\n\tgetNodefromCfi\n} from 'lib/utils/commonUtil'\n// styles\nimport viewerLayout, { contextmenuWidth } from 'lib/styles/viewerLayout'\n// types\nimport { RootState } from 'slices'\nimport { BookStyle, BookFlow } from 'types/book'\nimport Page from 'types/page'\nimport Selection from 'types/selection'\nimport Highlight from 'types/highlight'\n\n\n/**\n * Epub Reader의 Highlight 관련 hook\n * - [selection]: 현재 selection의 정보\n * - [onSelection]: selection 적용 함수 (Iframe에 selection 이벤트로 등록해야 합니다.)\n * - [onClickHighlight]: highlight 클릭 함수\n * - [onAddHighlight] highlight 생성 함수\n * - [onRemoveHighlight]: highlight 제거 함수\n * - [onUpdateHighlight]: highlight 갱신 함수\n *\n * @param viewerRef Viewer에 등록된 가지고 있는 useRef\n * @param setIsContextMenu Contextmenu를 컨트롤 할 수 있는 useState 함수\n * \n * @example\n * const [isContextMenu, setIsContextMenu] = useState<boolean>(false);\n * \n * const { \n * \tselection, \n * \tonSelection, \n * \tonClickHighlight,\n * \tonRemoveHighlight\n * } = useSelection(viewerRef, setIsContextMenu);\n */\nconst useHighlight = (\n\tviewerRef: any, \n\tsetIsContextMenu: React.Dispatch<React.SetStateAction<boolean>>,\n\tbookStyle: BookStyle,\n\tbookFlow: BookFlow\n) => {\n\tconst dispatch = useDispatch();\n\tconst currentLocation = useSelector<RootState, Page>(state => state.book.currentLocation);\n\tconst highlights = useSelector<RootState, Highlight[]>(state => state.book.highlights);\n\n\tconst [selection, setSelection] = useState<Selection>({\n\t\tupdate: false,\n\t\tx: 0,\n\t\ty: 0,\n\t\theight: 0,\n\t\tcfiRange: '',\n\t\tcontent: ''\n\t});\n\t\n\n\t/** \n\t * Selection 발동 이벤트\n\t * @param cfiRange CfiRange\n\t * @return Whether event is success\n\t */\n\tconst onSelection = useCallback((cfiRange: string): boolean => {\n\t\tif (!viewerRef.current) return false;\n\n\t\tconst iframe = viewerRef.current.querySelector('iframe');\n\t\tif (!iframe) return false;\n\n\t\tconst iframeWin = iframe.contentWindow;\n\t\tif (!iframeWin) return false;\n\t\t\n\t\tconst filtered = highlights.filter(\n\t\t\thighlight => clashCfiRange(highlight.cfiRange, cfiRange)\n\t\t);\n\n\t\tif (filtered.length > 0) {\n\t\t\tdispatch(newSnackbar({\n        text: \"There are already registered highlights in your selection.\", \n        type: \"WARNING\" \n      }));\n\n\t\t\tiframeWin.getSelection().removeAllRanges();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst position = getSelectionPosition(\n\t\t\tviewerRef.current,\n\t\t\tbookStyle,\n\t\t\tbookFlow,\n\t\t\tviewerLayout.MIN_VIEWER_WIDTH,\n\t\t\tviewerLayout.MIN_VIEWER_HEIGHT,\n\t\t\tviewerLayout.VIEWER_HEADER_HEIGHT,\n\t\t\tcontextmenuWidth\n\t\t);\n\t\tif (!position) return false;\n\n\t\tconst { x, y, height } = position;\n\n\t\tconst content = iframeWin.getSelection().toString().trim();\n\n\t\tif (content.length === 0) return false;\n\t\t\n\t\tsetSelection({ \n\t\t\tupdate: false,\n\t\t\tx, \n\t\t\ty,\n\t\t\theight,\n\t\t\tcfiRange,\n\t\t\tcontent\n\t\t});\n\t\t\n\t\treturn true;\n\t}, [\n\t\tdispatch, \n\t\tviewerRef,\n\t\thighlights, \n\t\tbookFlow, \n\t\tbookStyle,\n\t\tsetSelection\n\t]);\n\n\t/** Highlight 클릭 이벤트 */\n\tconst onClickHighlight = useCallback((highlightNode: HTMLElement) => {\n\t\tconst targetNode = highlightNode.parentElement;\n\t\tif (!targetNode) return;\n\n\t\tconst cfiRange = targetNode.dataset.epubcfi;\n\t\tif (!cfiRange) return;\n\n\t\tconst { x, y, width, height } = targetNode.getBoundingClientRect();\n\n\t\tsetSelection({ \n\t\t\tupdate: true,\n\t\t\tx: x + width / 2 - contextmenuWidth / 2, \n\t\t\ty: y + height,\n\t\t\theight,\n\t\t\tcfiRange,\n\t\t\tcontent: \"\"\n\t\t});\n\t}, [setSelection]);\n\n\t/** 하이라이트 생성 함수 */\n\tconst onAddHighlight = useCallback((color: string) => {\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n    \n    const highlight: Highlight = {\n      key: paragraphCfi + selection.cfiRange,\n      accessTime: new Date().toISOString(),\n      createTime: new Date().toISOString(),\n      color,\n      paragraphCfi,\n      cfiRange: selection.cfiRange,\n      chpaterName: currentLocation.chapterName,\n      pageNum: currentLocation.currentPage,\n      content: selection.content\n    };\n\n    dispatch(pushHighlight(highlight));\n\n\t\tsetSelection({ ...selection, update: true });\n  }, [dispatch, selection, currentLocation]);\n\n\t/** \n   * 하이라이트 수정\n   * @param color 색상 Hex 코드\n   */\n\tconst onUpdateHighlight = useCallback((highlight: Highlight | null, color: string) => {\n\t\tif (!highlight) return;\n\n    dispatch(updateHighlight({\n      ...highlight,\n      color\n    }));\n  }, [dispatch]);\n\n\t/** \n\t * 하이라이트 제거 함수 \n\t * @param key 북마크 식별값\n\t */\n\t const onRemoveHighlight = useCallback((key: string, cfiRange: string) => {\n\t\tif (!viewerRef.current || !key) return;\n\n\t\tdispatch(popHighlight(key));\n\n\t\tdispatch(newSnackbar({\n\t\t\ttext: \"The highlight removed successful!\", \n\t\t\ttype: \"INFO\" \n\t\t}));\n\t\t\n\t\tviewerRef.current.offHighlight(cfiRange);\n\t}, [dispatch, viewerRef]);\n\n\n\t/**\n\t * 하이라이트 여부 확인\n\t * - 페이지 변경에 따른 하이라이트 확인 및 적용\n\t */\n\t useEffect(() => {\n\t\tif (!viewerRef.current) return;\n\n\t\tconst iframe = viewerRef.current.querySelector('iframe');\n\t\tif (!iframe) return;\n\n\t\tconst iframeWin = iframe.contentWindow;\n\t\tif (!iframeWin) return;\n\n\t\thighlights.forEach(highlight => {\n\t\t\tconst cfiRange = cfiRangeSpliter(highlight.cfiRange);\n\t\t\tif (!cfiRange) return;\n\n\t\t\tconst { startCfi } = cfiRange;\n\n\t\t\tif (compareCfi(currentLocation.startCfi, startCfi) < 1\n\t\t\t\t&& compareCfi(currentLocation.endCfi, startCfi) > -1) {\n\t\t\t\tconst node = getNodefromCfi(highlight.paragraphCfi);\n\t\t\t\tif (!node) return;\n\n\t\t\t\tviewerRef.current.onHighlight(\n\t\t\t\t\thighlight.cfiRange,\n\t\t\t\t\t(e: any) => {\n\t\t\t\t\t\tonClickHighlight(e.target);\n\t\t\t\t\t\tsetIsContextMenu(true);\n\t\t\t\t\t},\n\t\t\t\t\thighlight.color \n\t\t\t\t);\n\n\t\t\t\tiframeWin.getSelection().removeAllRanges();\n\t\t\t}\n\t\t});\n\t}, [\n\t\tdispatch,\n\t\tviewerRef, \n\t\tcurrentLocation, \n\t\thighlights, \n\t\tonRemoveHighlight,\n\t\tonClickHighlight,\n\t\tsetIsContextMenu\n\t]);\n\n\n\treturn { \n\t\tselection, \n\t\tonSelection, \n\t\tonClickHighlight,\n\t\tonAddHighlight,\n\t\tonRemoveHighlight,\n\t\tonUpdateHighlight\n\t};\n}\n\nexport default useHighlight;"],"mappings":"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"},"metadata":{},"sourceType":"module"}