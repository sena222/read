{"ast":null,"code":"var _jsxFileName = \"/home/parallels/Downloads/react-epub-viewer-demo/src/containers/commons/ContextMenu.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSelector } from 'react-redux';\n// components\nimport Wrapper from 'components/contextMenu/Wrapper';\nimport ColorItem from 'components/contextMenu/ColorItem';\nimport Item from 'components/contextMenu/Item';\n// utils\nimport { getParagraphCfi } from 'lib/utils/commonUtil';\n// slices\nimport { contextmenuWidth } from 'lib/styles/viewerLayout';\n// types\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ContextMenu = _ref => {\n  _s();\n  let {\n    active,\n    viewerRef,\n    selection,\n    onAddHighlight,\n    onRemoveHighlight,\n    onUpdateHighlight,\n    onContextmMenuRemove\n  } = _ref;\n  const highlights = useSelector(state => state.book.highlights);\n  const colorList = useSelector(state => state.book.colorList);\n  const menuRef = useRef(null);\n  const [highlight, setHighlight] = useState(null);\n  const [display, setDisplay] = useState(false);\n  const [isEraseBtn, setIsEraseBtn] = useState(false);\n  const [isReverse, setIsReverse] = useState(false);\n  const [height, setHeight] = useState(0);\n  const [y, setY] = useState(selection.y);\n  const ColorList = colorList.map(color => /*#__PURE__*/_jsxDEV(ColorItem, {\n    name: color.name,\n    color: color.code,\n    onClick: selection.update ? () => onUpdateHighlight(highlight, color.code) : () => onAddHighlight(color.code)\n  }, color.code, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 14\n  }, this));\n\n  /** Remove highlight */\n  const onRemoveHighlight_ = useCallback(() => {\n    if (!highlight) return;\n    onRemoveHighlight(highlight.key, highlight.cfiRange);\n    onContextmMenuRemove();\n    setIsEraseBtn(false);\n  }, [highlight, onRemoveHighlight, onContextmMenuRemove]);\n\n  /** \n   * Remove contextmenu\n   * @param e Mouse Event\n   * @param e.path\n   */\n  const onRemove = useCallback(_ref2 => {\n    let {\n      path\n    } = _ref2;\n    if (!menuRef.current) return;\n    if ([...path].includes(menuRef.current)) return;\n    onContextmMenuRemove();\n  }, [menuRef, onContextmMenuRemove]);\n\n  /** \n   * Arrow event\n   * @param e Keyboard Event\n   * @param e.key\n   */\n  const onKeyPress = useCallback(_ref3 => {\n    let {\n      key\n    } = _ref3;\n    key && key === \"ArrowLeft\" && onContextmMenuRemove();\n    key && key === \"ArrowRight\" && onContextmMenuRemove();\n  }, [onContextmMenuRemove]);\n\n  /** Check whether the menu button is visible */\n  useEffect(() => {\n    if (!active) setIsEraseBtn(false);\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n    const filtered = highlights.filter(highlight => highlight.key === paragraphCfi + selection.cfiRange);\n    if (!filtered.length) return;\n    const highlight_ = filtered[0];\n    setHighlight(highlight_);\n    if (selection.update) {\n      setIsEraseBtn(true);\n    } else {\n      setIsEraseBtn(false);\n    }\n  }, [active, highlights, selection.cfiRange, selection.update]);\n\n  /** Register contextmenu events */\n  useEffect(() => {\n    if (!viewerRef.current) return;\n    const iframe = document.querySelector('iframe');\n    const node = iframe && iframe.contentWindow && iframe.contentWindow.document;\n    const scrolledTarget = viewerRef.current.querySelector('div');\n    if (active) {\n      setDisplay(true);\n      scrolledTarget && scrolledTarget.addEventListener('scroll', onContextmMenuRemove);\n      node && node.addEventListener('mousedown', onRemove);\n      node && node.addEventListener('keyup', onKeyPress);\n      document.addEventListener('mousedown', onRemove);\n      document.addEventListener('keyup', onKeyPress);\n    } else {\n      setDisplay(false);\n      scrolledTarget && scrolledTarget.removeEventListener('scroll', onContextmMenuRemove);\n      node && node.removeEventListener('mousedown', onRemove);\n      node && node.removeEventListener('keyup', onKeyPress);\n      document.removeEventListener('mousedown', onRemove);\n      document.removeEventListener('keyup', onKeyPress);\n    }\n    ;\n    return () => {\n      node && node.removeEventListener('mousedown', onContextmMenuRemove);\n      node && node.removeEventListener('keyup', onKeyPress);\n      document.removeEventListener('keyup', onKeyPress);\n    };\n  }, [viewerRef, active, onRemove, onContextmMenuRemove, onKeyPress]);\n\n  /** Set modified contextmenu height & whether menu is reverse */\n  useEffect(() => {\n    const menuPadding = 8;\n    const itemHeight = 32;\n    let itemCnt = ColorList.length;\n    if (isEraseBtn) itemCnt += 1;\n    const defaultHeight = itemCnt * itemHeight + menuPadding;\n    let y_ = selection.y;\n    const {\n      innerHeight\n    } = window;\n    if (selection.y + defaultHeight > innerHeight) {\n      y_ = selection.y - selection.height - defaultHeight;\n      if (y_ < 0) {\n        setHeight(defaultHeight + y_ - 8);\n        y_ = 8;\n      } else {\n        setHeight(defaultHeight);\n      }\n      setIsReverse(true);\n    } else {\n      setHeight(defaultHeight);\n      setIsReverse(false);\n    }\n    setY(y_);\n  }, [selection.y, selection.height, ColorList, isEraseBtn, setHeight]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: display && /*#__PURE__*/_jsxDEV(Wrapper, {\n      x: selection.x,\n      y: y,\n      width: contextmenuWidth,\n      height: height,\n      isReverse: isReverse,\n      ref: menuRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [ColorList, isEraseBtn && /*#__PURE__*/_jsxDEV(Item, {\n          text: \"Remove\",\n          onClick: onRemoveHighlight_\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n_s(ContextMenu, \"JdZc4j0ArUXoAHWOqGHHLKW867U=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c = ContextMenu;\nexport default ContextMenu;\nvar _c;\n$RefreshReg$(_c, \"ContextMenu\");","map":{"version":3,"names":["useState","useEffect","useCallback","useRef","useSelector","Wrapper","ColorItem","Item","getParagraphCfi","contextmenuWidth","ContextMenu","active","viewerRef","selection","onAddHighlight","onRemoveHighlight","onUpdateHighlight","onContextmMenuRemove","highlights","state","book","colorList","menuRef","highlight","setHighlight","display","setDisplay","isEraseBtn","setIsEraseBtn","isReverse","setIsReverse","height","setHeight","y","setY","ColorList","map","color","name","code","update","onRemoveHighlight_","key","cfiRange","onRemove","path","current","includes","onKeyPress","paragraphCfi","filtered","filter","length","highlight_","iframe","document","querySelector","node","contentWindow","scrolledTarget","addEventListener","removeEventListener","menuPadding","itemHeight","itemCnt","defaultHeight","y_","innerHeight","window","x"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/src/containers/commons/ContextMenu.tsx"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react'\nimport { useSelector } from 'react-redux'\n// components\nimport Wrapper from 'components/contextMenu/Wrapper'\nimport ColorItem from 'components/contextMenu/ColorItem'\nimport Item from 'components/contextMenu/Item'\n// utils\nimport { getParagraphCfi } from 'lib/utils/commonUtil'\n// slices\nimport { contextmenuWidth } from 'lib/styles/viewerLayout'\n// types\nimport { RootState } from 'slices'\nimport Highlight, { Color } from 'types/highlight'\nimport Selection from 'types/selection'\n\n\nconst ContextMenu = ({ \n  active,\n  viewerRef, \n  selection, \n  onAddHighlight,\n  onRemoveHighlight,\n  onUpdateHighlight, \n  onContextmMenuRemove\n}: Props) => {\n  const highlights = useSelector<RootState, Highlight[]>(state => state.book.highlights);\n  const colorList = useSelector<RootState, Color[]>(state => state.book.colorList);\n\n  const menuRef = useRef<HTMLDivElement | null>(null);\n\n  const [highlight, setHighlight] = useState<Highlight | null>(null);\n  \n  const [display, setDisplay] = useState<boolean>(false);\n  const [isEraseBtn, setIsEraseBtn] = useState<boolean>(false);\n  const [isReverse, setIsReverse] = useState<boolean>(false);\n  \n  const [height, setHeight] = useState<number>(0);\n  const [y, setY] = useState<number>(selection.y);\n\n  const ColorList = colorList.map(\n    color => <ColorItem key={color.code}\n                        name={color.name}\n                        color={color.code}\n                        onClick={selection.update\n                          ? () => onUpdateHighlight(highlight, color.code)\n                          : () => onAddHighlight(color.code)\n                        } />\n  );\n\n  \n  /** Remove highlight */\n  const onRemoveHighlight_ = useCallback(() => {\n    if (!highlight) return;\n\n    onRemoveHighlight(highlight.key, highlight.cfiRange);\n    onContextmMenuRemove();\n    \n    setIsEraseBtn(false);\n  }, [highlight, onRemoveHighlight, onContextmMenuRemove]);\n\n  /** \n   * Remove contextmenu\n   * @param e Mouse Event\n   * @param e.path\n   */\n  const onRemove = useCallback(({ path }: any) => {\n    if (!menuRef.current) return;\n\n    if ([...path].includes(menuRef.current)) return;\n    onContextmMenuRemove();\n  }, [menuRef, onContextmMenuRemove]);\n  \n  /** \n   * Arrow event\n   * @param e Keyboard Event\n   * @param e.key\n   */\n  const onKeyPress = useCallback(({ key }: any) => {\n    key && key === \"ArrowLeft\" && onContextmMenuRemove();\n    key && key === \"ArrowRight\" && onContextmMenuRemove();\n  }, [onContextmMenuRemove]);\n\n\n  /** Check whether the menu button is visible */\n  useEffect(() => {\n    if (!active) setIsEraseBtn(false);\n\n    const paragraphCfi = getParagraphCfi(selection.cfiRange);\n    if (!paragraphCfi) return;\n\n    const filtered = highlights.filter(highlight => highlight.key === paragraphCfi + selection.cfiRange);\n\n    if (!filtered.length) return;\n    const highlight_ = filtered[0];\n    setHighlight(highlight_);\n\n    if (selection.update) {\n      setIsEraseBtn(true);\n    } else {\n      setIsEraseBtn(false);\n    }\n  }, [\n    active,\n    highlights, \n    selection.cfiRange,\n    selection.update\n  ]);\n\n  /** Register contextmenu events */\n  useEffect(() => {\n    if (!viewerRef.current) return;\n    \n    const iframe = document.querySelector('iframe');\n    const node = iframe && iframe.contentWindow && iframe.contentWindow.document;\n    const scrolledTarget = viewerRef.current.querySelector('div');\n\n    if (active) {\n      setDisplay(true);\n      scrolledTarget && scrolledTarget.addEventListener('scroll', onContextmMenuRemove);\n      node && node.addEventListener('mousedown', onRemove);\n      node && node.addEventListener('keyup', onKeyPress);\n      document.addEventListener('mousedown', onRemove);\n      document.addEventListener('keyup', onKeyPress);\n    } else {\n      setDisplay(false);\n      scrolledTarget && scrolledTarget.removeEventListener('scroll', onContextmMenuRemove);\n      node && node.removeEventListener('mousedown', onRemove);\n      node && node.removeEventListener('keyup', onKeyPress);\n      document.removeEventListener('mousedown', onRemove);\n      document.removeEventListener('keyup', onKeyPress);\n    };\n\n    return () => {\n      node && node.removeEventListener('mousedown', onContextmMenuRemove);\n      node && node.removeEventListener('keyup', onKeyPress);\n      document.removeEventListener('keyup', onKeyPress);\n    }\n  }, [\n    viewerRef, \n    active,\n    onRemove,\n    onContextmMenuRemove, \n    onKeyPress\n  ]);\n\n  /** Set modified contextmenu height & whether menu is reverse */\n  useEffect(() => {\n    const menuPadding = 8;\n    const itemHeight = 32;\n    let itemCnt = ColorList.length;\n    \n    if (isEraseBtn) itemCnt += 1;\n    \n    const defaultHeight = itemCnt * itemHeight + menuPadding;\n    let y_ = selection.y;\n    const { innerHeight } = window;\n    \n    if (selection.y + defaultHeight > innerHeight) {\n      y_ = selection.y - selection.height - (defaultHeight);\n      if (y_ < 0) {\n        setHeight(defaultHeight + y_ - 8);\n        y_ = 8;\n      } else {\n        setHeight(defaultHeight);\n      }\n      setIsReverse(true);\n    } else {\n      setHeight(defaultHeight);\n      setIsReverse(false);\n    }\n\n    setY(y_);\n  }, [\n    selection.y, \n    selection.height, \n    ColorList, \n    isEraseBtn, \n    setHeight\n  ]);\n\n\n  return (<>\n    {display && <Wrapper x={selection.x} \n                         y={y} \n                         width={contextmenuWidth}\n                         height={height}\n                         isReverse={isReverse}\n                         ref={menuRef}>\n      <div>\n        {ColorList}\n        {isEraseBtn && <Item text=\"Remove\" onClick={onRemoveHighlight_} />}\n      </div>\n    </Wrapper>}\n  </>);\n}\n\ninterface Props {\n  active: boolean;\n  viewerRef: any;\n  selection: Selection;\n  onAddHighlight: (color: string) => void;\n  onRemoveHighlight: (key: string, cfiRange: string) => void;\n  onUpdateHighlight: (highlight: Highlight | null, color: string) => void;\n  onContextmMenuRemove: () => void;\n}\n\nexport default ContextMenu"],"mappings":"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"},"metadata":{},"sourceType":"module"}