{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\n// types\n\n// lib\nimport palette from 'lib/styles/palette';\n\n/* \n\tInitial State\n*/\n\n/** 초기 Book 상태 */\nconst initialBook = {\n  coverURL: '',\n  title: '',\n  description: '',\n  published_date: '',\n  modified_date: '',\n  author: '',\n  publisher: '',\n  language: ''\n};\n\n/** 초기 CurrentPage 상태 */\nconst initialCurrentLocation = {\n  chapterName: \"-\",\n  currentPage: 0,\n  totalPage: 0,\n  startCfi: '',\n  endCfi: '',\n  base: ''\n};\n\n/** 초기 색상표 상태 */\nconst initialColorList = [{\n  name: 'Red',\n  code: palette.red4\n}, {\n  name: 'Orange',\n  code: palette.orange4\n}, {\n  name: 'Yellow',\n  code: palette.yellow4\n}, {\n  name: 'Green',\n  code: palette.green4\n}, {\n  name: 'Blue',\n  code: palette.blue4\n}, {\n  name: 'Purple',\n  code: palette.purple4\n}];\nconst initialState = {\n  book: initialBook,\n  currentLocation: initialCurrentLocation,\n  toc: [],\n  highlights: [],\n  colorList: initialColorList\n};\n\n/* \n\tSlice\n*/\nconst bookSlice = createSlice({\n  name: 'book',\n  initialState,\n  reducers: {\n    /** Book 갱신 @dispatch */\n    updateBook(state, action) {\n      state.book = action.payload;\n    },\n    /** CurrentPage 갱신 @dispatch */\n    updateCurrentPage(state, action) {\n      state.currentLocation = action.payload;\n    },\n    /** Book 초기화 @dispatch */\n    clearBook(state) {\n      state.book = initialBook;\n    },\n    /** 목차 갱신 @dispatch */\n    updateToc(state, action) {\n      state.toc = action.payload;\n    },\n    /** 목차 초기화 @dispatch */\n    clearToc(state) {\n      state.toc = [];\n    },\n    /** 하이라이트 추가 */\n    pushHighlight(state, action) {\n      const check = state.highlights.filter(h => h.key === action.payload.key);\n      if (check.length > 0) return;\n      state.highlights.push(action.payload);\n    },\n    /** 하이라이트 갱신 */\n    updateHighlight(state, action) {\n      const new_idx = action.payload.key;\n      const old_idx = state.highlights.map(h => h.key).indexOf(new_idx);\n      state.highlights.splice(old_idx, 1, action.payload);\n    },\n    /** 하이라이트 삭제 */\n    popHighlight(state, action) {\n      const idx = state.highlights.map(h => h.key).indexOf(action.payload);\n      state.highlights.splice(idx, 1);\n    }\n  }\n});\nexport const {\n  updateBook,\n  clearBook,\n  updateCurrentPage,\n  updateToc,\n  clearToc,\n  pushHighlight,\n  updateHighlight,\n  popHighlight\n} = bookSlice.actions;\nexport default bookSlice.reducer;","map":{"version":3,"names":["createSlice","palette","initialBook","coverURL","title","description","published_date","modified_date","author","publisher","language","initialCurrentLocation","chapterName","currentPage","totalPage","startCfi","endCfi","base","initialColorList","name","code","red4","orange4","yellow4","green4","blue4","purple4","initialState","book","currentLocation","toc","highlights","colorList","bookSlice","reducers","updateBook","state","action","payload","updateCurrentPage","clearBook","updateToc","clearToc","pushHighlight","check","filter","h","key","length","push","updateHighlight","new_idx","old_idx","map","indexOf","splice","popHighlight","idx","actions","reducer"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/src/slices/book.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n// types\nimport Book from 'types/book'\nimport Page from 'types/page'\nimport Toc from 'types/toc'\nimport Highlight, { Color } from 'types/highlight'\n// lib\nimport palette from 'lib/styles/palette'\n\n\n/* \n\tInitial State\n*/\n\n/** 초기 Book 상태 */\nconst initialBook: Book = {\n\tcoverURL: '',\n\ttitle: '',\n\tdescription: '',\n\tpublished_date: '',\n\tmodified_date: '',\n\tauthor: '',\n\tpublisher: '',\n\tlanguage: ''\n}\n\n/** 초기 CurrentPage 상태 */\nconst initialCurrentLocation: Page = {\n\tchapterName: \"-\",\n\tcurrentPage: 0,\n\ttotalPage: 0,\n\tstartCfi: '',\n\tendCfi: '',\n\tbase: ''\n}\n\n/** 초기 색상표 상태 */\nconst initialColorList: Color[] = [\n\t{ name: 'Red', code: palette.red4 },\n\t{ name: 'Orange', code: palette.orange4 },\n\t{ name: 'Yellow', code: palette.yellow4 },\n\t{ name: 'Green', code: palette.green4 },\n\t{ name: 'Blue', code: palette.blue4 },\n\t{ name: 'Purple', code: palette.purple4 }\n]\n\nconst initialState: BookState = {\n\tbook: initialBook,\n\tcurrentLocation: initialCurrentLocation,\n\ttoc: [],\n\thighlights: [],\n\tcolorList: initialColorList,\n}\n\n\n/* \n\tSlice\n*/\nconst bookSlice = createSlice({\n\tname: 'book',\n\tinitialState,\n\treducers: {\n\t\t/** Book 갱신 @dispatch */\n\t\tupdateBook(state, action: PayloadAction<Book>) {\n\t\t\tstate.book = action.payload;\n\t\t},\n\t\t/** CurrentPage 갱신 @dispatch */\n\t\tupdateCurrentPage(state, action: PayloadAction<Page>) {\n\t\t\tstate.currentLocation = action.payload;\n\t\t},\n\t\t/** Book 초기화 @dispatch */\n\t\tclearBook(state) {\n\t\t\tstate.book = initialBook;\n\t\t},\n\t\t/** 목차 갱신 @dispatch */\n\t\tupdateToc(state, action: PayloadAction<Toc[]>) {\n\t\t\tstate.toc = action.payload;\n\t\t},\n\t\t/** 목차 초기화 @dispatch */\n\t\tclearToc(state) {\n\t\t\tstate.toc = [];\n\t\t},\n\t\t/** 하이라이트 추가 */\n\t\tpushHighlight(state, action: PayloadAction<Highlight>) {\n\t\t\tconst check = state.highlights.filter(h => h.key === action.payload.key);\n\t\t\tif (check.length > 0) return;\n\t\t\tstate.highlights.push(action.payload);\n\t\t},\n\t\t/** 하이라이트 갱신 */\n\t\tupdateHighlight(state, action: PayloadAction<Highlight>) {\n\t\t\tconst new_idx = action.payload.key;\n\t\t\tconst old_idx = state.highlights.map(h => h.key).indexOf(new_idx);\n\t\t\tstate.highlights.splice(old_idx, 1, action.payload);\n\t\t},\n\t\t/** 하이라이트 삭제 */\n\t\tpopHighlight(state, action: PayloadAction<string>) {\n\t\t\tconst idx = state.highlights.map(h => h.key).indexOf(action.payload);\n\t\t\tstate.highlights.splice(idx, 1);\n\t\t}\n\t}\n});\n\n\nexport interface BookState {\n\tbook: Book;\n\tcurrentLocation: Page;\n\ttoc: Toc[];\n\thighlights: Highlight[];\n\tcolorList: Color[];\n}\n\nexport const { \n\tupdateBook,\n\tclearBook,\n\tupdateCurrentPage,\n\tupdateToc,\n\tclearToc,\n\tpushHighlight,\n\tupdateHighlight,\n\tpopHighlight\n } = bookSlice.actions;\n \nexport default bookSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}