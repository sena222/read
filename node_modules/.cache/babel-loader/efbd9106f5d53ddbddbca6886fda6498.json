{"ast":null,"code":"import _asyncToGenerator from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect,useRef,useCallback,useMemo}from'react';// modules\nimport EpubViewer from'../../modules/epubViewer/EpubViewer';// components\nimport LoadingView from'LoadingView';// utils\nimport{debounce,timeFormatter}from'lib/utils/commonUtil';// styles\nimport viewerDefaultStyles from'../../modules/reactViewer/viewerStyle';// types\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";/**\n * Epub React Viewer Module\n * @class\n * @param props\n * @param props.url Epub file path\n * @param props.viewerLayout Viewer layout\n * @param props.viewerStyle Viewer style\n * @param props.viewerStyleURL Viwer style - CSS URL\n * @param props.viewerOption Viewer option\n * @param props.onBookInfoChange Run when book information changed\n * @param props.onPageChange Run when page changed\n * @param props.onTocChange Run when toc changed\n * @param props.onSelection Run when selected\n * @param props.loadingView Loading component\n * @param ref Viewer ref\n */var ReactViewer=function ReactViewer(_ref,ref){var url=_ref.url,viewerLayout=_ref.viewerLayout,viewerStyle=_ref.viewerStyle,viewerStyleURL=_ref.viewerStyleURL,viewerOption=_ref.viewerOption,onBookInfoChange=_ref.onBookInfoChange,onPageChange=_ref.onPageChange,onTocChange=_ref.onTocChange,onSelection=_ref.onSelection,loadingView=_ref.loadingView;// TODO Fix the ref type correctly instead 'any' type.\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),book=_useState2[0],setBook=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),rendition=_useState4[0],setRendition=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),layoutStyle=_useState6[0],setLayoutStyle=_useState6[1];var _useState7=useState({fontFamily:'Origin',fontSize:16,lineHeight:1.4,marginHorizontal:0,marginVertical:0}),_useState8=_slicedToArray(_useState7,2),bookStyle=_useState8[0],setBookStyle=_useState8[1];var _useState9=useState({flow:'paginated',resizeOnOrientationChange:true,spread:'auto'}),_useState10=_slicedToArray(_useState9,2),bookOption=_useState10[0],setBookOption=_useState10[1];var currentSelection=useRef({cfiRange:'',contents:null});/**\n   * Run book changed\n   * @method\n   * @param book Epub Book\n   */var bookChanged=function bookChanged(book){return setBook(book);};/**\n   * Run rendition changed\n   * @method\n   * @param rendition Epub Rendition\n   */var rendtionChanged=function rendtionChanged(rendition){return setRendition(rendition);};/**\n   * Run selection changed [Debounce]\n   * @method\n   * @param cfiRange CFIRange\n   * @param contents Selection Epub Contents\n   */var selectionChanged=function selectionChanged(cfiRange,contents){currentSelection.current={cfiRange:cfiRange,contents:contents};};/**\n   * Viewer resizing function\n   * @method\n   */var onResize=useMemo(function(){return debounce(250,function(){if(!rendition)return;var viewerLayout_=viewerLayout||{MIN_VIEWER_WIDTH:600,MIN_VIEWER_HEIGHT:300,VIEWER_HEADER_HEIGHT:0,VIEWER_FOOTER_HEIGHT:0,VIEWER_SIDEMENU_WIDTH:0};var _window=window,win_w=_window.innerWidth,win_h=_window.innerHeight;var componentHeight=viewerLayout_.VIEWER_HEADER_HEIGHT+viewerLayout_.VIEWER_FOOTER_HEIGHT;var w=win_w-~~((win_w-viewerLayout_.MIN_VIEWER_WIDTH)/100*bookStyle.marginHorizontal);var h=bookOption.flow==='scrolled-doc'?win_h-componentHeight:win_h-componentHeight-~~((win_h-componentHeight-viewerLayout_.MIN_VIEWER_HEIGHT)/100*bookStyle.marginVertical);var marginVertical=bookOption.flow==='scrolled-doc'?'':\"\".concat(~~((win_h-componentHeight-viewerLayout_.MIN_VIEWER_HEIGHT)/100*bookStyle.marginVertical)/2,\"px\");setLayoutStyle(function(layout){if(layout.width!==w||layout.height!==h||layout.marginTop!==marginVertical){return _objectSpread(_objectSpread({},layout),{},{width:w,height:h,marginTop:marginVertical,marginBottom:marginVertical});}return layout;});try{rendition.resize(w,h);}catch(_unused){}});},[rendition,viewerLayout,bookStyle.marginHorizontal,bookStyle.marginVertical,bookOption.flow]);/**\n   * Selection Event, run when run mouseup event\n   * @method <br/>\n   * - Fire after the Epubjs selected event. [about 300ms]\n   */var onSelected=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var iframe,iframeWin,selection_,selectionText,cfiRange,contents;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(ref.current){_context.next=2;break;}return _context.abrupt(\"return\");case 2:iframe=ref.current.querySelector('iframe');if(iframe){_context.next=5;break;}return _context.abrupt(\"return\");case 5:iframeWin=iframe.contentWindow;if(iframeWin){_context.next=8;break;}return _context.abrupt(\"return\");case 8:selection_=iframeWin.getSelection();if(selection_){_context.next=11;break;}return _context.abrupt(\"return\");case 11:selectionText=selection_.toString();if(!(selectionText==='')){_context.next=14;break;}return _context.abrupt(\"return\");case 14:_context.next=16;return new Promise(function(resolve){return setTimeout(function(){return resolve(currentSelection.current.cfiRange);},350);});case 16:cfiRange=_context.sent;if(cfiRange){_context.next=19;break;}return _context.abrupt(\"return\");case 19:contents=currentSelection.current.contents;if(contents){_context.next=22;break;}return _context.abrupt(\"return\");case 22:onSelection&&onSelection(cfiRange,contents);case 23:case\"end\":return _context.stop();}}},_callee);})),[ref,onSelection]);/** Ref checker */useEffect(function(){if(!ref){throw new Error('[React-Epub-Viewer] Put a ref argument that has a ViewerRef type.');}},[ref]);/** Epub parsing */ // TODO Fix the infinite re-rendering issue, when inlcude `onBookInfoChange` to dependencies array.\n/* eslint-disable */useEffect(function(){if(!book)return;Promise.all([book.loaded.metadata,book.opened]).then(function(_ref3){var _ref4=_slicedToArray(_ref3,2),metaData=_ref4[0],bookData=_ref4[1];var newBookData={coverURL:bookData.archive.urlCache[bookData.cover],title:metaData.title,description:metaData.description,published_date:timeFormatter(new Date(metaData.pubdate)),modified_date:timeFormatter(new Date(metaData.modified_date)),author:metaData.creator,publisher:metaData.publisher,language:metaData.language};onBookInfoChange&&onBookInfoChange(newBookData);}).catch(function(error){throw\"\".concat(error.stack,\" \\n\\n Message : Epub parsing failed.\");});},[book]);/* eslint-enable */ /** Set viewer Styles/Options */useEffect(function(){viewerStyle&&setBookStyle(function(v){return _objectSpread(_objectSpread({},v),viewerStyle);});viewerOption&&setBookOption(function(v){return _objectSpread(_objectSpread({},v),viewerOption);});},[viewerStyle,viewerOption]);/** Apply viewer Styles/Options */useEffect(function(){if(!rendition)return;onResize();var newStyle=_objectSpread(_objectSpread({},viewerDefaultStyles),{},{body:{'padding-top':'0px !important','padding-bottom':'0px !important','font-size':\"\".concat(bookStyle.fontSize,\"px !important\"),'font-family':\"Fira code !important\"},p:{'font-size':\"\".concat(bookStyle.fontSize,\"px !important\"),'line-height':\"\".concat(bookStyle.lineHeight,\" !important\"),'font-family':\"Fira code !important\"}});rendition.flow(bookOption.flow);rendition.spread(bookOption.spread);if(bookStyle.fontFamily!=='Origin'){Object.assign(newStyle.body,{'font-family':\"Fira code !important\"});}if(bookOption.flow==='scrolled-doc'){// Scroll type\nObject.assign(newStyle.body,{margin:'auto !important'});}else if(bookOption.spread==='auto'){// View 2 pages\nObject.assign(newStyle.body,{});}else{// View 1 page\nObject.assign(newStyle.body,{});}rendition.themes.register('default',newStyle);rendition.themes.select('default');},[rendition,bookStyle.fontFamily,bookStyle.fontSize,bookStyle.lineHeight,viewerStyleURL,bookOption,onResize]);/** Emit screen resizing event */useEffect(function(){window.addEventListener('resize',onResize);return function(){return window.removeEventListener('resize',onResize);};},[onResize]);/** Emit selection event */useEffect(function(){if(!rendition)return;rendition.on('mouseup',onSelected);return function(){return rendition.off('mouseup',onSelected);};},[rendition,onSelected]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(EpubViewer,{url:url,style:layoutStyle,bookChanged:bookChanged,rendtionChanged:rendtionChanged,tocChanged:onTocChange,pageChanged:onPageChange,selectionChanged:selectionChanged,loadingView:loadingView||/*#__PURE__*/_jsx(LoadingView,{}),ref:ref})});};export default/*#__PURE__*/React.forwardRef(ReactViewer);","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","EpubViewer","LoadingView","debounce","timeFormatter","viewerDefaultStyles","ReactViewer","ref","url","viewerLayout","viewerStyle","viewerStyleURL","viewerOption","onBookInfoChange","onPageChange","onTocChange","onSelection","loadingView","book","setBook","rendition","setRendition","layoutStyle","setLayoutStyle","fontFamily","fontSize","lineHeight","marginHorizontal","marginVertical","bookStyle","setBookStyle","flow","resizeOnOrientationChange","spread","bookOption","setBookOption","currentSelection","cfiRange","contents","bookChanged","rendtionChanged","selectionChanged","current","onResize","viewerLayout_","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","VIEWER_FOOTER_HEIGHT","VIEWER_SIDEMENU_WIDTH","window","win_w","innerWidth","win_h","innerHeight","componentHeight","w","h","layout","width","height","marginTop","marginBottom","resize","onSelected","iframe","querySelector","iframeWin","contentWindow","selection_","getSelection","selectionText","toString","Promise","resolve","setTimeout","Error","all","loaded","metadata","opened","then","metaData","bookData","newBookData","coverURL","archive","urlCache","cover","title","description","published_date","Date","pubdate","modified_date","author","creator","publisher","language","catch","error","stack","v","newStyle","body","p","Object","assign","margin","themes","register","select","addEventListener","removeEventListener","on","off","forwardRef"],"sources":["/home/parallels/Downloads/read/src/react-viewer/modules/reactViewer/ReactViewer.tsx"],"sourcesContent":["import React, {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo,\n} from 'react';\nimport { Book, Rendition, Contents } from 'epubjs';\n// modules\nimport EpubViewer from '../../modules/epubViewer/EpubViewer';\n// components\nimport LoadingView from 'LoadingView';\n// utils\nimport { debounce, timeFormatter } from 'lib/utils/commonUtil';\n// styles\nimport viewerDefaultStyles from '../../modules/reactViewer/viewerStyle';\n// types\nimport { ReactViewerProps, ViewerRef } from 'types';\nimport BookType, { BookStyle, BookOption } from 'types/book';\n\n/**\n * Epub React Viewer Module\n * @class\n * @param props\n * @param props.url Epub file path\n * @param props.viewerLayout Viewer layout\n * @param props.viewerStyle Viewer style\n * @param props.viewerStyleURL Viwer style - CSS URL\n * @param props.viewerOption Viewer option\n * @param props.onBookInfoChange Run when book information changed\n * @param props.onPageChange Run when page changed\n * @param props.onTocChange Run when toc changed\n * @param props.onSelection Run when selected\n * @param props.loadingView Loading component\n * @param ref Viewer ref\n */\nconst ReactViewer = (\n  {\n    url,\n    viewerLayout,\n    viewerStyle,\n    viewerStyleURL,\n    viewerOption,\n    onBookInfoChange,\n    onPageChange,\n    onTocChange,\n    onSelection,\n    loadingView,\n  }: ReactViewerProps,\n  ref: React.RefObject<ViewerRef> | any,\n) => {\n  // TODO Fix the ref type correctly instead 'any' type.\n  const [book, setBook] = useState<Book | null>(null);\n\n  const [rendition, setRendition] = useState<Rendition | null>(null);\n\n  const [layoutStyle, setLayoutStyle] = useState<{ [key: string]: any }>({});\n\n  const [bookStyle, setBookStyle] = useState<BookStyle>({\n    fontFamily: 'Origin',\n    fontSize: 16,\n    lineHeight: 1.4,\n    marginHorizontal: 0,\n    marginVertical: 0,\n  });\n\n  const [bookOption, setBookOption] = useState<BookOption>({\n    flow: 'paginated',\n    resizeOnOrientationChange: true,\n    spread: 'auto',\n  });\n\n  const currentSelection = useRef<{\n    cfiRange: string;\n    contents: Contents | null;\n  }>({\n    cfiRange: '',\n    contents: null,\n  });\n\n  /**\n   * Run book changed\n   * @method\n   * @param book Epub Book\n   */\n  const bookChanged = (book: Book) => setBook(book);\n\n  /**\n   * Run rendition changed\n   * @method\n   * @param rendition Epub Rendition\n   */\n  const rendtionChanged = (rendition: Rendition) => setRendition(rendition);\n\n  /**\n   * Run selection changed [Debounce]\n   * @method\n   * @param cfiRange CFIRange\n   * @param contents Selection Epub Contents\n   */\n  const selectionChanged = (cfiRange: string, contents: Contents) => {\n    currentSelection.current = { cfiRange, contents };\n  };\n\n  /**\n   * Viewer resizing function\n   * @method\n   */\n  const onResize = useMemo(\n    () =>\n      debounce(250, () => {\n        if (!rendition) return;\n\n        const viewerLayout_ = viewerLayout || {\n          MIN_VIEWER_WIDTH: 600,\n          MIN_VIEWER_HEIGHT: 300,\n          VIEWER_HEADER_HEIGHT: 0,\n          VIEWER_FOOTER_HEIGHT: 0,\n          VIEWER_SIDEMENU_WIDTH: 0,\n        };\n\n        const { innerWidth: win_w, innerHeight: win_h } = window;\n        const componentHeight =\n          viewerLayout_.VIEWER_HEADER_HEIGHT +\n          viewerLayout_.VIEWER_FOOTER_HEIGHT;\n        const w =\n          win_w -\n          ~~(\n            ((win_w - viewerLayout_.MIN_VIEWER_WIDTH) / 100) *\n            bookStyle.marginHorizontal\n          );\n        const h =\n          bookOption.flow === 'scrolled-doc'\n            ? win_h - componentHeight\n            : win_h -\n              componentHeight -\n              ~~(\n                ((win_h - componentHeight - viewerLayout_.MIN_VIEWER_HEIGHT) /\n                  100) *\n                bookStyle.marginVertical\n              );\n        const marginVertical =\n          bookOption.flow === 'scrolled-doc'\n            ? ''\n            : `${\n                ~~(\n                  ((win_h - componentHeight - viewerLayout_.MIN_VIEWER_HEIGHT) /\n                    100) *\n                  bookStyle.marginVertical\n                ) / 2\n              }px`;\n\n        setLayoutStyle(layout => {\n          if (\n            layout.width !== w ||\n            layout.height !== h ||\n            layout.marginTop !== marginVertical\n          ) {\n            return {\n              ...layout,\n              width: w,\n              height: h,\n              marginTop: marginVertical,\n              marginBottom: marginVertical,\n            };\n          }\n          return layout;\n        });\n\n        try {\n          rendition.resize(w, h);\n        } catch {}\n      }),\n    [\n      rendition,\n      viewerLayout,\n      bookStyle.marginHorizontal,\n      bookStyle.marginVertical,\n      bookOption.flow,\n    ],\n  );\n\n  /**\n   * Selection Event, run when run mouseup event\n   * @method <br/>\n   * - Fire after the Epubjs selected event. [about 300ms]\n   */\n  const onSelected = useCallback(async () => {\n    if (!ref.current) return;\n\n    const iframe = ref.current.querySelector('iframe');\n    if (!iframe) return;\n\n    const iframeWin = iframe.contentWindow;\n    if (!iframeWin) return;\n\n    const selection_ = iframeWin.getSelection();\n    if (!selection_) return;\n\n    const selectionText = selection_.toString();\n    if (selectionText === '') return;\n\n    const cfiRange: string = await new Promise(resolve =>\n      setTimeout(() => resolve(currentSelection.current.cfiRange), 350),\n    );\n    if (!cfiRange) return;\n\n    const contents = currentSelection.current.contents;\n    if (!contents) return;\n\n    onSelection && onSelection(cfiRange, contents);\n  }, [ref, onSelection]);\n\n  /** Ref checker */\n  useEffect(() => {\n    if (!ref) {\n      throw new Error(\n        '[React-Epub-Viewer] Put a ref argument that has a ViewerRef type.',\n      );\n    }\n  }, [ref]);\n\n  /** Epub parsing */\n  // TODO Fix the infinite re-rendering issue, when inlcude `onBookInfoChange` to dependencies array.\n  /* eslint-disable */\n  useEffect(() => {\n    if (!book) return;\n\n    Promise.all([book.loaded.metadata, book.opened])\n      .then(([metaData, bookData]: any[]) => {\n        const newBookData: BookType = {\n          coverURL: bookData.archive.urlCache[bookData.cover],\n          title: metaData.title,\n          description: metaData.description,\n          published_date: timeFormatter(new Date(metaData.pubdate)),\n          modified_date: timeFormatter(new Date(metaData.modified_date)),\n          author: metaData.creator,\n          publisher: metaData.publisher,\n          language: metaData.language,\n        };\n\n        onBookInfoChange && onBookInfoChange(newBookData);\n      })\n      .catch(error => {\n        throw `${error.stack} \\n\\n Message : Epub parsing failed.`;\n      });\n  }, [book]);\n  /* eslint-enable */\n\n  /** Set viewer Styles/Options */\n  useEffect(() => {\n    viewerStyle && setBookStyle(v => ({ ...v, ...viewerStyle }));\n    viewerOption && setBookOption(v => ({ ...v, ...viewerOption }));\n  }, [viewerStyle, viewerOption]);\n\n  /** Apply viewer Styles/Options */\n  useEffect(() => {\n    if (!rendition) return;\n\n    onResize();\n\n    const newStyle = {\n      ...viewerDefaultStyles,\n      body: {\n        'padding-top': '0px !important',\n        'padding-bottom': '0px !important',\n        'font-size': `${bookStyle.fontSize}px !important`,\n        'font-family': `Fira code !important`\n      },\n      p: {\n        'font-size': `${bookStyle.fontSize}px !important`,\n        'line-height': `${bookStyle.lineHeight} !important`,\n        'font-family': `Fira code !important`\n      },\n    };\n\n    rendition.flow(bookOption.flow);\n    rendition.spread(bookOption.spread);\n\n    if (bookStyle.fontFamily !== 'Origin') {\n      Object.assign(newStyle.body, {\n        'font-family': `Fira code !important`,\n      });\n    }\n\n    if (bookOption.flow === 'scrolled-doc') {\n      // Scroll type\n      Object.assign(newStyle.body, {\n        margin: 'auto !important',\n      });\n    } else if (bookOption.spread === 'auto') {\n      // View 2 pages\n      Object.assign(newStyle.body, {});\n    } else {\n      // View 1 page\n      Object.assign(newStyle.body, {});\n    }\n\n \n\n    rendition.themes.register('default', newStyle);\n\n    rendition.themes.select('default');\n  }, [\n    rendition,\n    bookStyle.fontFamily,\n    bookStyle.fontSize,\n    bookStyle.lineHeight,\n    viewerStyleURL,\n    bookOption,\n    onResize,\n  ]);\n\n  /** Emit screen resizing event */\n  useEffect(() => {\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, [onResize]);\n\n  /** Emit selection event */\n  useEffect(() => {\n    if (!rendition) return;\n    rendition.on('mouseup', onSelected);\n    return () => rendition.off('mouseup', onSelected);\n  }, [rendition, onSelected]);\n\n\n\n  return (\n    <>\n      <EpubViewer\n        url={url}\n        style={layoutStyle}\n        bookChanged={bookChanged}\n        rendtionChanged={rendtionChanged}\n        tocChanged={onTocChange}\n        pageChanged={onPageChange}\n        selectionChanged={selectionChanged}\n        loadingView={loadingView || <LoadingView />}\n        ref={ref}\n      />\n    </>\n  );\n};\n\nexport default React.forwardRef(ReactViewer);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}