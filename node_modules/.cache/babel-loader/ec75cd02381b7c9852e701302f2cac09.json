{"ast":null,"code":"import _classCallCheck from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { defer, isXml, parse } from \"./utils/core\";\nimport httpRequest from \"./utils/request\";\nimport mime from \"./utils/mime\";\nimport Path from \"./utils/path\";\nimport EventEmitter from \"event-emitter\";\nimport localforage from \"localforage\";\n\n/**\n * Handles saving and requesting files from local storage\n * @class\n * @param {string} name This should be the name of the application for modals\n * @param {function} [requester]\n * @param {function} [resolver]\n */\nvar Store = /*#__PURE__*/function () {\n  function Store(name, requester, resolver) {\n    _classCallCheck(this, Store);\n    this.urlCache = {};\n    this.storage = undefined;\n    this.name = name;\n    this.requester = requester || httpRequest;\n    this.resolver = resolver;\n    this.online = true;\n    this.checkRequirements();\n    this.addListeners();\n  }\n\n  /**\n   * Checks to see if localForage exists in global namspace,\n   * Requires localForage if it isn't there\n   * @private\n   */\n  _createClass(Store, [{\n    key: \"checkRequirements\",\n    value: function checkRequirements() {\n      try {\n        var store;\n        if (typeof localforage === \"undefined\") {\n          store = localforage;\n        }\n        this.storage = store.createInstance({\n          name: this.name\n        });\n      } catch (e) {\n        throw new Error(\"localForage lib not loaded\");\n      }\n    }\n\n    /**\n     * Add online and offline event listeners\n     * @private\n     */\n  }, {\n    key: \"addListeners\",\n    value: function addListeners() {\n      this._status = this.status.bind(this);\n      window.addEventListener('online', this._status);\n      window.addEventListener('offline', this._status);\n    }\n\n    /**\n     * Remove online and offline event listeners\n     * @private\n     */\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners() {\n      window.removeEventListener('online', this._status);\n      window.removeEventListener('offline', this._status);\n      this._status = undefined;\n    }\n\n    /**\n     * Update the online / offline status\n     * @private\n     */\n  }, {\n    key: \"status\",\n    value: function status(event) {\n      var online = navigator.onLine;\n      this.online = online;\n      if (online) {\n        this.emit(\"online\", this);\n      } else {\n        this.emit(\"offline\", this);\n      }\n    }\n\n    /**\n     * Add all of a book resources to the store\n     * @param  {Resources} resources  book resources\n     * @param  {boolean} [force] force resaving resources\n     * @return {Promise<object>} store objects\n     */\n  }, {\n    key: \"add\",\n    value: function add(resources, force) {\n      var _this = this;\n      var mapped = resources.resources.map(function (item) {\n        var href = item.href;\n        var url = _this.resolver(href);\n        var encodedUrl = window.encodeURIComponent(url);\n        return _this.storage.getItem(encodedUrl).then(function (item) {\n          if (!item || force) {\n            return _this.requester(url, \"binary\").then(function (data) {\n              return _this.storage.setItem(encodedUrl, data);\n            });\n          } else {\n            return item;\n          }\n        });\n      });\n      return Promise.all(mapped);\n    }\n\n    /**\n     * Put binary data from a url to storage\n     * @param  {string} url  a url to request from storage\n     * @param  {boolean} [withCredentials]\n     * @param  {object} [headers]\n     * @return {Promise<Blob>}\n     */\n  }, {\n    key: \"put\",\n    value: function put(url, withCredentials, headers) {\n      var _this2 = this;\n      var encodedUrl = window.encodeURIComponent(url);\n      return this.storage.getItem(encodedUrl).then(function (result) {\n        if (!result) {\n          return _this2.requester(url, \"binary\", withCredentials, headers).then(function (data) {\n            return _this2.storage.setItem(encodedUrl, data);\n          });\n        }\n        return result;\n      });\n    }\n\n    /**\n     * Request a url\n     * @param  {string} url  a url to request from storage\n     * @param  {string} [type] specify the type of the returned result\n     * @param  {boolean} [withCredentials]\n     * @param  {object} [headers]\n     * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n     */\n  }, {\n    key: \"request\",\n    value: function request(url, type, withCredentials, headers) {\n      var _this3 = this;\n      if (this.online) {\n        // From network\n        return this.requester(url, type, withCredentials, headers).then(function (data) {\n          // save to store if not present\n          _this3.put(url);\n          return data;\n        });\n      } else {\n        // From store\n        return this.retrieve(url, type);\n      }\n    }\n\n    /**\n     * Request a url from storage\n     * @param  {string} url  a url to request from storage\n     * @param  {string} [type] specify the type of the returned result\n     * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n     */\n  }, {\n    key: \"retrieve\",\n    value: function retrieve(url, type) {\n      var _this4 = this;\n      var deferred = new defer();\n      var response;\n      var path = new Path(url);\n\n      // If type isn't set, determine it from the file extension\n      if (!type) {\n        type = path.extension;\n      }\n      if (type == \"blob\") {\n        response = this.getBlob(url);\n      } else {\n        response = this.getText(url);\n      }\n      return response.then(function (r) {\n        var deferred = new defer();\n        var result;\n        if (r) {\n          result = _this4.handleResponse(r, type);\n          deferred.resolve(result);\n        } else {\n          deferred.reject({\n            message: \"File not found in storage: \" + url,\n            stack: new Error().stack\n          });\n        }\n        return deferred.promise;\n      });\n    }\n\n    /**\n     * Handle the response from request\n     * @private\n     * @param  {any} response\n     * @param  {string} [type]\n     * @return {any} the parsed result\n     */\n  }, {\n    key: \"handleResponse\",\n    value: function handleResponse(response, type) {\n      var r;\n      if (type == \"json\") {\n        r = JSON.parse(response);\n      } else if (isXml(type)) {\n        r = parse(response, \"text/xml\");\n      } else if (type == \"xhtml\") {\n        r = parse(response, \"application/xhtml+xml\");\n      } else if (type == \"html\" || type == \"htm\") {\n        r = parse(response, \"text/html\");\n      } else {\n        r = response;\n      }\n      return r;\n    }\n\n    /**\n     * Get a Blob from Storage by Url\n     * @param  {string} url\n     * @param  {string} [mimeType]\n     * @return {Blob}\n     */\n  }, {\n    key: \"getBlob\",\n    value: function getBlob(url, mimeType) {\n      var encodedUrl = window.encodeURIComponent(url);\n      return this.storage.getItem(encodedUrl).then(function (uint8array) {\n        if (!uint8array) return;\n        mimeType = mimeType || mime.lookup(url);\n        return new Blob([uint8array], {\n          type: mimeType\n        });\n      });\n    }\n\n    /**\n     * Get Text from Storage by Url\n     * @param  {string} url\n     * @param  {string} [mimeType]\n     * @return {string}\n     */\n  }, {\n    key: \"getText\",\n    value: function getText(url, mimeType) {\n      var encodedUrl = window.encodeURIComponent(url);\n      mimeType = mimeType || mime.lookup(url);\n      return this.storage.getItem(encodedUrl).then(function (uint8array) {\n        var deferred = new defer();\n        var reader = new FileReader();\n        var blob;\n        if (!uint8array) return;\n        blob = new Blob([uint8array], {\n          type: mimeType\n        });\n        reader.addEventListener(\"loadend\", function () {\n          deferred.resolve(reader.result);\n        });\n        reader.readAsText(blob, mimeType);\n        return deferred.promise;\n      });\n    }\n\n    /**\n     * Get a base64 encoded result from Storage by Url\n     * @param  {string} url\n     * @param  {string} [mimeType]\n     * @return {string} base64 encoded\n     */\n  }, {\n    key: \"getBase64\",\n    value: function getBase64(url, mimeType) {\n      var encodedUrl = window.encodeURIComponent(url);\n      mimeType = mimeType || mime.lookup(url);\n      return this.storage.getItem(encodedUrl).then(function (uint8array) {\n        var deferred = new defer();\n        var reader = new FileReader();\n        var blob;\n        if (!uint8array) return;\n        blob = new Blob([uint8array], {\n          type: mimeType\n        });\n        reader.addEventListener(\"loadend\", function () {\n          deferred.resolve(reader.result);\n        });\n        reader.readAsDataURL(blob, mimeType);\n        return deferred.promise;\n      });\n    }\n\n    /**\n     * Create a Url from a stored item\n     * @param  {string} url\n     * @param  {object} [options.base64] use base64 encoding or blob url\n     * @return {Promise} url promise with Url string\n     */\n  }, {\n    key: \"createUrl\",\n    value: function createUrl(url, options) {\n      var deferred = new defer();\n      var _URL = window.URL || window.webkitURL || window.mozURL;\n      var tempUrl;\n      var response;\n      var useBase64 = options && options.base64;\n      if (url in this.urlCache) {\n        deferred.resolve(this.urlCache[url]);\n        return deferred.promise;\n      }\n      if (useBase64) {\n        response = this.getBase64(url);\n        if (response) {\n          response.then(function (tempUrl) {\n            this.urlCache[url] = tempUrl;\n            deferred.resolve(tempUrl);\n          }.bind(this));\n        }\n      } else {\n        response = this.getBlob(url);\n        if (response) {\n          response.then(function (blob) {\n            tempUrl = _URL.createObjectURL(blob);\n            this.urlCache[url] = tempUrl;\n            deferred.resolve(tempUrl);\n          }.bind(this));\n        }\n      }\n      if (!response) {\n        deferred.reject({\n          message: \"File not found in storage: \" + url,\n          stack: new Error().stack\n        });\n      }\n      return deferred.promise;\n    }\n\n    /**\n     * Revoke Temp Url for a archive item\n     * @param  {string} url url of the item in the store\n     */\n  }, {\n    key: \"revokeUrl\",\n    value: function revokeUrl(url) {\n      var _URL = window.URL || window.webkitURL || window.mozURL;\n      var fromCache = this.urlCache[url];\n      if (fromCache) _URL.revokeObjectURL(fromCache);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _URL = window.URL || window.webkitURL || window.mozURL;\n      for (var fromCache in this.urlCache) {\n        _URL.revokeObjectURL(fromCache);\n      }\n      this.urlCache = {};\n      this.removeListeners();\n    }\n  }]);\n  return Store;\n}();\nEventEmitter(Store.prototype);\nexport default Store;","map":{"version":3,"names":["defer","isXml","parse","httpRequest","mime","Path","EventEmitter","localforage","Store","name","requester","resolver","urlCache","storage","undefined","online","checkRequirements","addListeners","store","createInstance","e","Error","_status","status","bind","window","addEventListener","removeEventListener","event","navigator","onLine","emit","resources","force","mapped","map","item","href","url","encodedUrl","encodeURIComponent","getItem","then","data","setItem","Promise","all","withCredentials","headers","result","type","put","retrieve","deferred","response","path","extension","getBlob","getText","r","handleResponse","resolve","reject","message","stack","promise","JSON","mimeType","uint8array","lookup","Blob","reader","FileReader","blob","readAsText","readAsDataURL","options","_URL","URL","webkitURL","mozURL","tempUrl","useBase64","base64","getBase64","createObjectURL","fromCache","revokeObjectURL","removeListeners","prototype"],"sources":["/home/parallels/Downloads/read/node_modules/epubjs/src/store.js"],"sourcesContent":["import {defer, isXml, parse} from \"./utils/core\";\nimport httpRequest from \"./utils/request\";\nimport mime from \"./utils/mime\";\nimport Path from \"./utils/path\";\nimport EventEmitter from \"event-emitter\";\nimport localforage from \"localforage\";\n\n/**\n * Handles saving and requesting files from local storage\n * @class\n * @param {string} name This should be the name of the application for modals\n * @param {function} [requester]\n * @param {function} [resolver]\n */\nclass Store {\n\n\tconstructor(name, requester, resolver) {\n\t\tthis.urlCache = {};\n\n\t\tthis.storage = undefined;\n\n\t\tthis.name = name;\n\t\tthis.requester = requester || httpRequest;\n\t\tthis.resolver = resolver;\n\n\t\tthis.online = true;\n\n\t\tthis.checkRequirements();\n\n\t\tthis.addListeners();\n\t}\n\n\t/**\n\t * Checks to see if localForage exists in global namspace,\n\t * Requires localForage if it isn't there\n\t * @private\n\t */\n\tcheckRequirements(){\n\t\ttry {\n\t\t\tlet store;\n\t\t\tif (typeof localforage === \"undefined\") {\n\t\t\t\tstore = localforage;\n\t\t\t}\n\t\t\tthis.storage = store.createInstance({\n\t\t\t\t\tname: this.name\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"localForage lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Add online and offline event listeners\n\t * @private\n\t */\n\taddListeners() {\n\t\tthis._status = this.status.bind(this);\n\t\twindow.addEventListener('online',  this._status);\n\t  window.addEventListener('offline', this._status);\n\t}\n\n\t/**\n\t * Remove online and offline event listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\t\twindow.removeEventListener('online',  this._status);\n\t  window.removeEventListener('offline', this._status);\n\t\tthis._status = undefined;\n\t}\n\n\t/**\n\t * Update the online / offline status\n\t * @private\n\t */\n\tstatus(event) {\n\t\tlet online = navigator.onLine;\n\t\tthis.online = online;\n\t\tif (online) {\n\t\t\tthis.emit(\"online\", this);\n\t\t} else {\n\t\t\tthis.emit(\"offline\", this);\n\t\t}\n\t}\n\n\t/**\n\t * Add all of a book resources to the store\n\t * @param  {Resources} resources  book resources\n\t * @param  {boolean} [force] force resaving resources\n\t * @return {Promise<object>} store objects\n\t */\n\tadd(resources, force) {\n\t\tlet mapped = resources.resources.map((item) => {\n\t\t\tlet { href } = item;\n\t\t\tlet url = this.resolver(href);\n\t\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\t\treturn this.storage.getItem(encodedUrl).then((item) => {\n\t\t\t\tif (!item || force) {\n\t\t\t\t\treturn this.requester(url, \"binary\")\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\treturn this.storage.setItem(encodedUrl, data);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t\treturn Promise.all(mapped);\n\t}\n\n\t/**\n\t * Put binary data from a url to storage\n\t * @param  {string} url  a url to request from storage\n\t * @param  {boolean} [withCredentials]\n\t * @param  {object} [headers]\n\t * @return {Promise<Blob>}\n\t */\n\tput(url, withCredentials, headers) {\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then((result) => {\n\t\t\tif (!result) {\n\t\t\t\treturn this.requester(url, \"binary\", withCredentials, headers).then((data) => {\n\t\t\t\t\treturn this.storage.setItem(encodedUrl, data);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t/**\n\t * Request a url\n\t * @param  {string} url  a url to request from storage\n\t * @param  {string} [type] specify the type of the returned result\n\t * @param  {boolean} [withCredentials]\n\t * @param  {object} [headers]\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\trequest(url, type, withCredentials, headers){\n\t\tif (this.online) {\n\t\t\t// From network\n\t\t\treturn this.requester(url, type, withCredentials, headers).then((data) => {\n\t\t\t\t// save to store if not present\n\t\t\t\tthis.put(url);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t} else {\n\t\t\t// From store\n\t\t\treturn this.retrieve(url, type);\n\t\t}\n\n\t}\n\n\t/**\n\t * Request a url from storage\n\t * @param  {string} url  a url to request from storage\n\t * @param  {string} [type] specify the type of the returned result\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\tretrieve(url, type) {\n\t\tvar deferred = new defer();\n\t\tvar response;\n\t\tvar path = new Path(url);\n\n\t\t// If type isn't set, determine it from the file extension\n\t\tif(!type) {\n\t\t\ttype = path.extension;\n\t\t}\n\n\t\tif(type == \"blob\"){\n\t\t\tresponse = this.getBlob(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\n\t\treturn response.then((r) => {\n\t\t\tvar deferred = new defer();\n\t\t\tvar result;\n\t\t\tif (r) {\n\t\t\t\tresult = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t} else {\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tmessage : \"File not found in storage: \" + url,\n\t\t\t\t\tstack : new Error().stack\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @private\n\t * @param  {any} response\n\t * @param  {string} [type]\n\t * @return {any} the parsed result\n\t */\n\thandleResponse(response, type){\n\t\tvar r;\n\n\t\tif(type == \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t}\n\t\telse\n\t\tif(isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t } else {\n\t\t\t r = response;\n\t\t }\n\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {Blob}\n\t */\n\tgetBlob(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then(function(uint8array) {\n\t\t\tif(!uint8array) return;\n\n\t\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\t\treturn new Blob([uint8array], {type : mimeType});\n\t\t});\n\n\t}\n\n\t/**\n\t * Get Text from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string}\n\t */\n\tgetText(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then(function(uint8array) {\n\t\t\tvar deferred = new defer();\n\t\t\tvar reader = new FileReader();\n\t\t\tvar blob;\n\n\t\t\tif(!uint8array) return;\n\n\t\t\tblob = new Blob([uint8array], {type : mimeType});\n\n\t\t\treader.addEventListener(\"loadend\", () => {\n\t\t\t\tdeferred.resolve(reader.result);\n\t\t\t});\n\n\t\t\treader.readAsText(blob, mimeType);\n\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string} base64 encoded\n\t */\n\tgetBase64(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then((uint8array) => {\n\t\t\tvar deferred = new defer();\n\t\t\tvar reader = new FileReader();\n\t\t\tvar blob;\n\n\t\t\tif(!uint8array) return;\n\n\t\t\tblob = new Blob([uint8array], {type : mimeType});\n\n\t\t\treader.addEventListener(\"loadend\", () => {\n\t\t\t\tdeferred.resolve(reader.result);\n\t\t\t});\n\t\t\treader.readAsDataURL(blob, mimeType);\n\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Create a Url from a stored item\n\t * @param  {string} url\n\t * @param  {object} [options.base64] use base64 encoding or blob url\n\t * @return {Promise} url promise with Url string\n\t */\n\tcreateUrl(url, options){\n\t\tvar deferred = new defer();\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar tempUrl;\n\t\tvar response;\n\t\tvar useBase64 = options && options.base64;\n\n\t\tif(url in this.urlCache) {\n\t\t\tdeferred.resolve(this.urlCache[url]);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tif (useBase64) {\n\t\t\tresponse = this.getBase64(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(tempUrl) {\n\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tresponse = this.getBlob(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(blob) {\n\n\t\t\t\t\ttempUrl = _URL.createObjectURL(blob);\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\t\t}\n\n\n\t\tif (!response) {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in storage: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Revoke Temp Url for a archive item\n\t * @param  {string} url url of the item in the store\n\t */\n\trevokeUrl(url){\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar fromCache = this.urlCache[url];\n\t\tif(fromCache) _URL.revokeObjectURL(fromCache);\n\t}\n\n\tdestroy() {\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tfor (let fromCache in this.urlCache) {\n\t\t\t_URL.revokeObjectURL(fromCache);\n\t\t}\n\t\tthis.urlCache = {};\n\t\tthis.removeListeners();\n\t}\n}\n\nEventEmitter(Store.prototype);\n\nexport default Store;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}