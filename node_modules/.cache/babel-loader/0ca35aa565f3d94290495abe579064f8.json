{"ast":null,"code":"import { uuid, isNumber, isElement, windowBounds, extend } from \"../../utils/core\";\nimport throttle from 'lodash/throttle';\nclass Stage {\n  constructor(_options) {\n    this.settings = _options || {};\n    this.id = \"epubjs-container-\" + uuid();\n    this.container = this.create(this.settings);\n    if (this.settings.hidden) {\n      this.wrapper = this.wrap(this.container);\n    }\n  }\n\n  /*\n  * Creates an element to render to.\n  * Resizes to passed width and height or to the elements size\n  */\n  create(options) {\n    let height = options.height; // !== false ? options.height : \"100%\";\n    let width = options.width; // !== false ? options.width : \"100%\";\n    let overflow = options.overflow || false;\n    let axis = options.axis || \"vertical\";\n    let direction = options.direction;\n    extend(this.settings, options);\n    if (options.height && isNumber(options.height)) {\n      height = options.height + \"px\";\n    }\n    if (options.width && isNumber(options.width)) {\n      width = options.width + \"px\";\n    }\n\n    // Create new container element\n    let container = document.createElement(\"div\");\n    container.id = this.id;\n    container.classList.add(\"epub-container\");\n\n    // Style Element\n    // container.style.fontSize = \"0\";\n    container.style.wordSpacing = \"0\";\n    container.style.lineHeight = \"0\";\n    container.style.verticalAlign = \"top\";\n    container.style.position = \"relative\";\n    if (axis === \"horizontal\") {\n      // container.style.whiteSpace = \"nowrap\";\n      container.style.display = \"flex\";\n      container.style.flexDirection = \"row\";\n      container.style.flexWrap = \"nowrap\";\n    }\n    if (width) {\n      container.style.width = width;\n    }\n    if (height) {\n      container.style.height = height;\n    }\n    if (overflow) {\n      if (overflow === \"scroll\" && axis === \"vertical\") {\n        container.style[\"overflow-y\"] = overflow;\n        container.style[\"overflow-x\"] = \"hidden\";\n      } else if (overflow === \"scroll\" && axis === \"horizontal\") {\n        container.style[\"overflow-y\"] = \"hidden\";\n        container.style[\"overflow-x\"] = overflow;\n      } else {\n        container.style[\"overflow\"] = overflow;\n      }\n    }\n    if (direction) {\n      container.dir = direction;\n      container.style[\"direction\"] = direction;\n    }\n    if (direction && this.settings.fullsize) {\n      document.body.style[\"direction\"] = direction;\n    }\n    return container;\n  }\n  wrap(container) {\n    var wrapper = document.createElement(\"div\");\n    wrapper.style.visibility = \"hidden\";\n    wrapper.style.overflow = \"hidden\";\n    wrapper.style.width = \"0\";\n    wrapper.style.height = \"0\";\n    wrapper.appendChild(container);\n    return wrapper;\n  }\n  getElement(_element) {\n    var element;\n    if (isElement(_element)) {\n      element = _element;\n    } else if (typeof _element === \"string\") {\n      element = document.getElementById(_element);\n    }\n    if (!element) {\n      throw new Error(\"Not an Element\");\n    }\n    return element;\n  }\n  attachTo(what) {\n    var element = this.getElement(what);\n    var base;\n    if (!element) {\n      return;\n    }\n    if (this.settings.hidden) {\n      base = this.wrapper;\n    } else {\n      base = this.container;\n    }\n    element.appendChild(base);\n    this.element = element;\n    return element;\n  }\n  getContainer() {\n    return this.container;\n  }\n  onResize(func) {\n    // Only listen to window for resize event if width and height are not fixed.\n    // This applies if it is set to a percent or auto.\n    if (!isNumber(this.settings.width) || !isNumber(this.settings.height)) {\n      this.resizeFunc = throttle(func, 50);\n      window.addEventListener(\"resize\", this.resizeFunc, false);\n    }\n  }\n  onOrientationChange(func) {\n    this.orientationChangeFunc = func;\n    window.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n  }\n  size(width, height) {\n    var bounds;\n    let _width = width || this.settings.width;\n    let _height = height || this.settings.height;\n\n    // If width or height are set to false, inherit them from containing element\n    if (width === null) {\n      bounds = this.element.getBoundingClientRect();\n      if (bounds.width) {\n        width = Math.floor(bounds.width);\n        this.container.style.width = width + \"px\";\n      }\n    } else {\n      if (isNumber(width)) {\n        this.container.style.width = width + \"px\";\n      } else {\n        this.container.style.width = width;\n      }\n    }\n    if (height === null) {\n      bounds = bounds || this.element.getBoundingClientRect();\n      if (bounds.height) {\n        height = bounds.height;\n        this.container.style.height = height + \"px\";\n      }\n    } else {\n      if (isNumber(height)) {\n        this.container.style.height = height + \"px\";\n      } else {\n        this.container.style.height = height;\n      }\n    }\n    if (!isNumber(width)) {\n      width = this.container.clientWidth;\n    }\n    if (!isNumber(height)) {\n      height = this.container.clientHeight;\n    }\n    this.containerStyles = window.getComputedStyle(this.container);\n    this.containerPadding = {\n      left: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n      right: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n      top: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n      bottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n    };\n\n    // Bounds not set, get them from window\n    let _windowBounds = windowBounds();\n    let bodyStyles = window.getComputedStyle(document.body);\n    let bodyPadding = {\n      left: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n      right: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n      top: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n      bottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n    };\n    if (!_width) {\n      width = _windowBounds.width - bodyPadding.left - bodyPadding.right;\n    }\n    if (this.settings.fullsize && !_height || !_height) {\n      height = _windowBounds.height - bodyPadding.top - bodyPadding.bottom;\n    }\n    return {\n      width: width - this.containerPadding.left - this.containerPadding.right,\n      height: height - this.containerPadding.top - this.containerPadding.bottom\n    };\n  }\n  bounds() {\n    let box;\n    if (this.container.style.overflow !== \"visible\") {\n      box = this.container && this.container.getBoundingClientRect();\n    }\n    if (!box || !box.width || !box.height) {\n      return windowBounds();\n    } else {\n      return box;\n    }\n  }\n  getSheet() {\n    var style = document.createElement(\"style\");\n\n    // WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n    style.appendChild(document.createTextNode(\"\"));\n    document.head.appendChild(style);\n    return style.sheet;\n  }\n  addStyleRules(selector, rulesArray) {\n    var scope = \"#\" + this.id + \" \";\n    var rules = \"\";\n    if (!this.sheet) {\n      this.sheet = this.getSheet();\n    }\n    rulesArray.forEach(function (set) {\n      for (var prop in set) {\n        if (set.hasOwnProperty(prop)) {\n          rules += prop + \":\" + set[prop] + \";\";\n        }\n      }\n    });\n    this.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n  }\n  axis(axis) {\n    if (axis === \"horizontal\") {\n      this.container.style.display = \"flex\";\n      this.container.style.flexDirection = \"row\";\n      this.container.style.flexWrap = \"nowrap\";\n    } else {\n      this.container.style.display = \"block\";\n    }\n    this.settings.axis = axis;\n  }\n\n  // orientation(orientation) {\n  // \tif (orientation === \"landscape\") {\n  //\n  // \t} else {\n  //\n  // \t}\n  //\n  // \tthis.orientation = orientation;\n  // }\n\n  direction(dir) {\n    if (this.container) {\n      this.container.dir = dir;\n      this.container.style[\"direction\"] = dir;\n    }\n    if (this.settings.fullsize) {\n      document.body.style[\"direction\"] = dir;\n    }\n    this.settings.dir = dir;\n  }\n  overflow(overflow) {\n    if (this.container) {\n      if (overflow === \"scroll\" && this.settings.axis === \"vertical\") {\n        this.container.style[\"overflow-y\"] = overflow;\n        this.container.style[\"overflow-x\"] = \"hidden\";\n      } else if (overflow === \"scroll\" && this.settings.axis === \"horizontal\") {\n        this.container.style[\"overflow-y\"] = \"hidden\";\n        this.container.style[\"overflow-x\"] = overflow;\n      } else {\n        this.container.style[\"overflow\"] = overflow;\n      }\n    }\n    this.settings.overflow = overflow;\n  }\n  destroy() {\n    var base;\n    if (this.element) {\n      if (this.settings.hidden) {\n        base = this.wrapper;\n      } else {\n        base = this.container;\n      }\n      if (this.element.contains(this.container)) {\n        this.element.removeChild(this.container);\n      }\n      window.removeEventListener(\"resize\", this.resizeFunc);\n      window.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n    }\n  }\n}\nexport default Stage;","map":{"version":3,"names":["uuid","isNumber","isElement","windowBounds","extend","throttle","Stage","constructor","_options","settings","id","container","create","hidden","wrapper","wrap","options","height","width","overflow","axis","direction","document","createElement","classList","add","style","wordSpacing","lineHeight","verticalAlign","position","display","flexDirection","flexWrap","dir","fullsize","body","visibility","appendChild","getElement","_element","element","getElementById","Error","attachTo","what","base","getContainer","onResize","func","resizeFunc","window","addEventListener","onOrientationChange","orientationChangeFunc","size","bounds","_width","_height","getBoundingClientRect","Math","floor","clientWidth","clientHeight","containerStyles","getComputedStyle","containerPadding","left","parseFloat","right","top","bottom","_windowBounds","bodyStyles","bodyPadding","box","getSheet","createTextNode","head","sheet","addStyleRules","selector","rulesArray","scope","rules","forEach","set","prop","hasOwnProperty","insertRule","destroy","contains","removeChild","removeEventListener"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/node_modules/epubjs/src/managers/helpers/stage.js"],"sourcesContent":["import {uuid, isNumber, isElement, windowBounds, extend} from \"../../utils/core\";\nimport throttle from 'lodash/throttle'\n\nclass Stage {\n\tconstructor(_options) {\n\t\tthis.settings = _options || {};\n\t\tthis.id = \"epubjs-container-\" + uuid();\n\n\t\tthis.container = this.create(this.settings);\n\n\t\tif(this.settings.hidden) {\n\t\t\tthis.wrapper = this.wrap(this.container);\n\t\t}\n\n\t}\n\n\t/*\n\t* Creates an element to render to.\n\t* Resizes to passed width and height or to the elements size\n\t*/\n\tcreate(options){\n\t\tlet height  = options.height;// !== false ? options.height : \"100%\";\n\t\tlet width   = options.width;// !== false ? options.width : \"100%\";\n\t\tlet overflow  = options.overflow || false;\n\t\tlet axis = options.axis || \"vertical\";\n\t\tlet direction = options.direction;\n\n\t\textend(this.settings, options);\n\n\t\tif(options.height && isNumber(options.height)) {\n\t\t\theight = options.height + \"px\";\n\t\t}\n\n\t\tif(options.width && isNumber(options.width)) {\n\t\t\twidth = options.width + \"px\";\n\t\t}\n\n\t\t// Create new container element\n\t\tlet container = document.createElement(\"div\");\n\n\t\tcontainer.id = this.id;\n\t\tcontainer.classList.add(\"epub-container\");\n\n\t\t// Style Element\n\t\t// container.style.fontSize = \"0\";\n\t\tcontainer.style.wordSpacing = \"0\";\n\t\tcontainer.style.lineHeight = \"0\";\n\t\tcontainer.style.verticalAlign = \"top\";\n\t\tcontainer.style.position = \"relative\";\n\n\t\tif(axis === \"horizontal\") {\n\t\t\t// container.style.whiteSpace = \"nowrap\";\n\t\t\tcontainer.style.display = \"flex\";\n\t\t\tcontainer.style.flexDirection = \"row\";\n\t\t\tcontainer.style.flexWrap = \"nowrap\";\n\t\t}\n\n\t\tif(width){\n\t\t\tcontainer.style.width = width;\n\t\t}\n\n\t\tif(height){\n\t\t\tcontainer.style.height = height;\n\t\t}\n\n\t\tif (overflow) {\n\t\t\tif (overflow === \"scroll\" && axis === \"vertical\") {\n\t\t\t\tcontainer.style[\"overflow-y\"] = overflow;\n\t\t\t\tcontainer.style[\"overflow-x\"] = \"hidden\";\n\t\t\t} else if (overflow === \"scroll\" && axis === \"horizontal\") {\n\t\t\t\tcontainer.style[\"overflow-y\"] = \"hidden\";\n\t\t\t\tcontainer.style[\"overflow-x\"] = overflow;\n\t\t\t} else {\n\t\t\t\tcontainer.style[\"overflow\"] = overflow;\n\t\t\t}\n\t\t}\n\n\t\tif (direction) {\n\t\t\tcontainer.dir = direction;\n\t\t\tcontainer.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (direction && this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = direction;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\twrap(container) {\n\t\tvar wrapper = document.createElement(\"div\");\n\n\t\twrapper.style.visibility = \"hidden\";\n\t\twrapper.style.overflow = \"hidden\";\n\t\twrapper.style.width = \"0\";\n\t\twrapper.style.height = \"0\";\n\n\t\twrapper.appendChild(container);\n\t\treturn wrapper;\n\t}\n\n\n\tgetElement(_element){\n\t\tvar element;\n\n\t\tif(isElement(_element)) {\n\t\t\telement = _element;\n\t\t} else if (typeof _element === \"string\") {\n\t\t\telement = document.getElementById(_element);\n\t\t}\n\n\t\tif(!element){\n\t\t\tthrow new Error(\"Not an Element\");\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tattachTo(what){\n\n\t\tvar element = this.getElement(what);\n\t\tvar base;\n\n\t\tif(!element){\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.settings.hidden) {\n\t\t\tbase = this.wrapper;\n\t\t} else {\n\t\t\tbase = this.container;\n\t\t}\n\n\t\telement.appendChild(base);\n\n\t\tthis.element = element;\n\n\t\treturn element;\n\n\t}\n\n\tgetContainer() {\n\t\treturn this.container;\n\t}\n\n\tonResize(func){\n\t\t// Only listen to window for resize event if width and height are not fixed.\n\t\t// This applies if it is set to a percent or auto.\n\t\tif(!isNumber(this.settings.width) ||\n\t\t\t !isNumber(this.settings.height) ) {\n\t\t\tthis.resizeFunc = throttle(func, 50);\n\t\t\twindow.addEventListener(\"resize\", this.resizeFunc, false);\n\t\t}\n\n\t}\n\n\tonOrientationChange(func){\n\t\tthis.orientationChangeFunc = func;\n\t\twindow.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n\t}\n\n\tsize(width, height){\n\t\tvar bounds;\n\t\tlet _width = width || this.settings.width;\n\t\tlet _height = height || this.settings.height;\n\n\t\t// If width or height are set to false, inherit them from containing element\n\t\tif(width === null) {\n\t\t\tbounds = this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.width) {\n\t\t\t\twidth = Math.floor(bounds.width);\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (isNumber(width)) {\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.width = width;\n\t\t\t}\n\t\t}\n\n\t\tif(height === null) {\n\t\t\tbounds = bounds || this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.height) {\n\t\t\t\theight = bounds.height;\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (isNumber(height)) {\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.height = height;\n\t\t\t}\n\t\t}\n\n\t\tif(!isNumber(width)) {\n\t\t\twidth = this.container.clientWidth;\n\t\t}\n\n\t\tif(!isNumber(height)) {\n\t\t\theight = this.container.clientHeight;\n\t\t}\n\n\t\tthis.containerStyles = window.getComputedStyle(this.container);\n\n\t\tthis.containerPadding = {\n\t\t\tleft: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\t// Bounds not set, get them from window\n\t\tlet _windowBounds = windowBounds();\n\t\tlet bodyStyles = window.getComputedStyle(document.body);\n\t\tlet bodyPadding = {\n\t\t\tleft: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\tif (!_width) {\n\t\t\twidth = _windowBounds.width -\n\t\t\t\t\t\t\t\tbodyPadding.left -\n\t\t\t\t\t\t\t\tbodyPadding.right;\n\t\t}\n\n\t\tif ((this.settings.fullsize && !_height) || !_height) {\n\t\t\theight = _windowBounds.height -\n\t\t\t\t\t\t\t\tbodyPadding.top -\n\t\t\t\t\t\t\t\tbodyPadding.bottom;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width -\n\t\t\t\t\t\t\tthis.containerPadding.left -\n\t\t\t\t\t\t\tthis.containerPadding.right,\n\t\t\theight: height -\n\t\t\t\t\t\t\tthis.containerPadding.top -\n\t\t\t\t\t\t\tthis.containerPadding.bottom\n\t\t};\n\n\t}\n\n\tbounds(){\n\t\tlet box;\n\t\tif (this.container.style.overflow !== \"visible\") {\n\t\t\tbox = this.container && this.container.getBoundingClientRect();\n\t\t}\n\n\t\tif(!box || !box.width || !box.height) {\n\t\t\treturn windowBounds();\n\t\t} else {\n\t\t\treturn box;\n\t\t}\n\n\t}\n\n\tgetSheet(){\n\t\tvar style = document.createElement(\"style\");\n\n\t\t// WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n\t\tstyle.appendChild(document.createTextNode(\"\"));\n\n\t\tdocument.head.appendChild(style);\n\n\t\treturn style.sheet;\n\t}\n\n\taddStyleRules(selector, rulesArray){\n\t\tvar scope = \"#\" + this.id + \" \";\n\t\tvar rules = \"\";\n\n\t\tif(!this.sheet){\n\t\t\tthis.sheet = this.getSheet();\n\t\t}\n\n\t\trulesArray.forEach(function(set) {\n\t\t\tfor (var prop in set) {\n\t\t\t\tif(set.hasOwnProperty(prop)) {\n\t\t\t\t\trules += prop + \":\" + set[prop] + \";\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n\t}\n\n\taxis(axis) {\n\t\tif(axis === \"horizontal\") {\n\t\t\tthis.container.style.display = \"flex\";\n\t\t\tthis.container.style.flexDirection = \"row\";\n\t\t\tthis.container.style.flexWrap = \"nowrap\";\n\t\t} else {\n\t\t\tthis.container.style.display = \"block\";\n\t\t}\n\t\tthis.settings.axis = axis;\n\t}\n\n\t// orientation(orientation) {\n\t// \tif (orientation === \"landscape\") {\n\t//\n\t// \t} else {\n\t//\n\t// \t}\n\t//\n\t// \tthis.orientation = orientation;\n\t// }\n\n\tdirection(dir) {\n\t\tif (this.container) {\n\t\t\tthis.container.dir = dir;\n\t\t\tthis.container.style[\"direction\"] = dir;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = dir;\n\t\t}\n\t\tthis.settings.dir = dir;\n\t}\n\n\toverflow(overflow) {\n\t\tif (this.container) {\n\t\t\tif (overflow === \"scroll\" && this.settings.axis === \"vertical\") {\n\t\t\t\tthis.container.style[\"overflow-y\"] = overflow;\n\t\t\t\tthis.container.style[\"overflow-x\"] = \"hidden\";\n\t\t\t} else if (overflow === \"scroll\" && this.settings.axis === \"horizontal\") {\n\t\t\t\tthis.container.style[\"overflow-y\"] = \"hidden\";\n\t\t\t\tthis.container.style[\"overflow-x\"] = overflow;\n\t\t\t} else {\n\t\t\t\tthis.container.style[\"overflow\"] = overflow;\n\t\t\t}\n\t\t}\n\t\tthis.settings.overflow = overflow;\n\t}\n\n\tdestroy() {\n\t\tvar base;\n\n\t\tif (this.element) {\n\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tbase = this.wrapper;\n\t\t\t} else {\n\t\t\t\tbase = this.container;\n\t\t\t}\n\n\t\t\tif(this.element.contains(this.container)) {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\n\t\t\twindow.removeEventListener(\"resize\", this.resizeFunc);\n\t\t\twindow.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n\n\t\t}\n\t}\n}\n\nexport default Stage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}