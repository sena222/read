{"ast":null,"code":"import EpubCFI from \"./epubcfi\";\nimport { qs, qsa, querySelectorByType, indexOfSorted, locationOf } from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n  constructor(xml) {\n    this.pages = [];\n    this.locations = [];\n    this.epubcfi = new EpubCFI();\n    this.firstPage = 0;\n    this.lastPage = 0;\n    this.totalPages = 0;\n    this.toc = undefined;\n    this.ncx = undefined;\n    if (xml) {\n      this.pageList = this.parse(xml);\n    }\n    if (this.pageList && this.pageList.length) {\n      this.process(this.pageList);\n    }\n  }\n\n  /**\n   * Parse PageList Xml\n   * @param  {document} xml\n   */\n  parse(xml) {\n    var html = qs(xml, \"html\");\n    var ncx = qs(xml, \"ncx\");\n    if (html) {\n      return this.parseNav(xml);\n    } else if (ncx) {\n      return this.parseNcx(xml);\n    }\n  }\n\n  /**\n   * Parse a Nav PageList\n   * @private\n   * @param  {node} navHtml\n   * @return {PageList.item[]} list\n   */\n  parseNav(navHtml) {\n    var navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n    var navItems = navElement ? qsa(navElement, \"li\") : [];\n    var length = navItems.length;\n    var i;\n    var list = [];\n    var item;\n    if (!navItems || length === 0) return list;\n    for (i = 0; i < length; ++i) {\n      item = this.item(navItems[i]);\n      list.push(item);\n    }\n    return list;\n  }\n  parseNcx(navXml) {\n    var list = [];\n    var i = 0;\n    var item;\n    var pageList;\n    var pageTargets;\n    var length = 0;\n    pageList = qs(navXml, \"pageList\");\n    if (!pageList) return list;\n    pageTargets = qsa(pageList, \"pageTarget\");\n    length = pageTargets.length;\n    if (!pageTargets || pageTargets.length === 0) {\n      return list;\n    }\n    for (i = 0; i < length; ++i) {\n      item = this.ncxItem(pageTargets[i]);\n      list.push(item);\n    }\n    return list;\n  }\n  ncxItem(item) {\n    var navLabel = qs(item, \"navLabel\");\n    var navLabelText = qs(navLabel, \"text\");\n    var pageText = navLabelText.textContent;\n    var content = qs(item, \"content\");\n    var href = content.getAttribute(\"src\");\n    var page = parseInt(pageText, 10);\n    return {\n      \"href\": href,\n      \"page\": page\n    };\n  }\n\n  /**\n   * Page List Item\n   * @private\n   * @param  {node} item\n   * @return {object} pageListItem\n   */\n  item(item) {\n    var content = qs(item, \"a\"),\n      href = content.getAttribute(\"href\") || \"\",\n      text = content.textContent || \"\",\n      page = parseInt(text),\n      isCfi = href.indexOf(\"epubcfi\"),\n      split,\n      packageUrl,\n      cfi;\n    if (isCfi != -1) {\n      split = href.split(\"#\");\n      packageUrl = split[0];\n      cfi = split.length > 1 ? split[1] : false;\n      return {\n        \"cfi\": cfi,\n        \"href\": href,\n        \"packageUrl\": packageUrl,\n        \"page\": page\n      };\n    } else {\n      return {\n        \"href\": href,\n        \"page\": page\n      };\n    }\n  }\n\n  /**\n   * Process pageList items\n   * @private\n   * @param  {array} pageList\n   */\n  process(pageList) {\n    pageList.forEach(function (item) {\n      this.pages.push(item.page);\n      if (item.cfi) {\n        this.locations.push(item.cfi);\n      }\n    }, this);\n    this.firstPage = parseInt(this.pages[0]);\n    this.lastPage = parseInt(this.pages[this.pages.length - 1]);\n    this.totalPages = this.lastPage - this.firstPage;\n  }\n\n  /**\n   * Get a PageList result from a EpubCFI\n   * @param  {string} cfi EpubCFI String\n   * @return {number} page\n   */\n  pageFromCfi(cfi) {\n    var pg = -1;\n\n    // Check if the pageList has not been set yet\n    if (this.locations.length === 0) {\n      return -1;\n    }\n\n    // TODO: check if CFI is valid?\n\n    // check if the cfi is in the location list\n    // var index = this.locations.indexOf(cfi);\n    var index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n    if (index != -1) {\n      pg = this.pages[index];\n    } else {\n      // Otherwise add it to the list of locations\n      // Insert it in the correct position in the locations page\n      //index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n      index = locationOf(cfi, this.locations, this.epubcfi.compare);\n      // Get the page at the location just before the new one, or return the first\n      pg = index - 1 >= 0 ? this.pages[index - 1] : this.pages[0];\n      if (pg !== undefined) {\n        // Add the new page in so that the locations and page array match up\n        //this.pages.splice(index, 0, pg);\n      } else {\n        pg = -1;\n      }\n    }\n    return pg;\n  }\n\n  /**\n   * Get an EpubCFI from a Page List Item\n   * @param  {string | number} pg\n   * @return {string} cfi\n   */\n  cfiFromPage(pg) {\n    var cfi = -1;\n    // check that pg is an int\n    if (typeof pg != \"number\") {\n      pg = parseInt(pg);\n    }\n\n    // check if the cfi is in the page list\n    // Pages could be unsorted.\n    var index = this.pages.indexOf(pg);\n    if (index != -1) {\n      cfi = this.locations[index];\n    }\n    // TODO: handle pages not in the list\n    return cfi;\n  }\n\n  /**\n   * Get a Page from Book percentage\n   * @param  {number} percent\n   * @return {number} page\n   */\n  pageFromPercentage(percent) {\n    var pg = Math.round(this.totalPages * percent);\n    return pg;\n  }\n\n  /**\n   * Returns a value between 0 - 1 corresponding to the location of a page\n   * @param  {number} pg the page\n   * @return {number} percentage\n   */\n  percentageFromPage(pg) {\n    var percentage = (pg - this.firstPage) / this.totalPages;\n    return Math.round(percentage * 1000) / 1000;\n  }\n\n  /**\n   * Returns a value between 0 - 1 corresponding to the location of a cfi\n   * @param  {string} cfi EpubCFI String\n   * @return {number} percentage\n   */\n  percentageFromCfi(cfi) {\n    var pg = this.pageFromCfi(cfi);\n    var percentage = this.percentageFromPage(pg);\n    return percentage;\n  }\n\n  /**\n   * Destroy\n   */\n  destroy() {\n    this.pages = undefined;\n    this.locations = undefined;\n    this.epubcfi = undefined;\n    this.pageList = undefined;\n    this.toc = undefined;\n    this.ncx = undefined;\n  }\n}\nexport default PageList;","map":{"version":3,"names":["EpubCFI","qs","qsa","querySelectorByType","indexOfSorted","locationOf","PageList","constructor","xml","pages","locations","epubcfi","firstPage","lastPage","totalPages","toc","undefined","ncx","pageList","parse","length","process","html","parseNav","parseNcx","navHtml","navElement","navItems","i","list","item","push","navXml","pageTargets","ncxItem","navLabel","navLabelText","pageText","textContent","content","href","getAttribute","page","parseInt","text","isCfi","indexOf","split","packageUrl","cfi","forEach","pageFromCfi","pg","index","compare","cfiFromPage","pageFromPercentage","percent","Math","round","percentageFromPage","percentage","percentageFromCfi","destroy"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/node_modules/epubjs/src/pagelist.js"],"sourcesContent":["import EpubCFI from \"./epubcfi\";\nimport {\n\tqs,\n\tqsa,\n\tquerySelectorByType,\n\tindexOfSorted,\n\tlocationOf\n} from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n\tconstructor(xml) {\n\t\tthis.pages = [];\n\t\tthis.locations = [];\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.firstPage = 0;\n\t\tthis.lastPage = 0;\n\t\tthis.totalPages = 0;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\n\t\tif (xml) {\n\t\t\tthis.pageList = this.parse(xml);\n\t\t}\n\n\t\tif(this.pageList && this.pageList.length) {\n\t\t\tthis.process(this.pageList);\n\t\t}\n\t}\n\n\t/**\n\t * Parse PageList Xml\n\t * @param  {document} xml\n\t */\n\tparse(xml) {\n\t\tvar html = qs(xml, \"html\");\n\t\tvar ncx = qs(xml, \"ncx\");\n\n\t\tif(html) {\n\t\t\treturn this.parseNav(xml);\n\t\t} else if(ncx){\n\t\t\treturn this.parseNcx(xml);\n\t\t}\n\n\t}\n\n\t/**\n\t * Parse a Nav PageList\n\t * @private\n\t * @param  {node} navHtml\n\t * @return {PageList.item[]} list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.item(navItems[i]);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tparseNcx(navXml) {\n\t\tvar list = [];\n\t\tvar i = 0;\n\t\tvar item;\n\t\tvar pageList;\n\t\tvar pageTargets;\n\t\tvar length = 0;\n\n\t\tpageList = qs(navXml, \"pageList\");\n\t\tif (!pageList) return list;\n\n\t\tpageTargets = qsa(pageList, \"pageTarget\");\n\t\tlength = pageTargets.length;\n\n\t\tif (!pageTargets || pageTargets.length === 0) {\n\t\t\treturn list;\n\t\t}\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.ncxItem(pageTargets[i]);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tncxItem(item) {\n\t\tvar navLabel = qs(item, \"navLabel\");\n\t\tvar navLabelText = qs(navLabel, \"text\");\n\t\tvar pageText = navLabelText.textContent;\n\t\tvar content = qs(item, \"content\");\n\n\t\tvar href = content.getAttribute(\"src\");\n\t\tvar page = parseInt(pageText, 10);\n\n\t\treturn {\n\t\t\t\"href\": href,\n\t\t\t\"page\": page,\n\t\t};\n\t}\n\n\t/**\n\t * Page List Item\n\t * @private\n\t * @param  {node} item\n\t * @return {object} pageListItem\n\t */\n\titem(item){\n\t\tvar content = qs(item, \"a\"),\n\t\t\t\thref = content.getAttribute(\"href\") || \"\",\n\t\t\t\ttext = content.textContent || \"\",\n\t\t\t\tpage = parseInt(text),\n\t\t\t\tisCfi = href.indexOf(\"epubcfi\"),\n\t\t\t\tsplit,\n\t\t\t\tpackageUrl,\n\t\t\t\tcfi;\n\n\t\tif(isCfi != -1) {\n\t\t\tsplit = href.split(\"#\");\n\t\t\tpackageUrl = split[0];\n\t\t\tcfi = split.length > 1 ? split[1] : false;\n\t\t\treturn {\n\t\t\t\t\"cfi\" : cfi,\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"packageUrl\" : packageUrl,\n\t\t\t\t\"page\" : page\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"page\" : page\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Process pageList items\n\t * @private\n\t * @param  {array} pageList\n\t */\n\tprocess(pageList){\n\t\tpageList.forEach(function(item){\n\t\t\tthis.pages.push(item.page);\n\t\t\tif (item.cfi) {\n\t\t\t\tthis.locations.push(item.cfi);\n\t\t\t}\n\t\t}, this);\n\t\tthis.firstPage = parseInt(this.pages[0]);\n\t\tthis.lastPage = parseInt(this.pages[this.pages.length-1]);\n\t\tthis.totalPages = this.lastPage - this.firstPage;\n\t}\n\n\t/**\n\t * Get a PageList result from a EpubCFI\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} page\n\t */\n\tpageFromCfi(cfi){\n\t\tvar pg = -1;\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// TODO: check if CFI is valid?\n\n\t\t// check if the cfi is in the location list\n\t\t// var index = this.locations.indexOf(cfi);\n\t\tvar index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n\t\tif(index != -1) {\n\t\t\tpg = this.pages[index];\n\t\t} else {\n\t\t\t// Otherwise add it to the list of locations\n\t\t\t// Insert it in the correct position in the locations page\n\t\t\t//index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n\t\t\tindex = locationOf(cfi, this.locations, this.epubcfi.compare);\n\t\t\t// Get the page at the location just before the new one, or return the first\n\t\t\tpg = index-1 >= 0 ? this.pages[index-1] : this.pages[0];\n\t\t\tif(pg !== undefined) {\n\t\t\t\t// Add the new page in so that the locations and page array match up\n\t\t\t\t//this.pages.splice(index, 0, pg);\n\t\t\t} else {\n\t\t\t\tpg = -1;\n\t\t\t}\n\n\t\t}\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Page List Item\n\t * @param  {string | number} pg\n\t * @return {string} cfi\n\t */\n\tcfiFromPage(pg){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof pg != \"number\"){\n\t\t\tpg = parseInt(pg);\n\t\t}\n\n\t\t// check if the cfi is in the page list\n\t\t// Pages could be unsorted.\n\t\tvar index = this.pages.indexOf(pg);\n\t\tif(index != -1) {\n\t\t\tcfi = this.locations[index];\n\t\t}\n\t\t// TODO: handle pages not in the list\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get a Page from Book percentage\n\t * @param  {number} percent\n\t * @return {number} page\n\t */\n\tpageFromPercentage(percent){\n\t\tvar pg = Math.round(this.totalPages * percent);\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a page\n\t * @param  {number} pg the page\n\t * @return {number} percentage\n\t */\n\tpercentageFromPage(pg){\n\t\tvar percentage = (pg - this.firstPage) / this.totalPages;\n\t\treturn Math.round(percentage * 1000) / 1000;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a cfi\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} percentage\n\t */\n\tpercentageFromCfi(cfi){\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\tvar percentage = this.percentageFromPage(pg);\n\t\treturn percentage;\n\t}\n\n\t/**\n\t * Destroy\n\t */\n\tdestroy() {\n\t\tthis.pages = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.pageList = undefined;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\t}\n}\n\nexport default PageList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}