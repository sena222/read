{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n// types\n\nconst RefEvent = [];\n\n/* \n\tThunks\n*/\nexport const newSnackbar = createAsyncThunk('snackbar/newSnackbar', async (_ref, _ref2) => {\n  let {\n    text,\n    type\n  } = _ref;\n  let {\n    dispatch\n  } = _ref2;\n  if (RefEvent.length !== 0) {\n    let event = RefEvent.shift();\n    clearTimeout(event);\n  }\n  dispatch(SnackbarSlice.actions.deleteSnackbar());\n  await setTimeout(function () {\n    dispatch(SnackbarSlice.actions.appendSnackbar({\n      text,\n      type: type ? type : \"INFO\"\n    }));\n    let event = window.setTimeout(function () {\n      dispatch(SnackbarSlice.actions.deleteSnackbar());\n    }, 4000);\n    RefEvent.push(event);\n  }, 50);\n});\n\n/* \n\tInitial State\n*/\n\nconst initialState = {\n  text: \"\",\n  type: \"INFO\"\n};\n\n/* \n\tSlice\n*/\nconst SnackbarSlice = createSlice({\n  name: 'snackbar',\n  initialState,\n  reducers: {\n    /** 스낵바 갱신 @dispatch */\n    appendSnackbar(state, action) {\n      state.text = action.payload.text;\n      state.type = action.payload.type;\n    },\n    /** 스낵바 초기화 @dispatch */\n    deleteSnackbar(state) {\n      state.text = \"\";\n      state.type = \"INFO\";\n    }\n  }\n});\nexport const {\n  appendSnackbar,\n  deleteSnackbar\n} = SnackbarSlice.actions;\nexport default SnackbarSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","RefEvent","newSnackbar","text","type","dispatch","length","event","shift","clearTimeout","SnackbarSlice","actions","deleteSnackbar","setTimeout","appendSnackbar","window","push","initialState","name","reducers","state","action","payload","reducer"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/src/slices/snackbar.ts"],"sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'\n// types\nimport Snackbar from 'types/snackbar'\n\n\nconst RefEvent: number[] = [];\n\n\n/* \n\tThunks\n*/\nexport const newSnackbar = createAsyncThunk(\n\t'snackbar/newSnackbar',\n\tasync (\n\t\t{ text, type }: SnackbarState, \n\t\t{ dispatch }\n\t) => {\n\t\tif(RefEvent.length !== 0) {\n\t\t\tlet event = RefEvent.shift();\n\t\t\tclearTimeout(event);\n\t\t}\n\t\tdispatch(SnackbarSlice.actions.deleteSnackbar());\n\t\tawait setTimeout(function() {\n\t\t\tdispatch(SnackbarSlice.actions.appendSnackbar({ text, type: type ? type: \"INFO\" }));\n\t\t\tlet event = window.setTimeout(function() {\n\t\t\t\tdispatch(SnackbarSlice.actions.deleteSnackbar());\n\t\t\t}, 4000);\n\t\t\tRefEvent.push(event);\n\t\t}, 50);\n\t}\n);\n\n/* \n\tInitial State\n*/\n\nconst initialState: SnackbarState = {\n\ttext: \"\",\n\ttype: \"INFO\"\n}\n\n\n/* \n\tSlice\n*/\nconst SnackbarSlice = createSlice({\n\tname: 'snackbar',\n\tinitialState,\n\treducers: {\n\t\t/** 스낵바 갱신 @dispatch */\n\t\tappendSnackbar(state, action: PayloadAction<SnackbarState>) {\n\t\t\tstate.text = action.payload.text;\n\t\t\tstate.type = action.payload.type;\n\t\t},\n\t\t/** 스낵바 초기화 @dispatch */\n\t\tdeleteSnackbar(state) {\n\t\t\tstate.text = \"\";\n\t\t\tstate.type = \"INFO\"\n\t\t}\n\t}\n});\n\n\nexport interface SnackbarState {\n\ttext: string;\n\ttype: Snackbar;\n}\n\nexport const {\n\tappendSnackbar,\n\tdeleteSnackbar\n} = SnackbarSlice.actions\n\nexport default SnackbarSlice.reducer"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAuB,kBAAkB;AAC/E;;AAIA,MAAMC,QAAkB,GAAG,EAAE;;AAG7B;AACA;AACA;AACA,OAAO,MAAMC,WAAW,GAAGH,gBAAgB,CAC1C,sBAAsB,EACtB,uBAGK;EAAA,IAFJ;IAAEI,IAAI;IAAEC;EAAoB,CAAC;EAAA,IAC7B;IAAEC;EAAS,CAAC;EAEZ,IAAGJ,QAAQ,CAACK,MAAM,KAAK,CAAC,EAAE;IACzB,IAAIC,KAAK,GAAGN,QAAQ,CAACO,KAAK,EAAE;IAC5BC,YAAY,CAACF,KAAK,CAAC;EACpB;EACAF,QAAQ,CAACK,aAAa,CAACC,OAAO,CAACC,cAAc,EAAE,CAAC;EAChD,MAAMC,UAAU,CAAC,YAAW;IAC3BR,QAAQ,CAACK,aAAa,CAACC,OAAO,CAACG,cAAc,CAAC;MAAEX,IAAI;MAAEC,IAAI,EAAEA,IAAI,GAAGA,IAAI,GAAE;IAAO,CAAC,CAAC,CAAC;IACnF,IAAIG,KAAK,GAAGQ,MAAM,CAACF,UAAU,CAAC,YAAW;MACxCR,QAAQ,CAACK,aAAa,CAACC,OAAO,CAACC,cAAc,EAAE,CAAC;IACjD,CAAC,EAAE,IAAI,CAAC;IACRX,QAAQ,CAACe,IAAI,CAACT,KAAK,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;AACP,CAAC,CACD;;AAED;AACA;AACA;;AAEA,MAAMU,YAA2B,GAAG;EACnCd,IAAI,EAAE,EAAE;EACRC,IAAI,EAAE;AACP,CAAC;;AAGD;AACA;AACA;AACA,MAAMM,aAAa,GAAGV,WAAW,CAAC;EACjCkB,IAAI,EAAE,UAAU;EAChBD,YAAY;EACZE,QAAQ,EAAE;IACT;IACAL,cAAc,CAACM,KAAK,EAAEC,MAAoC,EAAE;MAC3DD,KAAK,CAACjB,IAAI,GAAGkB,MAAM,CAACC,OAAO,CAACnB,IAAI;MAChCiB,KAAK,CAAChB,IAAI,GAAGiB,MAAM,CAACC,OAAO,CAAClB,IAAI;IACjC,CAAC;IACD;IACAQ,cAAc,CAACQ,KAAK,EAAE;MACrBA,KAAK,CAACjB,IAAI,GAAG,EAAE;MACfiB,KAAK,CAAChB,IAAI,GAAG,MAAM;IACpB;EACD;AACD,CAAC,CAAC;AAQF,OAAO,MAAM;EACZU,cAAc;EACdF;AACD,CAAC,GAAGF,aAAa,CAACC,OAAO;AAEzB,eAAeD,aAAa,CAACa,OAAO"},"metadata":{},"sourceType":"module"}