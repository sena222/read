{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';// types\n// lib\nimport palette from'lib/styles/palette';/* \n\tInitial State\n*/ /** 초기 Book 상태 */var initialBook={coverURL:'',title:'',description:'',published_date:'',modified_date:'',author:'',publisher:'',language:''};/** 초기 CurrentPage 상태 */var initialCurrentLocation={chapterName:\"-\",currentPage:0,totalPage:0,startCfi:'',endCfi:'',base:''};/** 초기 색상표 상태 */var initialColorList=[{name:'Red',code:palette.red4},{name:'Orange',code:palette.orange4},{name:'Yellow',code:palette.yellow4},{name:'Green',code:palette.green4},{name:'Blue',code:palette.blue4},{name:'Purple',code:palette.purple4}];var initialState={book:initialBook,currentLocation:initialCurrentLocation,toc:[],highlights:[],colorList:initialColorList};/* \n\tSlice\n*/var bookSlice=createSlice({name:'book',initialState:initialState,reducers:{/** Book 갱신 @dispatch */updateBook:function updateBook(state,action){state.book=action.payload;},/** CurrentPage 갱신 @dispatch */updateCurrentPage:function updateCurrentPage(state,action){state.currentLocation=action.payload;},/** Book 초기화 @dispatch */clearBook:function clearBook(state){state.book=initialBook;},/** 목차 갱신 @dispatch */updateToc:function updateToc(state,action){state.toc=action.payload;},/** 목차 초기화 @dispatch */clearToc:function clearToc(state){state.toc=[];},/** 하이라이트 추가 */pushHighlight:function pushHighlight(state,action){var check=state.highlights.filter(function(h){return h.key===action.payload.key;});if(check.length>0)return;state.highlights.push(action.payload);},/** 하이라이트 갱신 */updateHighlight:function updateHighlight(state,action){var new_idx=action.payload.key;var old_idx=state.highlights.map(function(h){return h.key;}).indexOf(new_idx);state.highlights.splice(old_idx,1,action.payload);},/** 하이라이트 삭제 */popHighlight:function popHighlight(state,action){var idx=state.highlights.map(function(h){return h.key;}).indexOf(action.payload);state.highlights.splice(idx,1);}}});var _bookSlice$actions=bookSlice.actions,updateBook=_bookSlice$actions.updateBook,clearBook=_bookSlice$actions.clearBook,updateCurrentPage=_bookSlice$actions.updateCurrentPage,updateToc=_bookSlice$actions.updateToc,clearToc=_bookSlice$actions.clearToc,pushHighlight=_bookSlice$actions.pushHighlight,updateHighlight=_bookSlice$actions.updateHighlight,popHighlight=_bookSlice$actions.popHighlight;export{updateBook,clearBook,updateCurrentPage,updateToc,clearToc,pushHighlight,updateHighlight,popHighlight};export default bookSlice.reducer;","map":{"version":3,"names":["createSlice","palette","initialBook","coverURL","title","description","published_date","modified_date","author","publisher","language","initialCurrentLocation","chapterName","currentPage","totalPage","startCfi","endCfi","base","initialColorList","name","code","red4","orange4","yellow4","green4","blue4","purple4","initialState","book","currentLocation","toc","highlights","colorList","bookSlice","reducers","updateBook","state","action","payload","updateCurrentPage","clearBook","updateToc","clearToc","pushHighlight","check","filter","h","key","length","push","updateHighlight","new_idx","old_idx","map","indexOf","splice","popHighlight","idx","actions","reducer"],"sources":["/home/parallels/Downloads/read/src/slices/book.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n// types\nimport Book from 'types/book'\nimport Page from 'types/page'\nimport Toc from 'types/toc'\nimport Highlight, { Color } from 'types/highlight'\n// lib\nimport palette from 'lib/styles/palette'\n\n\n/* \n\tInitial State\n*/\n\n/** 초기 Book 상태 */\nconst initialBook: Book = {\n\tcoverURL: '',\n\ttitle: '',\n\tdescription: '',\n\tpublished_date: '',\n\tmodified_date: '',\n\tauthor: '',\n\tpublisher: '',\n\tlanguage: ''\n}\n\n/** 초기 CurrentPage 상태 */\nconst initialCurrentLocation: Page = {\n\tchapterName: \"-\",\n\tcurrentPage: 0,\n\ttotalPage: 0,\n\tstartCfi: '',\n\tendCfi: '',\n\tbase: ''\n}\n\n/** 초기 색상표 상태 */\nconst initialColorList: Color[] = [\n\t{ name: 'Red', code: palette.red4 },\n\t{ name: 'Orange', code: palette.orange4 },\n\t{ name: 'Yellow', code: palette.yellow4 },\n\t{ name: 'Green', code: palette.green4 },\n\t{ name: 'Blue', code: palette.blue4 },\n\t{ name: 'Purple', code: palette.purple4 }\n]\n\nconst initialState: BookState = {\n\tbook: initialBook,\n\tcurrentLocation: initialCurrentLocation,\n\ttoc: [],\n\thighlights: [],\n\tcolorList: initialColorList,\n}\n\n\n/* \n\tSlice\n*/\nconst bookSlice = createSlice({\n\tname: 'book',\n\tinitialState,\n\treducers: {\n\t\t/** Book 갱신 @dispatch */\n\t\tupdateBook(state, action: PayloadAction<Book>) {\n\t\t\tstate.book = action.payload;\n\t\t},\n\t\t/** CurrentPage 갱신 @dispatch */\n\t\tupdateCurrentPage(state, action: PayloadAction<Page>) {\n\t\t\tstate.currentLocation = action.payload;\n\t\t},\n\t\t/** Book 초기화 @dispatch */\n\t\tclearBook(state) {\n\t\t\tstate.book = initialBook;\n\t\t},\n\t\t/** 목차 갱신 @dispatch */\n\t\tupdateToc(state, action: PayloadAction<Toc[]>) {\n\t\t\tstate.toc = action.payload;\n\t\t},\n\t\t/** 목차 초기화 @dispatch */\n\t\tclearToc(state) {\n\t\t\tstate.toc = [];\n\t\t},\n\t\t/** 하이라이트 추가 */\n\t\tpushHighlight(state, action: PayloadAction<Highlight>) {\n\t\t\tconst check = state.highlights.filter(h => h.key === action.payload.key);\n\t\t\tif (check.length > 0) return;\n\t\t\tstate.highlights.push(action.payload);\n\t\t},\n\t\t/** 하이라이트 갱신 */\n\t\tupdateHighlight(state, action: PayloadAction<Highlight>) {\n\t\t\tconst new_idx = action.payload.key;\n\t\t\tconst old_idx = state.highlights.map(h => h.key).indexOf(new_idx);\n\t\t\tstate.highlights.splice(old_idx, 1, action.payload);\n\t\t},\n\t\t/** 하이라이트 삭제 */\n\t\tpopHighlight(state, action: PayloadAction<string>) {\n\t\t\tconst idx = state.highlights.map(h => h.key).indexOf(action.payload);\n\t\t\tstate.highlights.splice(idx, 1);\n\t\t}\n\t}\n});\n\n\nexport interface BookState {\n\tbook: Book;\n\tcurrentLocation: Page;\n\ttoc: Toc[];\n\thighlights: Highlight[];\n\tcolorList: Color[];\n}\n\nexport const { \n\tupdateBook,\n\tclearBook,\n\tupdateCurrentPage,\n\tupdateToc,\n\tclearToc,\n\tpushHighlight,\n\tupdateHighlight,\n\tpopHighlight\n } = bookSlice.actions;\n \nexport default bookSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}