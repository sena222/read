{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _toConsumableArray from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;import{useState,useEffect,useRef,useCallback}from'react';import styled from'styled-components';// components\nimport OptionWrapper from'components/option/OptionWrapper';import OptionTitle from'components/option/OptionTitle';import DropdownValue from'components/option/DropdownValue';import DropdownItemWrapper from'components/option/DropdownItemWrapper';import DropdownItem from'components/option/DropdownItem';// types\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dropdown=function Dropdown(_ref){var title=_ref.title,defaultValue=_ref.defaultValue,valueList=_ref.valueList,onSelect=_ref.onSelect;var ref=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var value=defaultValue===\"Origin\"?\"Original\":defaultValue;/** Toggle dropdown */var onToggle=useCallback(function(){return setVisible(!visible);},[visible]);/** Close dropdown */var onClose=useCallback(function(e){if(!ref||!ref.current)return;if(!_toConsumableArray(e.path).includes(ref.current)){onToggle();}},[ref,onToggle]);var Items=valueList.map(function(font){return/*#__PURE__*/_jsx(DropdownItem,{value:font,onClick:function onClick(){onSelect(font);onToggle();}},font);});/** Register dropdown close event */useEffect(function(){if(visible){document.addEventListener('click',onClose);}else{document.removeEventListener('click',onClose);}return function(){document.removeEventListener('click',onClose);};},[visible,onClose]);return/*#__PURE__*/_jsxs(OptionWrapper,{children:[/*#__PURE__*/_jsx(OptionTitle,{children:title}),/*#__PURE__*/_jsxs(DropdownWrapper,{ref:ref,children:[/*#__PURE__*/_jsx(DropdownValue,{value:value,isDropdown:visible,onClick:onToggle}),/*#__PURE__*/_jsx(DropdownItemWrapper,{show:visible,children:Items})]})]});};var DropdownWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n\"])));export default Dropdown;","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","styled","OptionWrapper","OptionTitle","DropdownValue","DropdownItemWrapper","DropdownItem","Dropdown","title","defaultValue","valueList","onSelect","ref","visible","setVisible","value","onToggle","onClose","e","current","path","includes","Items","map","font","document","addEventListener","removeEventListener","DropdownWrapper","div"],"sources":["/home/parallels/Downloads/read/src/components/option/Dropdown.tsx"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react'\nimport styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\nimport DropdownValue from 'components/option/DropdownValue'\nimport DropdownItemWrapper from 'components/option/DropdownItemWrapper'\nimport DropdownItem from 'components/option/DropdownItem'\n// types\nimport { BookFontFamily } from 'types/book'\n\nconst Dropdown = ({\n  title,\n  defaultValue,\n  valueList,\n  onSelect\n}: Props) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [visible, setVisible] = useState<boolean>(false);\n  const value = defaultValue === \"Origin\" ? \"Original\" : defaultValue;\n  \n  /** Toggle dropdown */\n  const onToggle = useCallback(() => setVisible(!visible), [visible]);\n\n  /** Close dropdown */\n  const onClose = useCallback((e: any) => {\n    if (!ref || !ref.current) return;\n    if (![...e.path].includes(ref.current)) {\n      onToggle();\n    }\n  }, [ref, onToggle]);\n\n  const Items = valueList.map(font => \n    <DropdownItem key={font} value={font} onClick={() => {\n      onSelect(font);\n      onToggle();\n    }} />\n  );\n\n  /** Register dropdown close event */\n  useEffect(() => {\n    if (visible) {\n      document.addEventListener('click', onClose);\n    } else {\n      document.removeEventListener('click', onClose);\n    }\n    return () => {\n      document.removeEventListener('click', onClose);\n    }\n  }, [visible, onClose]);\n\n  return (\n    <OptionWrapper>\n      <OptionTitle>{title}</OptionTitle>\n\n      <DropdownWrapper ref={ref}>\n        <DropdownValue value={value} \n                       isDropdown={visible} \n                       onClick={onToggle} />\n        <DropdownItemWrapper show={visible}>\n          {Items}\n        </DropdownItemWrapper>\n      </DropdownWrapper>\n    </OptionWrapper>\n  );\n}\n\nconst DropdownWrapper = styled.div`\n  position: relative;\n`;\n\ninterface Props {\n  title: string;\n  defaultValue: BookFontFamily;\n  valueList: BookFontFamily[];\n  onSelect: (font: BookFontFamily) => void;\n}\n\nexport default Dropdown"],"mappings":"wYAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CAChE,MAAOC,OAAM,KAAM,mBAAmB,CACtC;AACA,MAAOC,cAAa,KAAM,iCAAiC,CAC3D,MAAOC,YAAW,KAAM,+BAA+B,CACvD,MAAOC,cAAa,KAAM,iCAAiC,CAC3D,MAAOC,oBAAmB,KAAM,uCAAuC,CACvE,MAAOC,aAAY,KAAM,gCAAgC,CACzD;AAAA,wFAGA,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAKD,IAJXC,MAAK,MAALA,KAAK,CACLC,YAAY,MAAZA,YAAY,CACZC,SAAS,MAATA,SAAS,CACTC,QAAQ,MAARA,QAAQ,CAER,GAAMC,IAAG,CAAGb,MAAM,CAAwB,IAAI,CAAC,CAC/C,cAA8BF,QAAQ,CAAU,KAAK,CAAC,wCAA/CgB,OAAO,eAAEC,UAAU,eAC1B,GAAMC,MAAK,CAAGN,YAAY,GAAK,QAAQ,CAAG,UAAU,CAAGA,YAAY,CAEnE,sBACA,GAAMO,SAAQ,CAAGhB,WAAW,CAAC,iBAAMc,WAAU,CAAC,CAACD,OAAO,CAAC,GAAE,CAACA,OAAO,CAAC,CAAC,CAEnE,qBACA,GAAMI,QAAO,CAAGjB,WAAW,CAAC,SAACkB,CAAM,CAAK,CACtC,GAAI,CAACN,GAAG,EAAI,CAACA,GAAG,CAACO,OAAO,CAAE,OAC1B,GAAI,CAAC,mBAAID,CAAC,CAACE,IAAI,EAAEC,QAAQ,CAACT,GAAG,CAACO,OAAO,CAAC,CAAE,CACtCH,QAAQ,EAAE,CACZ,CACF,CAAC,CAAE,CAACJ,GAAG,CAAEI,QAAQ,CAAC,CAAC,CAEnB,GAAMM,MAAK,CAAGZ,SAAS,CAACa,GAAG,CAAC,SAAAC,IAAI,qBAC9B,KAAC,YAAY,EAAY,KAAK,CAAEA,IAAK,CAAC,OAAO,CAAE,kBAAM,CACnDb,QAAQ,CAACa,IAAI,CAAC,CACdR,QAAQ,EAAE,CACZ,CAAE,EAHiBQ,IAAI,CAGlB,GACN,CAED,oCACA1B,SAAS,CAAC,UAAM,CACd,GAAIe,OAAO,CAAE,CACXY,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAET,OAAO,CAAC,CAC7C,CAAC,IAAM,CACLQ,QAAQ,CAACE,mBAAmB,CAAC,OAAO,CAAEV,OAAO,CAAC,CAChD,CACA,MAAO,WAAM,CACXQ,QAAQ,CAACE,mBAAmB,CAAC,OAAO,CAAEV,OAAO,CAAC,CAChD,CAAC,CACH,CAAC,CAAE,CAACJ,OAAO,CAAEI,OAAO,CAAC,CAAC,CAEtB,mBACE,MAAC,aAAa,yBACZ,KAAC,WAAW,WAAET,KAAK,EAAe,cAElC,MAAC,eAAe,EAAC,GAAG,CAAEI,GAAI,wBACxB,KAAC,aAAa,EAAC,KAAK,CAAEG,KAAM,CACb,UAAU,CAAEF,OAAQ,CACpB,OAAO,CAAEG,QAAS,EAAG,cACpC,KAAC,mBAAmB,EAAC,IAAI,CAAEH,OAAQ,UAChCS,KAAK,EACc,GACN,GACJ,CAEpB,CAAC,CAED,GAAMM,gBAAe,CAAG3B,MAAM,CAAC4B,GAAG,0FAEjC,CASD,cAAetB,SAAQ"},"metadata":{},"sourceType":"module"}