{"ast":null,"code":"import _classCallCheck from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { uuid, isNumber, isElement, windowBounds, extend } from \"../../utils/core\";\nimport throttle from 'lodash/throttle';\nvar Stage = /*#__PURE__*/function () {\n  function Stage(_options) {\n    _classCallCheck(this, Stage);\n    this.settings = _options || {};\n    this.id = \"epubjs-container-\" + uuid();\n    this.container = this.create(this.settings);\n    if (this.settings.hidden) {\n      this.wrapper = this.wrap(this.container);\n    }\n  }\n\n  /*\n  * Creates an element to render to.\n  * Resizes to passed width and height or to the elements size\n  */\n  _createClass(Stage, [{\n    key: \"create\",\n    value: function create(options) {\n      var height = options.height; // !== false ? options.height : \"100%\";\n      var width = options.width; // !== false ? options.width : \"100%\";\n      var overflow = options.overflow || false;\n      var axis = options.axis || \"vertical\";\n      var direction = options.direction;\n      extend(this.settings, options);\n      if (options.height && isNumber(options.height)) {\n        height = options.height + \"px\";\n      }\n      if (options.width && isNumber(options.width)) {\n        width = options.width + \"px\";\n      }\n\n      // Create new container element\n      var container = document.createElement(\"div\");\n      container.id = this.id;\n      container.classList.add(\"epub-container\");\n\n      // Style Element\n      // container.style.fontSize = \"0\";\n      container.style.wordSpacing = \"0\";\n      container.style.lineHeight = \"0\";\n      container.style.verticalAlign = \"top\";\n      container.style.position = \"relative\";\n      if (axis === \"horizontal\") {\n        // container.style.whiteSpace = \"nowrap\";\n        container.style.display = \"flex\";\n        container.style.flexDirection = \"row\";\n        container.style.flexWrap = \"nowrap\";\n      }\n      if (width) {\n        container.style.width = width;\n      }\n      if (height) {\n        container.style.height = height;\n      }\n      if (overflow) {\n        if (overflow === \"scroll\" && axis === \"vertical\") {\n          container.style[\"overflow-y\"] = overflow;\n          container.style[\"overflow-x\"] = \"hidden\";\n        } else if (overflow === \"scroll\" && axis === \"horizontal\") {\n          container.style[\"overflow-y\"] = \"hidden\";\n          container.style[\"overflow-x\"] = overflow;\n        } else {\n          container.style[\"overflow\"] = overflow;\n        }\n      }\n      if (direction) {\n        container.dir = direction;\n        container.style[\"direction\"] = direction;\n      }\n      if (direction && this.settings.fullsize) {\n        document.body.style[\"direction\"] = direction;\n      }\n      return container;\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(container) {\n      var wrapper = document.createElement(\"div\");\n      wrapper.style.visibility = \"hidden\";\n      wrapper.style.overflow = \"hidden\";\n      wrapper.style.width = \"0\";\n      wrapper.style.height = \"0\";\n      wrapper.appendChild(container);\n      return wrapper;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(_element) {\n      var element;\n      if (isElement(_element)) {\n        element = _element;\n      } else if (typeof _element === \"string\") {\n        element = document.getElementById(_element);\n      }\n      if (!element) {\n        throw new Error(\"Not an Element\");\n      }\n      return element;\n    }\n  }, {\n    key: \"attachTo\",\n    value: function attachTo(what) {\n      var element = this.getElement(what);\n      var base;\n      if (!element) {\n        return;\n      }\n      if (this.settings.hidden) {\n        base = this.wrapper;\n      } else {\n        base = this.container;\n      }\n      element.appendChild(base);\n      this.element = element;\n      return element;\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.container;\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(func) {\n      // Only listen to window for resize event if width and height are not fixed.\n      // This applies if it is set to a percent or auto.\n      if (!isNumber(this.settings.width) || !isNumber(this.settings.height)) {\n        this.resizeFunc = throttle(func, 50);\n        window.addEventListener(\"resize\", this.resizeFunc, false);\n      }\n    }\n  }, {\n    key: \"onOrientationChange\",\n    value: function onOrientationChange(func) {\n      this.orientationChangeFunc = func;\n      window.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n    }\n  }, {\n    key: \"size\",\n    value: function size(width, height) {\n      var bounds;\n      var _width = width || this.settings.width;\n      var _height = height || this.settings.height;\n\n      // If width or height are set to false, inherit them from containing element\n      if (width === null) {\n        bounds = this.element.getBoundingClientRect();\n        if (bounds.width) {\n          width = Math.floor(bounds.width);\n          this.container.style.width = width + \"px\";\n        }\n      } else {\n        if (isNumber(width)) {\n          this.container.style.width = width + \"px\";\n        } else {\n          this.container.style.width = width;\n        }\n      }\n      if (height === null) {\n        bounds = bounds || this.element.getBoundingClientRect();\n        if (bounds.height) {\n          height = bounds.height;\n          this.container.style.height = height + \"px\";\n        }\n      } else {\n        if (isNumber(height)) {\n          this.container.style.height = height + \"px\";\n        } else {\n          this.container.style.height = height;\n        }\n      }\n      if (!isNumber(width)) {\n        width = this.container.clientWidth;\n      }\n      if (!isNumber(height)) {\n        height = this.container.clientHeight;\n      }\n      this.containerStyles = window.getComputedStyle(this.container);\n      this.containerPadding = {\n        left: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n        right: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n        top: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n        bottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n      };\n\n      // Bounds not set, get them from window\n      var _windowBounds = windowBounds();\n      var bodyStyles = window.getComputedStyle(document.body);\n      var bodyPadding = {\n        left: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n        right: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n        top: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n        bottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n      };\n      if (!_width) {\n        width = _windowBounds.width - bodyPadding.left - bodyPadding.right;\n      }\n      if (this.settings.fullsize && !_height || !_height) {\n        height = _windowBounds.height - bodyPadding.top - bodyPadding.bottom;\n      }\n      return {\n        width: width - this.containerPadding.left - this.containerPadding.right,\n        height: height - this.containerPadding.top - this.containerPadding.bottom\n      };\n    }\n  }, {\n    key: \"bounds\",\n    value: function bounds() {\n      var box;\n      if (this.container.style.overflow !== \"visible\") {\n        box = this.container && this.container.getBoundingClientRect();\n      }\n      if (!box || !box.width || !box.height) {\n        return windowBounds();\n      } else {\n        return box;\n      }\n    }\n  }, {\n    key: \"getSheet\",\n    value: function getSheet() {\n      var style = document.createElement(\"style\");\n\n      // WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n      style.appendChild(document.createTextNode(\"\"));\n      document.head.appendChild(style);\n      return style.sheet;\n    }\n  }, {\n    key: \"addStyleRules\",\n    value: function addStyleRules(selector, rulesArray) {\n      var scope = \"#\" + this.id + \" \";\n      var rules = \"\";\n      if (!this.sheet) {\n        this.sheet = this.getSheet();\n      }\n      rulesArray.forEach(function (set) {\n        for (var prop in set) {\n          if (set.hasOwnProperty(prop)) {\n            rules += prop + \":\" + set[prop] + \";\";\n          }\n        }\n      });\n      this.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n    }\n  }, {\n    key: \"axis\",\n    value: function axis(_axis) {\n      if (_axis === \"horizontal\") {\n        this.container.style.display = \"flex\";\n        this.container.style.flexDirection = \"row\";\n        this.container.style.flexWrap = \"nowrap\";\n      } else {\n        this.container.style.display = \"block\";\n      }\n      this.settings.axis = _axis;\n    }\n\n    // orientation(orientation) {\n    // \tif (orientation === \"landscape\") {\n    //\n    // \t} else {\n    //\n    // \t}\n    //\n    // \tthis.orientation = orientation;\n    // }\n  }, {\n    key: \"direction\",\n    value: function direction(dir) {\n      if (this.container) {\n        this.container.dir = dir;\n        this.container.style[\"direction\"] = dir;\n      }\n      if (this.settings.fullsize) {\n        document.body.style[\"direction\"] = dir;\n      }\n      this.settings.dir = dir;\n    }\n  }, {\n    key: \"overflow\",\n    value: function overflow(_overflow) {\n      if (this.container) {\n        if (_overflow === \"scroll\" && this.settings.axis === \"vertical\") {\n          this.container.style[\"overflow-y\"] = _overflow;\n          this.container.style[\"overflow-x\"] = \"hidden\";\n        } else if (_overflow === \"scroll\" && this.settings.axis === \"horizontal\") {\n          this.container.style[\"overflow-y\"] = \"hidden\";\n          this.container.style[\"overflow-x\"] = _overflow;\n        } else {\n          this.container.style[\"overflow\"] = _overflow;\n        }\n      }\n      this.settings.overflow = _overflow;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var base;\n      if (this.element) {\n        if (this.settings.hidden) {\n          base = this.wrapper;\n        } else {\n          base = this.container;\n        }\n        if (this.element.contains(this.container)) {\n          this.element.removeChild(this.container);\n        }\n        window.removeEventListener(\"resize\", this.resizeFunc);\n        window.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n      }\n    }\n  }]);\n  return Stage;\n}();\nexport default Stage;","map":{"version":3,"names":["uuid","isNumber","isElement","windowBounds","extend","throttle","Stage","_options","settings","id","container","create","hidden","wrapper","wrap","options","height","width","overflow","axis","direction","document","createElement","classList","add","style","wordSpacing","lineHeight","verticalAlign","position","display","flexDirection","flexWrap","dir","fullsize","body","visibility","appendChild","_element","element","getElementById","Error","what","getElement","base","func","resizeFunc","window","addEventListener","orientationChangeFunc","bounds","_width","_height","getBoundingClientRect","Math","floor","clientWidth","clientHeight","containerStyles","getComputedStyle","containerPadding","left","parseFloat","right","top","bottom","_windowBounds","bodyStyles","bodyPadding","box","createTextNode","head","sheet","selector","rulesArray","scope","rules","getSheet","forEach","set","prop","hasOwnProperty","insertRule","contains","removeChild","removeEventListener"],"sources":["/home/parallels/Downloads/read/node_modules/epubjs/src/managers/helpers/stage.js"],"sourcesContent":["import {uuid, isNumber, isElement, windowBounds, extend} from \"../../utils/core\";\nimport throttle from 'lodash/throttle'\n\nclass Stage {\n\tconstructor(_options) {\n\t\tthis.settings = _options || {};\n\t\tthis.id = \"epubjs-container-\" + uuid();\n\n\t\tthis.container = this.create(this.settings);\n\n\t\tif(this.settings.hidden) {\n\t\t\tthis.wrapper = this.wrap(this.container);\n\t\t}\n\n\t}\n\n\t/*\n\t* Creates an element to render to.\n\t* Resizes to passed width and height or to the elements size\n\t*/\n\tcreate(options){\n\t\tlet height  = options.height;// !== false ? options.height : \"100%\";\n\t\tlet width   = options.width;// !== false ? options.width : \"100%\";\n\t\tlet overflow  = options.overflow || false;\n\t\tlet axis = options.axis || \"vertical\";\n\t\tlet direction = options.direction;\n\n\t\textend(this.settings, options);\n\n\t\tif(options.height && isNumber(options.height)) {\n\t\t\theight = options.height + \"px\";\n\t\t}\n\n\t\tif(options.width && isNumber(options.width)) {\n\t\t\twidth = options.width + \"px\";\n\t\t}\n\n\t\t// Create new container element\n\t\tlet container = document.createElement(\"div\");\n\n\t\tcontainer.id = this.id;\n\t\tcontainer.classList.add(\"epub-container\");\n\n\t\t// Style Element\n\t\t// container.style.fontSize = \"0\";\n\t\tcontainer.style.wordSpacing = \"0\";\n\t\tcontainer.style.lineHeight = \"0\";\n\t\tcontainer.style.verticalAlign = \"top\";\n\t\tcontainer.style.position = \"relative\";\n\n\t\tif(axis === \"horizontal\") {\n\t\t\t// container.style.whiteSpace = \"nowrap\";\n\t\t\tcontainer.style.display = \"flex\";\n\t\t\tcontainer.style.flexDirection = \"row\";\n\t\t\tcontainer.style.flexWrap = \"nowrap\";\n\t\t}\n\n\t\tif(width){\n\t\t\tcontainer.style.width = width;\n\t\t}\n\n\t\tif(height){\n\t\t\tcontainer.style.height = height;\n\t\t}\n\n\t\tif (overflow) {\n\t\t\tif (overflow === \"scroll\" && axis === \"vertical\") {\n\t\t\t\tcontainer.style[\"overflow-y\"] = overflow;\n\t\t\t\tcontainer.style[\"overflow-x\"] = \"hidden\";\n\t\t\t} else if (overflow === \"scroll\" && axis === \"horizontal\") {\n\t\t\t\tcontainer.style[\"overflow-y\"] = \"hidden\";\n\t\t\t\tcontainer.style[\"overflow-x\"] = overflow;\n\t\t\t} else {\n\t\t\t\tcontainer.style[\"overflow\"] = overflow;\n\t\t\t}\n\t\t}\n\n\t\tif (direction) {\n\t\t\tcontainer.dir = direction;\n\t\t\tcontainer.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (direction && this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = direction;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\twrap(container) {\n\t\tvar wrapper = document.createElement(\"div\");\n\n\t\twrapper.style.visibility = \"hidden\";\n\t\twrapper.style.overflow = \"hidden\";\n\t\twrapper.style.width = \"0\";\n\t\twrapper.style.height = \"0\";\n\n\t\twrapper.appendChild(container);\n\t\treturn wrapper;\n\t}\n\n\n\tgetElement(_element){\n\t\tvar element;\n\n\t\tif(isElement(_element)) {\n\t\t\telement = _element;\n\t\t} else if (typeof _element === \"string\") {\n\t\t\telement = document.getElementById(_element);\n\t\t}\n\n\t\tif(!element){\n\t\t\tthrow new Error(\"Not an Element\");\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tattachTo(what){\n\n\t\tvar element = this.getElement(what);\n\t\tvar base;\n\n\t\tif(!element){\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.settings.hidden) {\n\t\t\tbase = this.wrapper;\n\t\t} else {\n\t\t\tbase = this.container;\n\t\t}\n\n\t\telement.appendChild(base);\n\n\t\tthis.element = element;\n\n\t\treturn element;\n\n\t}\n\n\tgetContainer() {\n\t\treturn this.container;\n\t}\n\n\tonResize(func){\n\t\t// Only listen to window for resize event if width and height are not fixed.\n\t\t// This applies if it is set to a percent or auto.\n\t\tif(!isNumber(this.settings.width) ||\n\t\t\t !isNumber(this.settings.height) ) {\n\t\t\tthis.resizeFunc = throttle(func, 50);\n\t\t\twindow.addEventListener(\"resize\", this.resizeFunc, false);\n\t\t}\n\n\t}\n\n\tonOrientationChange(func){\n\t\tthis.orientationChangeFunc = func;\n\t\twindow.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n\t}\n\n\tsize(width, height){\n\t\tvar bounds;\n\t\tlet _width = width || this.settings.width;\n\t\tlet _height = height || this.settings.height;\n\n\t\t// If width or height are set to false, inherit them from containing element\n\t\tif(width === null) {\n\t\t\tbounds = this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.width) {\n\t\t\t\twidth = Math.floor(bounds.width);\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (isNumber(width)) {\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.width = width;\n\t\t\t}\n\t\t}\n\n\t\tif(height === null) {\n\t\t\tbounds = bounds || this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.height) {\n\t\t\t\theight = bounds.height;\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (isNumber(height)) {\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.height = height;\n\t\t\t}\n\t\t}\n\n\t\tif(!isNumber(width)) {\n\t\t\twidth = this.container.clientWidth;\n\t\t}\n\n\t\tif(!isNumber(height)) {\n\t\t\theight = this.container.clientHeight;\n\t\t}\n\n\t\tthis.containerStyles = window.getComputedStyle(this.container);\n\n\t\tthis.containerPadding = {\n\t\t\tleft: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\t// Bounds not set, get them from window\n\t\tlet _windowBounds = windowBounds();\n\t\tlet bodyStyles = window.getComputedStyle(document.body);\n\t\tlet bodyPadding = {\n\t\t\tleft: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\tif (!_width) {\n\t\t\twidth = _windowBounds.width -\n\t\t\t\t\t\t\t\tbodyPadding.left -\n\t\t\t\t\t\t\t\tbodyPadding.right;\n\t\t}\n\n\t\tif ((this.settings.fullsize && !_height) || !_height) {\n\t\t\theight = _windowBounds.height -\n\t\t\t\t\t\t\t\tbodyPadding.top -\n\t\t\t\t\t\t\t\tbodyPadding.bottom;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width -\n\t\t\t\t\t\t\tthis.containerPadding.left -\n\t\t\t\t\t\t\tthis.containerPadding.right,\n\t\t\theight: height -\n\t\t\t\t\t\t\tthis.containerPadding.top -\n\t\t\t\t\t\t\tthis.containerPadding.bottom\n\t\t};\n\n\t}\n\n\tbounds(){\n\t\tlet box;\n\t\tif (this.container.style.overflow !== \"visible\") {\n\t\t\tbox = this.container && this.container.getBoundingClientRect();\n\t\t}\n\n\t\tif(!box || !box.width || !box.height) {\n\t\t\treturn windowBounds();\n\t\t} else {\n\t\t\treturn box;\n\t\t}\n\n\t}\n\n\tgetSheet(){\n\t\tvar style = document.createElement(\"style\");\n\n\t\t// WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n\t\tstyle.appendChild(document.createTextNode(\"\"));\n\n\t\tdocument.head.appendChild(style);\n\n\t\treturn style.sheet;\n\t}\n\n\taddStyleRules(selector, rulesArray){\n\t\tvar scope = \"#\" + this.id + \" \";\n\t\tvar rules = \"\";\n\n\t\tif(!this.sheet){\n\t\t\tthis.sheet = this.getSheet();\n\t\t}\n\n\t\trulesArray.forEach(function(set) {\n\t\t\tfor (var prop in set) {\n\t\t\t\tif(set.hasOwnProperty(prop)) {\n\t\t\t\t\trules += prop + \":\" + set[prop] + \";\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n\t}\n\n\taxis(axis) {\n\t\tif(axis === \"horizontal\") {\n\t\t\tthis.container.style.display = \"flex\";\n\t\t\tthis.container.style.flexDirection = \"row\";\n\t\t\tthis.container.style.flexWrap = \"nowrap\";\n\t\t} else {\n\t\t\tthis.container.style.display = \"block\";\n\t\t}\n\t\tthis.settings.axis = axis;\n\t}\n\n\t// orientation(orientation) {\n\t// \tif (orientation === \"landscape\") {\n\t//\n\t// \t} else {\n\t//\n\t// \t}\n\t//\n\t// \tthis.orientation = orientation;\n\t// }\n\n\tdirection(dir) {\n\t\tif (this.container) {\n\t\t\tthis.container.dir = dir;\n\t\t\tthis.container.style[\"direction\"] = dir;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = dir;\n\t\t}\n\t\tthis.settings.dir = dir;\n\t}\n\n\toverflow(overflow) {\n\t\tif (this.container) {\n\t\t\tif (overflow === \"scroll\" && this.settings.axis === \"vertical\") {\n\t\t\t\tthis.container.style[\"overflow-y\"] = overflow;\n\t\t\t\tthis.container.style[\"overflow-x\"] = \"hidden\";\n\t\t\t} else if (overflow === \"scroll\" && this.settings.axis === \"horizontal\") {\n\t\t\t\tthis.container.style[\"overflow-y\"] = \"hidden\";\n\t\t\t\tthis.container.style[\"overflow-x\"] = overflow;\n\t\t\t} else {\n\t\t\t\tthis.container.style[\"overflow\"] = overflow;\n\t\t\t}\n\t\t}\n\t\tthis.settings.overflow = overflow;\n\t}\n\n\tdestroy() {\n\t\tvar base;\n\n\t\tif (this.element) {\n\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tbase = this.wrapper;\n\t\t\t} else {\n\t\t\t\tbase = this.container;\n\t\t\t}\n\n\t\t\tif(this.element.contains(this.container)) {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\n\t\t\twindow.removeEventListener(\"resize\", this.resizeFunc);\n\t\t\twindow.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n\n\t\t}\n\t}\n}\n\nexport default Stage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}