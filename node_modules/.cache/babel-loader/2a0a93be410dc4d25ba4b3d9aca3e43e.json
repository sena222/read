{"ast":null,"code":"import _classCallCheck from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { extend, defer, requestAnimationFrame, prefixed } from \"../../utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"../../utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nvar PI_D2 = Math.PI / 2;\nvar EASING_EQUATIONS = {\n  easeOutSine: function easeOutSine(pos) {\n    return Math.sin(pos * PI_D2);\n  },\n  easeInOutSine: function easeInOutSine(pos) {\n    return -0.5 * (Math.cos(Math.PI * pos) - 1);\n  },\n  easeInOutQuint: function easeInOutQuint(pos) {\n    if ((pos /= 0.5) < 1) {\n      return 0.5 * Math.pow(pos, 5);\n    }\n    return 0.5 * (Math.pow(pos - 2, 5) + 2);\n  },\n  easeInCubic: function easeInCubic(pos) {\n    return Math.pow(pos, 3);\n  }\n};\nvar Snap = /*#__PURE__*/function () {\n  function Snap(manager, options) {\n    _classCallCheck(this, Snap);\n    this.settings = extend({\n      duration: 80,\n      minVelocity: 0.2,\n      minDistance: 10,\n      easing: EASING_EQUATIONS['easeInCubic']\n    }, options || {});\n    this.supportsTouch = this.supportsTouch();\n    if (this.supportsTouch) {\n      this.setup(manager);\n    }\n  }\n  _createClass(Snap, [{\n    key: \"setup\",\n    value: function setup(manager) {\n      this.manager = manager;\n      this.layout = this.manager.layout;\n      this.fullsize = this.manager.settings.fullsize;\n      if (this.fullsize) {\n        this.element = this.manager.stage.element;\n        this.scroller = window;\n        this.disableScroll();\n      } else {\n        this.element = this.manager.stage.container;\n        this.scroller = this.element;\n        this.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n      }\n\n      // this.overflow = this.manager.overflow;\n\n      // set lookahead offset to page width\n      this.manager.settings.offset = this.layout.width;\n      this.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n      this.isVertical = this.manager.settings.axis === \"vertical\";\n\n      // disable snapping if not paginated or axis in not horizontal\n      if (!this.manager.isPaginated || this.isVertical) {\n        return;\n      }\n      this.touchCanceler = false;\n      this.resizeCanceler = false;\n      this.snapping = false;\n      this.scrollLeft;\n      this.scrollTop;\n      this.startTouchX = undefined;\n      this.startTouchY = undefined;\n      this.startTime = undefined;\n      this.endTouchX = undefined;\n      this.endTouchY = undefined;\n      this.endTime = undefined;\n      this.addListeners();\n    }\n  }, {\n    key: \"supportsTouch\",\n    value: function supportsTouch() {\n      if ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"disableScroll\",\n    value: function disableScroll() {\n      this.element.style.overflow = \"hidden\";\n    }\n  }, {\n    key: \"enableScroll\",\n    value: function enableScroll() {\n      this.element.style.overflow = \"\";\n    }\n  }, {\n    key: \"addListeners\",\n    value: function addListeners() {\n      this._onResize = this.onResize.bind(this);\n      window.addEventListener('resize', this._onResize);\n      this._onScroll = this.onScroll.bind(this);\n      this.scroller.addEventListener('scroll', this._onScroll);\n      this._onTouchStart = this.onTouchStart.bind(this);\n      this.scroller.addEventListener('touchstart', this._onTouchStart, {\n        passive: true\n      });\n      this.on('touchstart', this._onTouchStart);\n      this._onTouchMove = this.onTouchMove.bind(this);\n      this.scroller.addEventListener('touchmove', this._onTouchMove, {\n        passive: true\n      });\n      this.on('touchmove', this._onTouchMove);\n      this._onTouchEnd = this.onTouchEnd.bind(this);\n      this.scroller.addEventListener('touchend', this._onTouchEnd, {\n        passive: true\n      });\n      this.on('touchend', this._onTouchEnd);\n      this._afterDisplayed = this.afterDisplayed.bind(this);\n      this.manager.on(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners() {\n      window.removeEventListener('resize', this._onResize);\n      this._onResize = undefined;\n      this.scroller.removeEventListener('scroll', this._onScroll);\n      this._onScroll = undefined;\n      this.scroller.removeEventListener('touchstart', this._onTouchStart, {\n        passive: true\n      });\n      this.off('touchstart', this._onTouchStart);\n      this._onTouchStart = undefined;\n      this.scroller.removeEventListener('touchmove', this._onTouchMove, {\n        passive: true\n      });\n      this.off('touchmove', this._onTouchMove);\n      this._onTouchMove = undefined;\n      this.scroller.removeEventListener('touchend', this._onTouchEnd, {\n        passive: true\n      });\n      this.off('touchend', this._onTouchEnd);\n      this._onTouchEnd = undefined;\n      this.manager.off(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n      this._afterDisplayed = undefined;\n    }\n  }, {\n    key: \"afterDisplayed\",\n    value: function afterDisplayed(view) {\n      var _this = this;\n      var contents = view.contents;\n      [\"touchstart\", \"touchmove\", \"touchend\"].forEach(function (e) {\n        contents.on(e, function (ev) {\n          return _this.triggerViewEvent(ev, contents);\n        });\n      });\n    }\n  }, {\n    key: \"triggerViewEvent\",\n    value: function triggerViewEvent(e, contents) {\n      this.emit(e.type, e, contents);\n    }\n  }, {\n    key: \"onScroll\",\n    value: function onScroll(e) {\n      this.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n      this.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n    }\n  }, {\n    key: \"onResize\",\n    value: function onResize(e) {\n      this.resizeCanceler = true;\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart(e) {\n      var _e$touches$ = e.touches[0],\n        screenX = _e$touches$.screenX,\n        screenY = _e$touches$.screenY;\n      if (this.fullsize) {\n        this.enableScroll();\n      }\n      this.touchCanceler = true;\n      if (!this.startTouchX) {\n        this.startTouchX = screenX;\n        this.startTouchY = screenY;\n        this.startTime = this.now();\n      }\n      this.endTouchX = screenX;\n      this.endTouchY = screenY;\n      this.endTime = this.now();\n    }\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(e) {\n      var _e$touches$2 = e.touches[0],\n        screenX = _e$touches$2.screenX,\n        screenY = _e$touches$2.screenY;\n      var deltaY = Math.abs(screenY - this.endTouchY);\n      this.touchCanceler = true;\n      if (!this.fullsize && deltaY < 10) {\n        this.element.scrollLeft -= screenX - this.endTouchX;\n      }\n      this.endTouchX = screenX;\n      this.endTouchY = screenY;\n      this.endTime = this.now();\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(e) {\n      if (this.fullsize) {\n        this.disableScroll();\n      }\n      this.touchCanceler = false;\n      var swipped = this.wasSwiped();\n      if (swipped !== 0) {\n        this.snap(swipped);\n      } else {\n        this.snap();\n      }\n      this.startTouchX = undefined;\n      this.startTouchY = undefined;\n      this.startTime = undefined;\n      this.endTouchX = undefined;\n      this.endTouchY = undefined;\n      this.endTime = undefined;\n    }\n  }, {\n    key: \"wasSwiped\",\n    value: function wasSwiped() {\n      var snapWidth = this.layout.pageWidth * this.layout.divisor;\n      var distance = this.endTouchX - this.startTouchX;\n      var absolute = Math.abs(distance);\n      var time = this.endTime - this.startTime;\n      var velocity = distance / time;\n      var minVelocity = this.settings.minVelocity;\n      if (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n        return 0;\n      }\n      if (velocity > minVelocity) {\n        // previous\n        return -1;\n      } else if (velocity < -minVelocity) {\n        // next\n        return 1;\n      }\n    }\n  }, {\n    key: \"needsSnap\",\n    value: function needsSnap() {\n      var left = this.scrollLeft;\n      var snapWidth = this.layout.pageWidth * this.layout.divisor;\n      return left % snapWidth !== 0;\n    }\n  }, {\n    key: \"snap\",\n    value: function snap() {\n      var howMany = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var left = this.scrollLeft;\n      var snapWidth = this.layout.pageWidth * this.layout.divisor;\n      var snapTo = Math.round(left / snapWidth) * snapWidth;\n      if (howMany) {\n        snapTo += howMany * snapWidth;\n      }\n      return this.smoothScrollTo(snapTo);\n    }\n  }, {\n    key: \"smoothScrollTo\",\n    value: function smoothScrollTo(destination) {\n      var deferred = new defer();\n      var start = this.scrollLeft;\n      var startTime = this.now();\n      var duration = this.settings.duration;\n      var easing = this.settings.easing;\n      this.snapping = true;\n\n      // add animation loop\n      function tick() {\n        var now = this.now();\n        var time = Math.min(1, (now - startTime) / duration);\n        var timeFunction = easing(time);\n        if (this.touchCanceler || this.resizeCanceler) {\n          this.resizeCanceler = false;\n          this.snapping = false;\n          deferred.resolve();\n          return;\n        }\n        if (time < 1) {\n          window.requestAnimationFrame(tick.bind(this));\n          this.scrollTo(start + (destination - start) * time, 0);\n        } else {\n          this.scrollTo(destination, 0);\n          this.snapping = false;\n          deferred.resolve();\n        }\n      }\n      tick.call(this);\n      return deferred.promise;\n    }\n  }, {\n    key: \"scrollTo\",\n    value: function scrollTo() {\n      var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      if (this.fullsize) {\n        window.scroll(left, top);\n      } else {\n        this.scroller.scrollLeft = left;\n        this.scroller.scrollTop = top;\n      }\n    }\n  }, {\n    key: \"now\",\n    value: function now() {\n      return 'now' in window.performance ? performance.now() : new Date().getTime();\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.scroller) {\n        return;\n      }\n      if (this.fullsize) {\n        this.enableScroll();\n      }\n      this.removeListeners();\n      this.scroller = undefined;\n    }\n  }]);\n  return Snap;\n}();\nEventEmitter(Snap.prototype);\nexport default Snap;","map":{"version":3,"names":["extend","defer","requestAnimationFrame","prefixed","EVENTS","DOM_EVENTS","EventEmitter","PI_D2","Math","PI","EASING_EQUATIONS","easeOutSine","pos","sin","easeInOutSine","cos","easeInOutQuint","pow","easeInCubic","Snap","manager","options","settings","duration","minVelocity","minDistance","easing","supportsTouch","setup","layout","fullsize","element","stage","scroller","window","disableScroll","container","style","offset","width","afterScrolledTimeout","isVertical","axis","isPaginated","touchCanceler","resizeCanceler","snapping","scrollLeft","scrollTop","startTouchX","undefined","startTouchY","startTime","endTouchX","endTouchY","endTime","addListeners","DocumentTouch","document","overflow","_onResize","onResize","bind","addEventListener","_onScroll","onScroll","_onTouchStart","onTouchStart","passive","on","_onTouchMove","onTouchMove","_onTouchEnd","onTouchEnd","_afterDisplayed","afterDisplayed","MANAGERS","ADDED","removeEventListener","off","view","contents","forEach","e","ev","triggerViewEvent","emit","type","scrollX","scrollY","touches","screenX","screenY","enableScroll","now","deltaY","abs","swipped","wasSwiped","snap","snapWidth","pageWidth","divisor","distance","absolute","time","velocity","left","howMany","snapTo","round","smoothScrollTo","destination","deferred","start","tick","min","timeFunction","resolve","scrollTo","call","promise","top","scroll","performance","Date","getTime","removeListeners","prototype"],"sources":["/home/parallels/Downloads/read/node_modules/epubjs/src/managers/helpers/snap.js"],"sourcesContent":["import {extend, defer, requestAnimationFrame, prefixed} from \"../../utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"../../utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = (Math.PI / 2);\nconst EASING_EQUATIONS = {\n\t\teaseOutSine: function (pos) {\n\t\t\t\treturn Math.sin(pos * PI_D2);\n\t\t},\n\t\teaseInOutSine: function (pos) {\n\t\t\t\treturn (-0.5 * (Math.cos(Math.PI * pos) - 1));\n\t\t},\n\t\teaseInOutQuint: function (pos) {\n\t\t\t\tif ((pos /= 0.5) < 1) {\n\t\t\t\t\t\treturn 0.5 * Math.pow(pos, 5);\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (Math.pow((pos - 2), 5) + 2);\n\t\t},\n\t\teaseInCubic: function(pos) {\n\t\t\treturn Math.pow(pos, 3);\n  \t}\n};\n\nclass Snap {\n\tconstructor(manager, options) {\n\n\t\tthis.settings = extend({\n\t\t\tduration: 80,\n\t\t\tminVelocity: 0.2,\n\t\t\tminDistance: 10,\n\t\t\teasing: EASING_EQUATIONS['easeInCubic']\n\t\t}, options || {});\n\n\t\tthis.supportsTouch = this.supportsTouch();\n\n\t\tif (this.supportsTouch) {\n\t\t\tthis.setup(manager);\n\t\t}\n\t}\n\n\tsetup(manager) {\n\t\tthis.manager = manager;\n\n\t\tthis.layout = this.manager.layout;\n\n\t\tthis.fullsize = this.manager.settings.fullsize;\n\t\tif (this.fullsize) {\n\t\t\tthis.element = this.manager.stage.element;\n\t\t\tthis.scroller = window;\n\t\t\tthis.disableScroll();\n\t\t} else {\n\t\t\tthis.element = this.manager.stage.container;\n\t\t\tthis.scroller = this.element;\n\t\t\tthis.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n\t\t}\n\n\t\t// this.overflow = this.manager.overflow;\n\n\t\t// set lookahead offset to page width\n\t\tthis.manager.settings.offset = this.layout.width;\n\t\tthis.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n\n\t\tthis.isVertical = this.manager.settings.axis === \"vertical\";\n\n\t\t// disable snapping if not paginated or axis in not horizontal\n\t\tif (!this.manager.isPaginated || this.isVertical) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\t\tthis.resizeCanceler = false;\n\t\tthis.snapping = false;\n\n\n\t\tthis.scrollLeft;\n\t\tthis.scrollTop;\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\n\t\tthis.addListeners();\n\t}\n\n\tsupportsTouch() {\n\t\tif (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdisableScroll() {\n\t\tthis.element.style.overflow = \"hidden\";\n\t}\n\n\tenableScroll() {\n\t\tthis.element.style.overflow = \"\";\n\t}\n\n\taddListeners() {\n\t\tthis._onResize = this.onResize.bind(this);\n\t\twindow.addEventListener('resize', this._onResize);\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tthis.scroller.addEventListener('scroll', this._onScroll);\n\n\t\tthis._onTouchStart = this.onTouchStart.bind(this);\n\t\tthis.scroller.addEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.on('touchstart', this._onTouchStart);\n\n\t\tthis._onTouchMove = this.onTouchMove.bind(this);\n\t\tthis.scroller.addEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.on('touchmove', this._onTouchMove);\n\n\t\tthis._onTouchEnd = this.onTouchEnd.bind(this);\n\t\tthis.scroller.addEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.on('touchend', this._onTouchEnd);\n\n\t\tthis._afterDisplayed = this.afterDisplayed.bind(this);\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t}\n\n\tremoveListeners() {\n\t\twindow.removeEventListener('resize', this._onResize);\n\t\tthis._onResize = undefined;\n\n\t\tthis.scroller.removeEventListener('scroll', this._onScroll);\n\t\tthis._onScroll = undefined;\n\n\t\tthis.scroller.removeEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.off('touchstart', this._onTouchStart);\n\t\tthis._onTouchStart = undefined;\n\n\t\tthis.scroller.removeEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.off('touchmove', this._onTouchMove);\n\t\tthis._onTouchMove = undefined;\n\n\t\tthis.scroller.removeEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.off('touchend', this._onTouchEnd);\n\t\tthis._onTouchEnd = undefined;\n\n\t\tthis.manager.off(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t\tthis._afterDisplayed = undefined;\n\t}\n\n\tafterDisplayed(view) {\n\t\tlet contents = view.contents;\n\t\t[\"touchstart\", \"touchmove\", \"touchend\"].forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\t}\n\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\tonScroll(e) {\n\t\tthis.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n\t\tthis.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n\t}\n\n\tonResize(e) {\n\t\tthis.resizeCanceler = true;\n\t}\n\n\tonTouchStart(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = true;\n\n\t\tif (!this.startTouchX) {\n\t\t\tthis.startTouchX = screenX;\n\t\t\tthis.startTouchY = screenY;\n\t\t\tthis.startTime = this.now();\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchMove(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\t\tlet deltaY = Math.abs(screenY - this.endTouchY);\n\n\t\tthis.touchCanceler = true;\n\n\n\t\tif (!this.fullsize && deltaY < 10) {\n\t\t\tthis.element.scrollLeft -= screenX - this.endTouchX;\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchEnd(e) {\n\t\tif (this.fullsize) {\n\t\t\tthis.disableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\n\t\tlet swipped = this.wasSwiped();\n\n\t\tif (swipped !== 0) {\n\t\t\tthis.snap(swipped);\n\t\t} else {\n\t\t\tthis.snap();\n\t\t}\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\t}\n\n\twasSwiped() {\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet distance = (this.endTouchX - this.startTouchX);\n\t\tlet absolute = Math.abs(distance);\n\t\tlet time = this.endTime - this.startTime;\n\t\tlet velocity = (distance / time);\n\t\tlet minVelocity = this.settings.minVelocity;\n\n\t\tif (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (velocity > minVelocity) {\n\t\t\t// previous\n\t\t\treturn -1;\n\t\t} else if (velocity < -minVelocity) {\n\t\t\t// next\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\tneedsSnap() {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\treturn (left % snapWidth) !== 0;\n\t}\n\n\tsnap(howMany=0) {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet snapTo = Math.round(left / snapWidth) * snapWidth;\n\n\t\tif (howMany) {\n\t\t\tsnapTo += (howMany * snapWidth);\n\t\t}\n\n\t\treturn this.smoothScrollTo(snapTo);\n\t}\n\n\tsmoothScrollTo(destination) {\n\t\tconst deferred = new defer();\n\t\tconst start = this.scrollLeft;\n\t\tconst startTime = this.now();\n\n\t\tconst duration = this.settings.duration;\n\t\tconst easing = this.settings.easing;\n\n\t\tthis.snapping = true;\n\n\t\t// add animation loop\n\t\tfunction tick() {\n\t\t\tconst now = this.now();\n\t\t\tconst time = Math.min(1, ((now - startTime) / duration));\n\t\t\tconst timeFunction = easing(time);\n\n\n\t\t\tif (this.touchCanceler || this.resizeCanceler) {\n\t\t\t\tthis.resizeCanceler = false;\n\t\t\t\tthis.snapping = false;\n\t\t\t\tdeferred.resolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (time < 1) {\n\t\t\t\t\twindow.requestAnimationFrame(tick.bind(this));\n\t\t\t\t\tthis.scrollTo(start + ((destination - start) * time), 0);\n\t\t\t} else {\n\t\t\t\t\tthis.scrollTo(destination, 0);\n\t\t\t\t\tthis.snapping = false;\n\t\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t}\n\n\t\ttick.call(this);\n\n\t\treturn deferred.promise;\n\t}\n\n\tscrollTo(left=0, top=0) {\n\t\tif (this.fullsize) {\n\t\t\twindow.scroll(left, top);\n\t\t} else {\n\t\t\tthis.scroller.scrollLeft = left;\n\t\t\tthis.scroller.scrollTop = top;\n\t\t}\n\t}\n\n\tnow() {\n\t\treturn ('now' in window.performance) ? performance.now() : new Date().getTime();\n\t}\n\n\tdestroy() {\n\t\tif (!this.scroller) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.removeListeners();\n\n\t\tthis.scroller = undefined;\n\t}\n}\n\nEventEmitter(Snap.prototype);\n\nexport default Snap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}