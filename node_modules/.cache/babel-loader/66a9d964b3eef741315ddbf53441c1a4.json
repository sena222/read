{"ast":null,"code":"import { EpubCFI } from 'epubjs';\n// types\n\n/**\n * DateTime to `yyyy-mm-dd`\n * @param {Date} time \n */\nexport const timeFormatter = time => {\n  const yyyy = time.getFullYear();\n  const mm = time.getMonth() + 1;\n  const dd = time.getDate();\n  const msg = `${yyyy}-${mm}-${dd}`;\n  return msg;\n};\n\n/**\n * Comparison of two CFI sizes\n * - -1 : CFI 1 < CFI 2\n * - 0 : CFI 1 == CFI 2\n * - 1 : CFI 1 > CFI 2\n * @param cfi_1 CFI 1\n * @param cfi_2 CFI 2\n */\nexport const compareCfi = (cfi_1, cfi_2) => {\n  const epubcfi = new EpubCFI();\n  return epubcfi.compare(cfi_1, cfi_2);\n};\n\n/**\n * Split CFI range into two starting CFI and ending CFI\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const cfiRangeSpliter = cfiRange => {\n  const content = cfiRange.slice(8, -1);\n  const [origin, start, end] = content.split(',');\n  if (!origin || !start || !end) return null;\n  const startCfi = `epubcfi(${origin + start})`;\n  const endCfi = `epubcfi(${origin + end})`;\n  return {\n    startCfi,\n    endCfi\n  };\n};\n\n/**\n * Whether the two CFI ranges nested\n * - true : Nested\n * - false : Not nested\n * - null : Invalid CFIRange\n * @param cfiRange1 First CFIRange\n * @param cfiRange2 Second CFIRange\n */\nexport const clashCfiRange = (baseCfiRange, targetCfiRange) => {\n  const splitCfi1 = cfiRangeSpliter(baseCfiRange);\n  const splitCfi2 = cfiRangeSpliter(targetCfiRange);\n  if (!splitCfi1 || !splitCfi2) return null;\n  const {\n    startCfi: s1,\n    endCfi: e1\n  } = splitCfi1;\n  const {\n    startCfi: s2,\n    endCfi: e2\n  } = splitCfi2;\n  if (compareCfi(s2, s1) <= 0 && compareCfi(s1, e2) <= 0 || compareCfi(s2, e1) <= 0 && compareCfi(e1, e2) <= 0 || compareCfi(s1, s2) <= 0 && compareCfi(e2, e1) <= 0) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * Extract paragraph CFI from CFIRange\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const getParagraphCfi = cfiRange => {\n  if (!cfiRange) return;\n  const content = cfiRange.slice(8, -1);\n  const [origin, start, end] = content.split(',');\n  if (!origin || !start || !end) return null;\n  const cfi = `epubcfi(${origin})`;\n  return cfi;\n};\n\n/**\n * Get specific DOM Element from CFI\n * - **※ Warning**: Other Iframe must not exist in the Reader page!\n * @param cfi CFI\n * @returns HTML Element or Null\n */\nexport const getNodefromCfi = cfi => {\n  const epubcfi = cfi.slice(8, -1);\n\n  /* Remove Id */\n  const pureCfi = epubcfi.replace(/\\[.*?\\]/gi, '');\n\n  /* Only CFI Base */\n  const splitCfi = pureCfi.split('!');\n  if (splitCfi.length < 1 || splitCfi[1] === \"\") {\n    return null;\n  }\n\n  /* Remove Body tag CFI */\n  const cfiPath = splitCfi[1].split('/').slice(2).map(x => Number(x));\n  const iframe = document.querySelector('iframe');\n  if (!iframe) return null;\n  const iframeBody = iframe.contentWindow && iframe.contentWindow.document.body;\n  if (!iframeBody) return null;\n  let component = iframeBody;\n\n  /* Find Node based on CFI */\n  for (let idx of cfiPath) {\n    const childNodes = component && component.childNodes;\n\n    /* Bookmark / Highlight filtering.. */\n    const filtered = [...childNodes].filter(n => !n.dataset || !n.dataset.bookmark || !n.dataset.highlight);\n    component = filtered[idx - 1];\n    if (!component) {\n      component = null;\n      break;\n    }\n  }\n  return component;\n};\n\n/**\n * Selection absolute location\n * @param viewer viewerRef.current\n * @param bookStyle bookStyle\n * @param bookFlow book-flow\n * @param MIN_VIEWER_WIDTH min viewer width\n * @param MIN_VIEWER_HEIGHT min viewer height\n * @param VIEWER_HEADER_HEIGHT viewer header height\n * @param CONTEXTMENU_WIDTH contextmenu width\n * @returns Contextmenu location\n */\nexport const getSelectionPosition = (viewer, bookStyle, bookFlow, MIN_VIEWER_WIDTH, MIN_VIEWER_HEIGHT, VIEWER_HEADER_HEIGHT, CONTEXTMENU_WIDTH) => {\n  const {\n    innerWidth: windowWidth,\n    innerHeight: windowHeight\n  } = window;\n  const iframeWidth = viewer.offsetWidth;\n  const scrollTop = viewer.querySelector('div').scrollTop;\n  const iframe = viewer.querySelector('iframe');\n  const selection_ = iframe && iframe.contentWindow && iframe.contentWindow.getSelection();\n  if (!selection_ || selection_.rangeCount === 0) return null;\n  const range = selection_.getRangeAt(0);\n  const {\n    x: selectionX,\n    y: selectionY,\n    height: selectionHeight,\n    width: selectionWidth\n  } = range.getBoundingClientRect();\n  const marginLeft = ~~((windowWidth - MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal / 2);\n  const marginTop = bookFlow === \"scrolled-doc\" ? 0 : ~~((windowHeight - VIEWER_HEADER_HEIGHT - MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical / 2);\n  const x = ~~(selectionX % iframeWidth + marginLeft + (selectionWidth / 2 - CONTEXTMENU_WIDTH / 2));\n  const y = ~~(selectionY + selectionHeight + VIEWER_HEADER_HEIGHT + marginTop - scrollTop);\n  return {\n    x,\n    y,\n    height: selectionHeight,\n    width: selectionWidth\n  };\n};\n\n/**\n * Debounce\n * @param func Target function\n * @param timeout delay\n */\nexport function debounce(timeout, func) {\n  let timer;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      func(...args);\n    }, timeout);\n  };\n}","map":{"version":3,"names":["EpubCFI","timeFormatter","time","yyyy","getFullYear","mm","getMonth","dd","getDate","msg","compareCfi","cfi_1","cfi_2","epubcfi","compare","cfiRangeSpliter","cfiRange","content","slice","origin","start","end","split","startCfi","endCfi","clashCfiRange","baseCfiRange","targetCfiRange","splitCfi1","splitCfi2","s1","e1","s2","e2","getParagraphCfi","cfi","getNodefromCfi","pureCfi","replace","splitCfi","length","cfiPath","map","x","Number","iframe","document","querySelector","iframeBody","contentWindow","body","component","idx","childNodes","filtered","filter","n","dataset","bookmark","highlight","getSelectionPosition","viewer","bookStyle","bookFlow","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","CONTEXTMENU_WIDTH","innerWidth","windowWidth","innerHeight","windowHeight","window","iframeWidth","offsetWidth","scrollTop","selection_","getSelection","rangeCount","range","getRangeAt","selectionX","y","selectionY","height","selectionHeight","width","selectionWidth","getBoundingClientRect","marginLeft","marginHorizontal","marginTop","marginVertical","debounce","timeout","func","timer","args","clearTimeout","setTimeout"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/src/lib/utils/commonUtil.ts"],"sourcesContent":["import { EpubCFI } from 'epubjs'\n// types\nimport { BookStyle, BookFlow } from 'types/book'\n\n\n/**\n * DateTime to `yyyy-mm-dd`\n * @param {Date} time \n */\n export const timeFormatter = (time: Date): string => {\n\tconst yyyy = time.getFullYear();\n\tconst mm = time.getMonth() + 1;\n\tconst dd = time.getDate();\n\tconst msg = `${yyyy}-${mm}-${dd}`;\n\n\treturn msg;\n}\n\n\n/**\n * Comparison of two CFI sizes\n * - -1 : CFI 1 < CFI 2\n * - 0 : CFI 1 == CFI 2\n * - 1 : CFI 1 > CFI 2\n * @param cfi_1 CFI 1\n * @param cfi_2 CFI 2\n */\nexport const compareCfi = (cfi_1: string, cfi_2: string): number => {\n\tconst epubcfi = new EpubCFI();\n\treturn epubcfi.compare(cfi_1, cfi_2);\n};\n\n\n/**\n * Split CFI range into two starting CFI and ending CFI\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const cfiRangeSpliter = (cfiRange: string) => {\n\tconst content = cfiRange.slice(8, -1);\n\tconst [origin, start, end] = content.split(',');\n\n\tif (!origin || !start || !end) return null;\n\n\tconst startCfi = `epubcfi(${origin + start})`;\n\tconst endCfi = `epubcfi(${origin + end})`;\n\treturn { startCfi, endCfi }\n}\n\n\n/**\n * Whether the two CFI ranges nested\n * - true : Nested\n * - false : Not nested\n * - null : Invalid CFIRange\n * @param cfiRange1 First CFIRange\n * @param cfiRange2 Second CFIRange\n */\nexport const clashCfiRange = (baseCfiRange: string, targetCfiRange: string) => {\n\tconst splitCfi1 = cfiRangeSpliter(baseCfiRange);\n\tconst splitCfi2 = cfiRangeSpliter(targetCfiRange);\n\n\tif (!splitCfi1 || !splitCfi2) return null;\n\n\tconst { startCfi: s1, endCfi: e1 } = splitCfi1;\n\tconst { startCfi: s2, endCfi: e2 } = splitCfi2;\n\n\tif ((compareCfi(s2, s1) <= 0 && compareCfi(s1, e2) <= 0)\n\t\t||(compareCfi(s2, e1) <= 0 && compareCfi(e1, e2) <= 0)\n\t\t||(compareCfi(s1, s2) <= 0 && compareCfi(e2, e1) <= 0)) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/**\n * Extract paragraph CFI from CFIRange\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\nexport const getParagraphCfi = (cfiRange: string) => {\n\tif (!cfiRange) return;\n\n\tconst content = cfiRange.slice(8, -1);\n\tconst [origin, start, end] = content.split(',');\n\t\n\tif (!origin || !start || !end) return null;\n\n\tconst cfi = `epubcfi(${origin})`;\n\treturn cfi;\n}\n\n\n/**\n * Get specific DOM Element from CFI\n * - **※ Warning**: Other Iframe must not exist in the Reader page!\n * @param cfi CFI\n * @returns HTML Element or Null\n */\nexport const getNodefromCfi = (cfi: string): HTMLElement | null => {\n\tconst epubcfi = cfi.slice(8, -1);\n\n\t/* Remove Id */\n\tconst pureCfi = epubcfi.replace(/\\[.*?\\]/gi, '');\n\n\t/* Only CFI Base */\n\tconst splitCfi = pureCfi.split('!');\n\tif (splitCfi.length < 1 || splitCfi[1] === \"\") {\n\t\treturn null;\n\t}\n\n\t/* Remove Body tag CFI */\n\tconst cfiPath: number[] = splitCfi[1].split('/')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .slice(2)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .map(x => Number(x));\n\n\tconst iframe = document.querySelector('iframe');\n\tif (!iframe) return null;\n\t\n\tconst iframeBody = iframe.contentWindow && iframe.contentWindow.document.body;\n\tif (!iframeBody) return null;\n\n\tlet component: HTMLElement | null = iframeBody;\n\n\t/* Find Node based on CFI */\n\tfor (let idx of cfiPath) {\n\t\tconst childNodes: any = component && component.childNodes;\n\n\t\t/* Bookmark / Highlight filtering.. */\n\t\tconst filtered = ([...childNodes].filter(n => !n.dataset \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| !n.dataset.bookmark\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| !n.dataset.highlight ));\n\t\tcomponent = filtered[idx - 1];\n\n\t\tif (!component) {\n\t\t\tcomponent = null;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn component;\n}\n\n\n/**\n * Selection absolute location\n * @param viewer viewerRef.current\n * @param bookStyle bookStyle\n * @param bookFlow book-flow\n * @param MIN_VIEWER_WIDTH min viewer width\n * @param MIN_VIEWER_HEIGHT min viewer height\n * @param VIEWER_HEADER_HEIGHT viewer header height\n * @param CONTEXTMENU_WIDTH contextmenu width\n * @returns Contextmenu location\n */\nexport const getSelectionPosition = (\n\tviewer: any,\n\tbookStyle: BookStyle,\n\tbookFlow: BookFlow,\n\tMIN_VIEWER_WIDTH: number,\n\tMIN_VIEWER_HEIGHT: number,\n\tVIEWER_HEADER_HEIGHT: number,\n\tCONTEXTMENU_WIDTH: number\n): { x: number, y: number, height: number, width: number } | null => {\n\tconst { \n\t\tinnerWidth: windowWidth,\n\t\tinnerHeight: windowHeight \n\t} = window;\n\n\tconst iframeWidth = viewer.offsetWidth;\n\n\tconst scrollTop = viewer.querySelector('div').scrollTop;\n\n\tconst iframe = viewer.querySelector('iframe');\n\tconst selection_ = iframe && iframe.contentWindow && iframe.contentWindow.getSelection();\n\tif (!selection_ || selection_.rangeCount === 0) return null;\n\n\tconst range = selection_.getRangeAt(0);\n\tconst {\n\t\tx: selectionX,\n\t\ty: selectionY,\n\t\theight: selectionHeight,\n\t\twidth: selectionWidth\n\t} = range.getBoundingClientRect();\n\n\tconst marginLeft = ~~((windowWidth - MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal / 2);\n\tconst marginTop = bookFlow === \"scrolled-doc\"\n\t\t? 0\n\t\t: ~~((windowHeight - VIEWER_HEADER_HEIGHT - MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical / 2);\n\n\tconst x = ~~(selectionX % iframeWidth + marginLeft + ( selectionWidth / 2 - CONTEXTMENU_WIDTH / 2));\n\tconst y = ~~(selectionY + selectionHeight + VIEWER_HEADER_HEIGHT + marginTop - scrollTop);\n\n\treturn { \n\t\tx, \n\t\ty, \n\t\theight: selectionHeight, \n\t\twidth: selectionWidth \n\t};\n}\n\n/**\n * Debounce\n * @param func Target function\n * @param timeout delay\n */\n export function debounce<Params extends any[]>(\n  timeout: number,\n  func: (...args: Params) => any,\n): (...args: Params) => void {\n  let timer: NodeJS.Timeout\n  return (...args: Params) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      func(...args)\n    }, timeout)\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}