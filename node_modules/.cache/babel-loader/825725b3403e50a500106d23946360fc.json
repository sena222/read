{"ast":null,"code":"import { extend, defer, requestAnimationFrame, prefixed } from \"../../utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"../../utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = Math.PI / 2;\nconst EASING_EQUATIONS = {\n  easeOutSine: function (pos) {\n    return Math.sin(pos * PI_D2);\n  },\n  easeInOutSine: function (pos) {\n    return -0.5 * (Math.cos(Math.PI * pos) - 1);\n  },\n  easeInOutQuint: function (pos) {\n    if ((pos /= 0.5) < 1) {\n      return 0.5 * Math.pow(pos, 5);\n    }\n    return 0.5 * (Math.pow(pos - 2, 5) + 2);\n  },\n  easeInCubic: function (pos) {\n    return Math.pow(pos, 3);\n  }\n};\nclass Snap {\n  constructor(manager, options) {\n    this.settings = extend({\n      duration: 80,\n      minVelocity: 0.2,\n      minDistance: 10,\n      easing: EASING_EQUATIONS['easeInCubic']\n    }, options || {});\n    this.supportsTouch = this.supportsTouch();\n    if (this.supportsTouch) {\n      this.setup(manager);\n    }\n  }\n  setup(manager) {\n    this.manager = manager;\n    this.layout = this.manager.layout;\n    this.fullsize = this.manager.settings.fullsize;\n    if (this.fullsize) {\n      this.element = this.manager.stage.element;\n      this.scroller = window;\n      this.disableScroll();\n    } else {\n      this.element = this.manager.stage.container;\n      this.scroller = this.element;\n      this.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n    }\n\n    // this.overflow = this.manager.overflow;\n\n    // set lookahead offset to page width\n    this.manager.settings.offset = this.layout.width;\n    this.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n    this.isVertical = this.manager.settings.axis === \"vertical\";\n\n    // disable snapping if not paginated or axis in not horizontal\n    if (!this.manager.isPaginated || this.isVertical) {\n      return;\n    }\n    this.touchCanceler = false;\n    this.resizeCanceler = false;\n    this.snapping = false;\n    this.scrollLeft;\n    this.scrollTop;\n    this.startTouchX = undefined;\n    this.startTouchY = undefined;\n    this.startTime = undefined;\n    this.endTouchX = undefined;\n    this.endTouchY = undefined;\n    this.endTime = undefined;\n    this.addListeners();\n  }\n  supportsTouch() {\n    if ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch) {\n      return true;\n    }\n    return false;\n  }\n  disableScroll() {\n    this.element.style.overflow = \"hidden\";\n  }\n  enableScroll() {\n    this.element.style.overflow = \"\";\n  }\n  addListeners() {\n    this._onResize = this.onResize.bind(this);\n    window.addEventListener('resize', this._onResize);\n    this._onScroll = this.onScroll.bind(this);\n    this.scroller.addEventListener('scroll', this._onScroll);\n    this._onTouchStart = this.onTouchStart.bind(this);\n    this.scroller.addEventListener('touchstart', this._onTouchStart, {\n      passive: true\n    });\n    this.on('touchstart', this._onTouchStart);\n    this._onTouchMove = this.onTouchMove.bind(this);\n    this.scroller.addEventListener('touchmove', this._onTouchMove, {\n      passive: true\n    });\n    this.on('touchmove', this._onTouchMove);\n    this._onTouchEnd = this.onTouchEnd.bind(this);\n    this.scroller.addEventListener('touchend', this._onTouchEnd, {\n      passive: true\n    });\n    this.on('touchend', this._onTouchEnd);\n    this._afterDisplayed = this.afterDisplayed.bind(this);\n    this.manager.on(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n  }\n  removeListeners() {\n    window.removeEventListener('resize', this._onResize);\n    this._onResize = undefined;\n    this.scroller.removeEventListener('scroll', this._onScroll);\n    this._onScroll = undefined;\n    this.scroller.removeEventListener('touchstart', this._onTouchStart, {\n      passive: true\n    });\n    this.off('touchstart', this._onTouchStart);\n    this._onTouchStart = undefined;\n    this.scroller.removeEventListener('touchmove', this._onTouchMove, {\n      passive: true\n    });\n    this.off('touchmove', this._onTouchMove);\n    this._onTouchMove = undefined;\n    this.scroller.removeEventListener('touchend', this._onTouchEnd, {\n      passive: true\n    });\n    this.off('touchend', this._onTouchEnd);\n    this._onTouchEnd = undefined;\n    this.manager.off(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n    this._afterDisplayed = undefined;\n  }\n  afterDisplayed(view) {\n    let contents = view.contents;\n    [\"touchstart\", \"touchmove\", \"touchend\"].forEach(e => {\n      contents.on(e, ev => this.triggerViewEvent(ev, contents));\n    });\n  }\n  triggerViewEvent(e, contents) {\n    this.emit(e.type, e, contents);\n  }\n  onScroll(e) {\n    this.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n    this.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n  }\n  onResize(e) {\n    this.resizeCanceler = true;\n  }\n  onTouchStart(e) {\n    let {\n      screenX,\n      screenY\n    } = e.touches[0];\n    if (this.fullsize) {\n      this.enableScroll();\n    }\n    this.touchCanceler = true;\n    if (!this.startTouchX) {\n      this.startTouchX = screenX;\n      this.startTouchY = screenY;\n      this.startTime = this.now();\n    }\n    this.endTouchX = screenX;\n    this.endTouchY = screenY;\n    this.endTime = this.now();\n  }\n  onTouchMove(e) {\n    let {\n      screenX,\n      screenY\n    } = e.touches[0];\n    let deltaY = Math.abs(screenY - this.endTouchY);\n    this.touchCanceler = true;\n    if (!this.fullsize && deltaY < 10) {\n      this.element.scrollLeft -= screenX - this.endTouchX;\n    }\n    this.endTouchX = screenX;\n    this.endTouchY = screenY;\n    this.endTime = this.now();\n  }\n  onTouchEnd(e) {\n    if (this.fullsize) {\n      this.disableScroll();\n    }\n    this.touchCanceler = false;\n    let swipped = this.wasSwiped();\n    if (swipped !== 0) {\n      this.snap(swipped);\n    } else {\n      this.snap();\n    }\n    this.startTouchX = undefined;\n    this.startTouchY = undefined;\n    this.startTime = undefined;\n    this.endTouchX = undefined;\n    this.endTouchY = undefined;\n    this.endTime = undefined;\n  }\n  wasSwiped() {\n    let snapWidth = this.layout.pageWidth * this.layout.divisor;\n    let distance = this.endTouchX - this.startTouchX;\n    let absolute = Math.abs(distance);\n    let time = this.endTime - this.startTime;\n    let velocity = distance / time;\n    let minVelocity = this.settings.minVelocity;\n    if (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n      return 0;\n    }\n    if (velocity > minVelocity) {\n      // previous\n      return -1;\n    } else if (velocity < -minVelocity) {\n      // next\n      return 1;\n    }\n  }\n  needsSnap() {\n    let left = this.scrollLeft;\n    let snapWidth = this.layout.pageWidth * this.layout.divisor;\n    return left % snapWidth !== 0;\n  }\n  snap() {\n    let howMany = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let left = this.scrollLeft;\n    let snapWidth = this.layout.pageWidth * this.layout.divisor;\n    let snapTo = Math.round(left / snapWidth) * snapWidth;\n    if (howMany) {\n      snapTo += howMany * snapWidth;\n    }\n    return this.smoothScrollTo(snapTo);\n  }\n  smoothScrollTo(destination) {\n    const deferred = new defer();\n    const start = this.scrollLeft;\n    const startTime = this.now();\n    const duration = this.settings.duration;\n    const easing = this.settings.easing;\n    this.snapping = true;\n\n    // add animation loop\n    function tick() {\n      const now = this.now();\n      const time = Math.min(1, (now - startTime) / duration);\n      const timeFunction = easing(time);\n      if (this.touchCanceler || this.resizeCanceler) {\n        this.resizeCanceler = false;\n        this.snapping = false;\n        deferred.resolve();\n        return;\n      }\n      if (time < 1) {\n        window.requestAnimationFrame(tick.bind(this));\n        this.scrollTo(start + (destination - start) * time, 0);\n      } else {\n        this.scrollTo(destination, 0);\n        this.snapping = false;\n        deferred.resolve();\n      }\n    }\n    tick.call(this);\n    return deferred.promise;\n  }\n  scrollTo() {\n    let left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (this.fullsize) {\n      window.scroll(left, top);\n    } else {\n      this.scroller.scrollLeft = left;\n      this.scroller.scrollTop = top;\n    }\n  }\n  now() {\n    return 'now' in window.performance ? performance.now() : new Date().getTime();\n  }\n  destroy() {\n    if (!this.scroller) {\n      return;\n    }\n    if (this.fullsize) {\n      this.enableScroll();\n    }\n    this.removeListeners();\n    this.scroller = undefined;\n  }\n}\nEventEmitter(Snap.prototype);\nexport default Snap;","map":{"version":3,"names":["extend","defer","requestAnimationFrame","prefixed","EVENTS","DOM_EVENTS","EventEmitter","PI_D2","Math","PI","EASING_EQUATIONS","easeOutSine","pos","sin","easeInOutSine","cos","easeInOutQuint","pow","easeInCubic","Snap","constructor","manager","options","settings","duration","minVelocity","minDistance","easing","supportsTouch","setup","layout","fullsize","element","stage","scroller","window","disableScroll","container","style","offset","width","afterScrolledTimeout","isVertical","axis","isPaginated","touchCanceler","resizeCanceler","snapping","scrollLeft","scrollTop","startTouchX","undefined","startTouchY","startTime","endTouchX","endTouchY","endTime","addListeners","DocumentTouch","document","overflow","enableScroll","_onResize","onResize","bind","addEventListener","_onScroll","onScroll","_onTouchStart","onTouchStart","passive","on","_onTouchMove","onTouchMove","_onTouchEnd","onTouchEnd","_afterDisplayed","afterDisplayed","MANAGERS","ADDED","removeListeners","removeEventListener","off","view","contents","forEach","e","ev","triggerViewEvent","emit","type","scrollX","scrollY","screenX","screenY","touches","now","deltaY","abs","swipped","wasSwiped","snap","snapWidth","pageWidth","divisor","distance","absolute","time","velocity","needsSnap","left","howMany","snapTo","round","smoothScrollTo","destination","deferred","start","tick","min","timeFunction","resolve","scrollTo","call","promise","top","scroll","performance","Date","getTime","destroy","prototype"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/node_modules/epubjs/src/managers/helpers/snap.js"],"sourcesContent":["import {extend, defer, requestAnimationFrame, prefixed} from \"../../utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"../../utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = (Math.PI / 2);\nconst EASING_EQUATIONS = {\n\t\teaseOutSine: function (pos) {\n\t\t\t\treturn Math.sin(pos * PI_D2);\n\t\t},\n\t\teaseInOutSine: function (pos) {\n\t\t\t\treturn (-0.5 * (Math.cos(Math.PI * pos) - 1));\n\t\t},\n\t\teaseInOutQuint: function (pos) {\n\t\t\t\tif ((pos /= 0.5) < 1) {\n\t\t\t\t\t\treturn 0.5 * Math.pow(pos, 5);\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (Math.pow((pos - 2), 5) + 2);\n\t\t},\n\t\teaseInCubic: function(pos) {\n\t\t\treturn Math.pow(pos, 3);\n  \t}\n};\n\nclass Snap {\n\tconstructor(manager, options) {\n\n\t\tthis.settings = extend({\n\t\t\tduration: 80,\n\t\t\tminVelocity: 0.2,\n\t\t\tminDistance: 10,\n\t\t\teasing: EASING_EQUATIONS['easeInCubic']\n\t\t}, options || {});\n\n\t\tthis.supportsTouch = this.supportsTouch();\n\n\t\tif (this.supportsTouch) {\n\t\t\tthis.setup(manager);\n\t\t}\n\t}\n\n\tsetup(manager) {\n\t\tthis.manager = manager;\n\n\t\tthis.layout = this.manager.layout;\n\n\t\tthis.fullsize = this.manager.settings.fullsize;\n\t\tif (this.fullsize) {\n\t\t\tthis.element = this.manager.stage.element;\n\t\t\tthis.scroller = window;\n\t\t\tthis.disableScroll();\n\t\t} else {\n\t\t\tthis.element = this.manager.stage.container;\n\t\t\tthis.scroller = this.element;\n\t\t\tthis.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n\t\t}\n\n\t\t// this.overflow = this.manager.overflow;\n\n\t\t// set lookahead offset to page width\n\t\tthis.manager.settings.offset = this.layout.width;\n\t\tthis.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n\n\t\tthis.isVertical = this.manager.settings.axis === \"vertical\";\n\n\t\t// disable snapping if not paginated or axis in not horizontal\n\t\tif (!this.manager.isPaginated || this.isVertical) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\t\tthis.resizeCanceler = false;\n\t\tthis.snapping = false;\n\n\n\t\tthis.scrollLeft;\n\t\tthis.scrollTop;\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\n\t\tthis.addListeners();\n\t}\n\n\tsupportsTouch() {\n\t\tif (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdisableScroll() {\n\t\tthis.element.style.overflow = \"hidden\";\n\t}\n\n\tenableScroll() {\n\t\tthis.element.style.overflow = \"\";\n\t}\n\n\taddListeners() {\n\t\tthis._onResize = this.onResize.bind(this);\n\t\twindow.addEventListener('resize', this._onResize);\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tthis.scroller.addEventListener('scroll', this._onScroll);\n\n\t\tthis._onTouchStart = this.onTouchStart.bind(this);\n\t\tthis.scroller.addEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.on('touchstart', this._onTouchStart);\n\n\t\tthis._onTouchMove = this.onTouchMove.bind(this);\n\t\tthis.scroller.addEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.on('touchmove', this._onTouchMove);\n\n\t\tthis._onTouchEnd = this.onTouchEnd.bind(this);\n\t\tthis.scroller.addEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.on('touchend', this._onTouchEnd);\n\n\t\tthis._afterDisplayed = this.afterDisplayed.bind(this);\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t}\n\n\tremoveListeners() {\n\t\twindow.removeEventListener('resize', this._onResize);\n\t\tthis._onResize = undefined;\n\n\t\tthis.scroller.removeEventListener('scroll', this._onScroll);\n\t\tthis._onScroll = undefined;\n\n\t\tthis.scroller.removeEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.off('touchstart', this._onTouchStart);\n\t\tthis._onTouchStart = undefined;\n\n\t\tthis.scroller.removeEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.off('touchmove', this._onTouchMove);\n\t\tthis._onTouchMove = undefined;\n\n\t\tthis.scroller.removeEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.off('touchend', this._onTouchEnd);\n\t\tthis._onTouchEnd = undefined;\n\n\t\tthis.manager.off(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t\tthis._afterDisplayed = undefined;\n\t}\n\n\tafterDisplayed(view) {\n\t\tlet contents = view.contents;\n\t\t[\"touchstart\", \"touchmove\", \"touchend\"].forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\t}\n\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\tonScroll(e) {\n\t\tthis.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n\t\tthis.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n\t}\n\n\tonResize(e) {\n\t\tthis.resizeCanceler = true;\n\t}\n\n\tonTouchStart(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = true;\n\n\t\tif (!this.startTouchX) {\n\t\t\tthis.startTouchX = screenX;\n\t\t\tthis.startTouchY = screenY;\n\t\t\tthis.startTime = this.now();\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchMove(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\t\tlet deltaY = Math.abs(screenY - this.endTouchY);\n\n\t\tthis.touchCanceler = true;\n\n\n\t\tif (!this.fullsize && deltaY < 10) {\n\t\t\tthis.element.scrollLeft -= screenX - this.endTouchX;\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchEnd(e) {\n\t\tif (this.fullsize) {\n\t\t\tthis.disableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\n\t\tlet swipped = this.wasSwiped();\n\n\t\tif (swipped !== 0) {\n\t\t\tthis.snap(swipped);\n\t\t} else {\n\t\t\tthis.snap();\n\t\t}\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\t}\n\n\twasSwiped() {\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet distance = (this.endTouchX - this.startTouchX);\n\t\tlet absolute = Math.abs(distance);\n\t\tlet time = this.endTime - this.startTime;\n\t\tlet velocity = (distance / time);\n\t\tlet minVelocity = this.settings.minVelocity;\n\n\t\tif (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (velocity > minVelocity) {\n\t\t\t// previous\n\t\t\treturn -1;\n\t\t} else if (velocity < -minVelocity) {\n\t\t\t// next\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\tneedsSnap() {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\treturn (left % snapWidth) !== 0;\n\t}\n\n\tsnap(howMany=0) {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet snapTo = Math.round(left / snapWidth) * snapWidth;\n\n\t\tif (howMany) {\n\t\t\tsnapTo += (howMany * snapWidth);\n\t\t}\n\n\t\treturn this.smoothScrollTo(snapTo);\n\t}\n\n\tsmoothScrollTo(destination) {\n\t\tconst deferred = new defer();\n\t\tconst start = this.scrollLeft;\n\t\tconst startTime = this.now();\n\n\t\tconst duration = this.settings.duration;\n\t\tconst easing = this.settings.easing;\n\n\t\tthis.snapping = true;\n\n\t\t// add animation loop\n\t\tfunction tick() {\n\t\t\tconst now = this.now();\n\t\t\tconst time = Math.min(1, ((now - startTime) / duration));\n\t\t\tconst timeFunction = easing(time);\n\n\n\t\t\tif (this.touchCanceler || this.resizeCanceler) {\n\t\t\t\tthis.resizeCanceler = false;\n\t\t\t\tthis.snapping = false;\n\t\t\t\tdeferred.resolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (time < 1) {\n\t\t\t\t\twindow.requestAnimationFrame(tick.bind(this));\n\t\t\t\t\tthis.scrollTo(start + ((destination - start) * time), 0);\n\t\t\t} else {\n\t\t\t\t\tthis.scrollTo(destination, 0);\n\t\t\t\t\tthis.snapping = false;\n\t\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t}\n\n\t\ttick.call(this);\n\n\t\treturn deferred.promise;\n\t}\n\n\tscrollTo(left=0, top=0) {\n\t\tif (this.fullsize) {\n\t\t\twindow.scroll(left, top);\n\t\t} else {\n\t\t\tthis.scroller.scrollLeft = left;\n\t\t\tthis.scroller.scrollTop = top;\n\t\t}\n\t}\n\n\tnow() {\n\t\treturn ('now' in window.performance) ? performance.now() : new Date().getTime();\n\t}\n\n\tdestroy() {\n\t\tif (!this.scroller) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.removeListeners();\n\n\t\tthis.scroller = undefined;\n\t}\n}\n\nEventEmitter(Snap.prototype);\n\nexport default Snap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}