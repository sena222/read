{"ast":null,"code":"import _classCallCheck from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/parallels/Downloads/read/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport EpubCFI from \"./epubcfi\";\nimport { qs, qsa, querySelectorByType, indexOfSorted, locationOf } from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nvar PageList = /*#__PURE__*/function () {\n  function PageList(xml) {\n    _classCallCheck(this, PageList);\n    this.pages = [];\n    this.locations = [];\n    this.epubcfi = new EpubCFI();\n    this.firstPage = 0;\n    this.lastPage = 0;\n    this.totalPages = 0;\n    this.toc = undefined;\n    this.ncx = undefined;\n    if (xml) {\n      this.pageList = this.parse(xml);\n    }\n    if (this.pageList && this.pageList.length) {\n      this.process(this.pageList);\n    }\n  }\n\n  /**\n   * Parse PageList Xml\n   * @param  {document} xml\n   */\n  _createClass(PageList, [{\n    key: \"parse\",\n    value: function parse(xml) {\n      var html = qs(xml, \"html\");\n      var ncx = qs(xml, \"ncx\");\n      if (html) {\n        return this.parseNav(xml);\n      } else if (ncx) {\n        return this.parseNcx(xml);\n      }\n    }\n\n    /**\n     * Parse a Nav PageList\n     * @private\n     * @param  {node} navHtml\n     * @return {PageList.item[]} list\n     */\n  }, {\n    key: \"parseNav\",\n    value: function parseNav(navHtml) {\n      var navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n      var navItems = navElement ? qsa(navElement, \"li\") : [];\n      var length = navItems.length;\n      var i;\n      var list = [];\n      var item;\n      if (!navItems || length === 0) return list;\n      for (i = 0; i < length; ++i) {\n        item = this.item(navItems[i]);\n        list.push(item);\n      }\n      return list;\n    }\n  }, {\n    key: \"parseNcx\",\n    value: function parseNcx(navXml) {\n      var list = [];\n      var i = 0;\n      var item;\n      var pageList;\n      var pageTargets;\n      var length = 0;\n      pageList = qs(navXml, \"pageList\");\n      if (!pageList) return list;\n      pageTargets = qsa(pageList, \"pageTarget\");\n      length = pageTargets.length;\n      if (!pageTargets || pageTargets.length === 0) {\n        return list;\n      }\n      for (i = 0; i < length; ++i) {\n        item = this.ncxItem(pageTargets[i]);\n        list.push(item);\n      }\n      return list;\n    }\n  }, {\n    key: \"ncxItem\",\n    value: function ncxItem(item) {\n      var navLabel = qs(item, \"navLabel\");\n      var navLabelText = qs(navLabel, \"text\");\n      var pageText = navLabelText.textContent;\n      var content = qs(item, \"content\");\n      var href = content.getAttribute(\"src\");\n      var page = parseInt(pageText, 10);\n      return {\n        \"href\": href,\n        \"page\": page\n      };\n    }\n\n    /**\n     * Page List Item\n     * @private\n     * @param  {node} item\n     * @return {object} pageListItem\n     */\n  }, {\n    key: \"item\",\n    value: function item(_item) {\n      var content = qs(_item, \"a\"),\n        href = content.getAttribute(\"href\") || \"\",\n        text = content.textContent || \"\",\n        page = parseInt(text),\n        isCfi = href.indexOf(\"epubcfi\"),\n        split,\n        packageUrl,\n        cfi;\n      if (isCfi != -1) {\n        split = href.split(\"#\");\n        packageUrl = split[0];\n        cfi = split.length > 1 ? split[1] : false;\n        return {\n          \"cfi\": cfi,\n          \"href\": href,\n          \"packageUrl\": packageUrl,\n          \"page\": page\n        };\n      } else {\n        return {\n          \"href\": href,\n          \"page\": page\n        };\n      }\n    }\n\n    /**\n     * Process pageList items\n     * @private\n     * @param  {array} pageList\n     */\n  }, {\n    key: \"process\",\n    value: function process(pageList) {\n      pageList.forEach(function (item) {\n        this.pages.push(item.page);\n        if (item.cfi) {\n          this.locations.push(item.cfi);\n        }\n      }, this);\n      this.firstPage = parseInt(this.pages[0]);\n      this.lastPage = parseInt(this.pages[this.pages.length - 1]);\n      this.totalPages = this.lastPage - this.firstPage;\n    }\n\n    /**\n     * Get a PageList result from a EpubCFI\n     * @param  {string} cfi EpubCFI String\n     * @return {number} page\n     */\n  }, {\n    key: \"pageFromCfi\",\n    value: function pageFromCfi(cfi) {\n      var pg = -1;\n\n      // Check if the pageList has not been set yet\n      if (this.locations.length === 0) {\n        return -1;\n      }\n\n      // TODO: check if CFI is valid?\n\n      // check if the cfi is in the location list\n      // var index = this.locations.indexOf(cfi);\n      var index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n      if (index != -1) {\n        pg = this.pages[index];\n      } else {\n        // Otherwise add it to the list of locations\n        // Insert it in the correct position in the locations page\n        //index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n        index = locationOf(cfi, this.locations, this.epubcfi.compare);\n        // Get the page at the location just before the new one, or return the first\n        pg = index - 1 >= 0 ? this.pages[index - 1] : this.pages[0];\n        if (pg !== undefined) {\n          // Add the new page in so that the locations and page array match up\n          //this.pages.splice(index, 0, pg);\n        } else {\n          pg = -1;\n        }\n      }\n      return pg;\n    }\n\n    /**\n     * Get an EpubCFI from a Page List Item\n     * @param  {string | number} pg\n     * @return {string} cfi\n     */\n  }, {\n    key: \"cfiFromPage\",\n    value: function cfiFromPage(pg) {\n      var cfi = -1;\n      // check that pg is an int\n      if (typeof pg != \"number\") {\n        pg = parseInt(pg);\n      }\n\n      // check if the cfi is in the page list\n      // Pages could be unsorted.\n      var index = this.pages.indexOf(pg);\n      if (index != -1) {\n        cfi = this.locations[index];\n      }\n      // TODO: handle pages not in the list\n      return cfi;\n    }\n\n    /**\n     * Get a Page from Book percentage\n     * @param  {number} percent\n     * @return {number} page\n     */\n  }, {\n    key: \"pageFromPercentage\",\n    value: function pageFromPercentage(percent) {\n      var pg = Math.round(this.totalPages * percent);\n      return pg;\n    }\n\n    /**\n     * Returns a value between 0 - 1 corresponding to the location of a page\n     * @param  {number} pg the page\n     * @return {number} percentage\n     */\n  }, {\n    key: \"percentageFromPage\",\n    value: function percentageFromPage(pg) {\n      var percentage = (pg - this.firstPage) / this.totalPages;\n      return Math.round(percentage * 1000) / 1000;\n    }\n\n    /**\n     * Returns a value between 0 - 1 corresponding to the location of a cfi\n     * @param  {string} cfi EpubCFI String\n     * @return {number} percentage\n     */\n  }, {\n    key: \"percentageFromCfi\",\n    value: function percentageFromCfi(cfi) {\n      var pg = this.pageFromCfi(cfi);\n      var percentage = this.percentageFromPage(pg);\n      return percentage;\n    }\n\n    /**\n     * Destroy\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.pages = undefined;\n      this.locations = undefined;\n      this.epubcfi = undefined;\n      this.pageList = undefined;\n      this.toc = undefined;\n      this.ncx = undefined;\n    }\n  }]);\n  return PageList;\n}();\nexport default PageList;","map":{"version":3,"names":["EpubCFI","qs","qsa","querySelectorByType","indexOfSorted","locationOf","PageList","xml","pages","locations","epubcfi","firstPage","lastPage","totalPages","toc","undefined","ncx","pageList","parse","length","process","html","parseNav","parseNcx","navHtml","navElement","navItems","i","list","item","push","navXml","pageTargets","ncxItem","navLabel","navLabelText","pageText","textContent","content","href","getAttribute","page","parseInt","text","isCfi","indexOf","split","packageUrl","cfi","forEach","pg","index","compare","percent","Math","round","percentage","pageFromCfi","percentageFromPage"],"sources":["/home/parallels/Downloads/read/node_modules/epubjs/src/pagelist.js"],"sourcesContent":["import EpubCFI from \"./epubcfi\";\nimport {\n\tqs,\n\tqsa,\n\tquerySelectorByType,\n\tindexOfSorted,\n\tlocationOf\n} from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n\tconstructor(xml) {\n\t\tthis.pages = [];\n\t\tthis.locations = [];\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.firstPage = 0;\n\t\tthis.lastPage = 0;\n\t\tthis.totalPages = 0;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\n\t\tif (xml) {\n\t\t\tthis.pageList = this.parse(xml);\n\t\t}\n\n\t\tif(this.pageList && this.pageList.length) {\n\t\t\tthis.process(this.pageList);\n\t\t}\n\t}\n\n\t/**\n\t * Parse PageList Xml\n\t * @param  {document} xml\n\t */\n\tparse(xml) {\n\t\tvar html = qs(xml, \"html\");\n\t\tvar ncx = qs(xml, \"ncx\");\n\n\t\tif(html) {\n\t\t\treturn this.parseNav(xml);\n\t\t} else if(ncx){\n\t\t\treturn this.parseNcx(xml);\n\t\t}\n\n\t}\n\n\t/**\n\t * Parse a Nav PageList\n\t * @private\n\t * @param  {node} navHtml\n\t * @return {PageList.item[]} list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.item(navItems[i]);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tparseNcx(navXml) {\n\t\tvar list = [];\n\t\tvar i = 0;\n\t\tvar item;\n\t\tvar pageList;\n\t\tvar pageTargets;\n\t\tvar length = 0;\n\n\t\tpageList = qs(navXml, \"pageList\");\n\t\tif (!pageList) return list;\n\n\t\tpageTargets = qsa(pageList, \"pageTarget\");\n\t\tlength = pageTargets.length;\n\n\t\tif (!pageTargets || pageTargets.length === 0) {\n\t\t\treturn list;\n\t\t}\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.ncxItem(pageTargets[i]);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tncxItem(item) {\n\t\tvar navLabel = qs(item, \"navLabel\");\n\t\tvar navLabelText = qs(navLabel, \"text\");\n\t\tvar pageText = navLabelText.textContent;\n\t\tvar content = qs(item, \"content\");\n\n\t\tvar href = content.getAttribute(\"src\");\n\t\tvar page = parseInt(pageText, 10);\n\n\t\treturn {\n\t\t\t\"href\": href,\n\t\t\t\"page\": page,\n\t\t};\n\t}\n\n\t/**\n\t * Page List Item\n\t * @private\n\t * @param  {node} item\n\t * @return {object} pageListItem\n\t */\n\titem(item){\n\t\tvar content = qs(item, \"a\"),\n\t\t\t\thref = content.getAttribute(\"href\") || \"\",\n\t\t\t\ttext = content.textContent || \"\",\n\t\t\t\tpage = parseInt(text),\n\t\t\t\tisCfi = href.indexOf(\"epubcfi\"),\n\t\t\t\tsplit,\n\t\t\t\tpackageUrl,\n\t\t\t\tcfi;\n\n\t\tif(isCfi != -1) {\n\t\t\tsplit = href.split(\"#\");\n\t\t\tpackageUrl = split[0];\n\t\t\tcfi = split.length > 1 ? split[1] : false;\n\t\t\treturn {\n\t\t\t\t\"cfi\" : cfi,\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"packageUrl\" : packageUrl,\n\t\t\t\t\"page\" : page\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"page\" : page\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Process pageList items\n\t * @private\n\t * @param  {array} pageList\n\t */\n\tprocess(pageList){\n\t\tpageList.forEach(function(item){\n\t\t\tthis.pages.push(item.page);\n\t\t\tif (item.cfi) {\n\t\t\t\tthis.locations.push(item.cfi);\n\t\t\t}\n\t\t}, this);\n\t\tthis.firstPage = parseInt(this.pages[0]);\n\t\tthis.lastPage = parseInt(this.pages[this.pages.length-1]);\n\t\tthis.totalPages = this.lastPage - this.firstPage;\n\t}\n\n\t/**\n\t * Get a PageList result from a EpubCFI\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} page\n\t */\n\tpageFromCfi(cfi){\n\t\tvar pg = -1;\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// TODO: check if CFI is valid?\n\n\t\t// check if the cfi is in the location list\n\t\t// var index = this.locations.indexOf(cfi);\n\t\tvar index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n\t\tif(index != -1) {\n\t\t\tpg = this.pages[index];\n\t\t} else {\n\t\t\t// Otherwise add it to the list of locations\n\t\t\t// Insert it in the correct position in the locations page\n\t\t\t//index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n\t\t\tindex = locationOf(cfi, this.locations, this.epubcfi.compare);\n\t\t\t// Get the page at the location just before the new one, or return the first\n\t\t\tpg = index-1 >= 0 ? this.pages[index-1] : this.pages[0];\n\t\t\tif(pg !== undefined) {\n\t\t\t\t// Add the new page in so that the locations and page array match up\n\t\t\t\t//this.pages.splice(index, 0, pg);\n\t\t\t} else {\n\t\t\t\tpg = -1;\n\t\t\t}\n\n\t\t}\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Page List Item\n\t * @param  {string | number} pg\n\t * @return {string} cfi\n\t */\n\tcfiFromPage(pg){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof pg != \"number\"){\n\t\t\tpg = parseInt(pg);\n\t\t}\n\n\t\t// check if the cfi is in the page list\n\t\t// Pages could be unsorted.\n\t\tvar index = this.pages.indexOf(pg);\n\t\tif(index != -1) {\n\t\t\tcfi = this.locations[index];\n\t\t}\n\t\t// TODO: handle pages not in the list\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get a Page from Book percentage\n\t * @param  {number} percent\n\t * @return {number} page\n\t */\n\tpageFromPercentage(percent){\n\t\tvar pg = Math.round(this.totalPages * percent);\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a page\n\t * @param  {number} pg the page\n\t * @return {number} percentage\n\t */\n\tpercentageFromPage(pg){\n\t\tvar percentage = (pg - this.firstPage) / this.totalPages;\n\t\treturn Math.round(percentage * 1000) / 1000;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a cfi\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} percentage\n\t */\n\tpercentageFromCfi(cfi){\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\tvar percentage = this.percentageFromPage(pg);\n\t\treturn percentage;\n\t}\n\n\t/**\n\t * Destroy\n\t */\n\tdestroy() {\n\t\tthis.pages = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.pageList = undefined;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\t}\n}\n\nexport default PageList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}