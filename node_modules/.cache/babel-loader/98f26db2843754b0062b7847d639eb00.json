{"ast":null,"code":"var _jsxFileName = \"/home/parallels/Downloads/react-epub-viewer-demo/src/components/option/Dropdown.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport styled from 'styled-components';\n// components\nimport OptionWrapper from 'components/option/OptionWrapper';\nimport OptionTitle from 'components/option/OptionTitle';\nimport DropdownValue from 'components/option/DropdownValue';\nimport DropdownItemWrapper from 'components/option/DropdownItemWrapper';\nimport DropdownItem from 'components/option/DropdownItem';\n// types\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dropdown = _ref => {\n  _s();\n  let {\n    title,\n    defaultValue,\n    valueList,\n    onSelect\n  } = _ref;\n  const ref = useRef(null);\n  const [visible, setVisible] = useState(false);\n  const value = defaultValue === \"Origin\" ? \"Original\" : defaultValue;\n\n  /** Toggle dropdown */\n  const onToggle = useCallback(() => setVisible(!visible), [visible]);\n\n  /** Close dropdown */\n  const onClose = useCallback(e => {\n    if (!ref || !ref.current) return;\n    if (![...e.path].includes(ref.current)) {\n      onToggle();\n    }\n  }, [ref, onToggle]);\n  const Items = valueList.map(font => /*#__PURE__*/_jsxDEV(DropdownItem, {\n    value: font,\n    onClick: () => {\n      onSelect(font);\n      onToggle();\n    }\n  }, font, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this));\n\n  /** Register dropdown close event */\n  useEffect(() => {\n    if (visible) {\n      document.addEventListener('click', onClose);\n    } else {\n      document.removeEventListener('click', onClose);\n    }\n    return () => {\n      document.removeEventListener('click', onClose);\n    };\n  }, [visible, onClose]);\n  return /*#__PURE__*/_jsxDEV(OptionWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(OptionTitle, {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DropdownWrapper, {\n      ref: ref,\n      children: [/*#__PURE__*/_jsxDEV(DropdownValue, {\n        value: value,\n        isDropdown: visible,\n        onClick: onToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DropdownItemWrapper, {\n        show: visible,\n        children: Items\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(Dropdown, \"T5LggNSNVegWYFaGXf/Z/GMO8iA=\");\n_c = Dropdown;\nconst DropdownWrapper = styled.div`\n  position: relative;\n`;\n_c2 = DropdownWrapper;\nexport default Dropdown;\nvar _c, _c2;\n$RefreshReg$(_c, \"Dropdown\");\n$RefreshReg$(_c2, \"DropdownWrapper\");","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","styled","OptionWrapper","OptionTitle","DropdownValue","DropdownItemWrapper","DropdownItem","Dropdown","title","defaultValue","valueList","onSelect","ref","visible","setVisible","value","onToggle","onClose","e","current","path","includes","Items","map","font","document","addEventListener","removeEventListener","DropdownWrapper","div"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/src/components/option/Dropdown.tsx"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from 'react'\nimport styled from 'styled-components'\n// components\nimport OptionWrapper from 'components/option/OptionWrapper'\nimport OptionTitle from 'components/option/OptionTitle'\nimport DropdownValue from 'components/option/DropdownValue'\nimport DropdownItemWrapper from 'components/option/DropdownItemWrapper'\nimport DropdownItem from 'components/option/DropdownItem'\n// types\nimport { BookFontFamily } from 'types/book'\n\nconst Dropdown = ({\n  title,\n  defaultValue,\n  valueList,\n  onSelect\n}: Props) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [visible, setVisible] = useState<boolean>(false);\n  const value = defaultValue === \"Origin\" ? \"Original\" : defaultValue;\n  \n  /** Toggle dropdown */\n  const onToggle = useCallback(() => setVisible(!visible), [visible]);\n\n  /** Close dropdown */\n  const onClose = useCallback((e: any) => {\n    if (!ref || !ref.current) return;\n    if (![...e.path].includes(ref.current)) {\n      onToggle();\n    }\n  }, [ref, onToggle]);\n\n  const Items = valueList.map(font => \n    <DropdownItem key={font} value={font} onClick={() => {\n      onSelect(font);\n      onToggle();\n    }} />\n  );\n\n  /** Register dropdown close event */\n  useEffect(() => {\n    if (visible) {\n      document.addEventListener('click', onClose);\n    } else {\n      document.removeEventListener('click', onClose);\n    }\n    return () => {\n      document.removeEventListener('click', onClose);\n    }\n  }, [visible, onClose]);\n\n  return (\n    <OptionWrapper>\n      <OptionTitle>{title}</OptionTitle>\n\n      <DropdownWrapper ref={ref}>\n        <DropdownValue value={value} \n                       isDropdown={visible} \n                       onClick={onToggle} />\n        <DropdownItemWrapper show={visible}>\n          {Items}\n        </DropdownItemWrapper>\n      </DropdownWrapper>\n    </OptionWrapper>\n  );\n}\n\nconst DropdownWrapper = styled.div`\n  position: relative;\n`;\n\ninterface Props {\n  title: string;\n  defaultValue: BookFontFamily;\n  valueList: BookFontFamily[];\n  onSelect: (font: BookFontFamily) => void;\n}\n\nexport default Dropdown"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AAChE,OAAOC,MAAM,MAAM,mBAAmB;AACtC;AACA,OAAOC,aAAa,MAAM,iCAAiC;AAC3D,OAAOC,WAAW,MAAM,+BAA+B;AACvD,OAAOC,aAAa,MAAM,iCAAiC;AAC3D,OAAOC,mBAAmB,MAAM,uCAAuC;AACvE,OAAOC,YAAY,MAAM,gCAAgC;AACzD;AAAA;AAGA,MAAMC,QAAQ,GAAG,QAKJ;EAAA;EAAA,IALK;IAChBC,KAAK;IACLC,YAAY;IACZC,SAAS;IACTC;EACK,CAAC;EACN,MAAMC,GAAG,GAAGb,MAAM,CAAwB,IAAI,CAAC;EAC/C,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAU,KAAK,CAAC;EACtD,MAAMkB,KAAK,GAAGN,YAAY,KAAK,QAAQ,GAAG,UAAU,GAAGA,YAAY;;EAEnE;EACA,MAAMO,QAAQ,GAAGhB,WAAW,CAAC,MAAMc,UAAU,CAAC,CAACD,OAAO,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;;EAEnE;EACA,MAAMI,OAAO,GAAGjB,WAAW,CAAEkB,CAAM,IAAK;IACtC,IAAI,CAACN,GAAG,IAAI,CAACA,GAAG,CAACO,OAAO,EAAE;IAC1B,IAAI,CAAC,CAAC,GAAGD,CAAC,CAACE,IAAI,CAAC,CAACC,QAAQ,CAACT,GAAG,CAACO,OAAO,CAAC,EAAE;MACtCH,QAAQ,EAAE;IACZ;EACF,CAAC,EAAE,CAACJ,GAAG,EAAEI,QAAQ,CAAC,CAAC;EAEnB,MAAMM,KAAK,GAAGZ,SAAS,CAACa,GAAG,CAACC,IAAI,iBAC9B,QAAC,YAAY;IAAY,KAAK,EAAEA,IAAK;IAAC,OAAO,EAAE,MAAM;MACnDb,QAAQ,CAACa,IAAI,CAAC;MACdR,QAAQ,EAAE;IACZ;EAAE,GAHiBQ,IAAI;IAAA;IAAA;IAAA;EAAA,QAGlB,CACN;;EAED;EACA1B,SAAS,CAAC,MAAM;IACd,IAAIe,OAAO,EAAE;MACXY,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAET,OAAO,CAAC;IAC7C,CAAC,MAAM;MACLQ,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEV,OAAO,CAAC;IAChD;IACA,OAAO,MAAM;MACXQ,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEV,OAAO,CAAC;IAChD,CAAC;EACH,CAAC,EAAE,CAACJ,OAAO,EAAEI,OAAO,CAAC,CAAC;EAEtB,oBACE,QAAC,aAAa;IAAA,wBACZ,QAAC,WAAW;MAAA,UAAET;IAAK;MAAA;MAAA;MAAA;IAAA,QAAe,eAElC,QAAC,eAAe;MAAC,GAAG,EAAEI,GAAI;MAAA,wBACxB,QAAC,aAAa;QAAC,KAAK,EAAEG,KAAM;QACb,UAAU,EAAEF,OAAQ;QACpB,OAAO,EAAEG;MAAS;QAAA;QAAA;QAAA;MAAA,QAAG,eACpC,QAAC,mBAAmB;QAAC,IAAI,EAAEH,OAAQ;QAAA,UAChCS;MAAK;QAAA;QAAA;QAAA;MAAA,QACc;IAAA;MAAA;MAAA;MAAA;IAAA,QACN;EAAA;IAAA;IAAA;IAAA;EAAA,QACJ;AAEpB,CAAC;AAAA,GAtDKf,QAAQ;AAAA,KAARA,QAAQ;AAwDd,MAAMqB,eAAe,GAAG3B,MAAM,CAAC4B,GAAI;AACnC;AACA,CAAC;AAAC,MAFID,eAAe;AAWrB,eAAerB,QAAQ;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module"}