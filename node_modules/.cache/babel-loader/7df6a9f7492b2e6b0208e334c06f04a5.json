{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compareCfi = exports.clashCfiRange = exports.cfiRangeSpliter = void 0;\nexports.debounce = debounce;\nexports.timeFormatter = exports.getSelectionPosition = exports.getParagraphCfi = exports.getNodefromCfi = void 0;\nvar _epubjs = require(\"epubjs\");\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e2) {\n          throw _e2;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e3) {\n      didErr = true;\n      err = _e3;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n/**\n * DateTime to `yyyy-mm-dd`\n * @param {Date} time \n */\nvar timeFormatter = function timeFormatter(time) {\n  var yyyy = time.getFullYear();\n  var mm = time.getMonth() + 1;\n  var dd = time.getDate();\n  var msg = \"\".concat(yyyy, \"-\").concat(mm, \"-\").concat(dd);\n  return msg;\n};\n/**\n * Comparison of two CFI sizes\n * - -1 : CFI 1 < CFI 2\n * - 0 : CFI 1 == CFI 2\n * - 1 : CFI 1 > CFI 2\n * @param cfi_1 CFI 1\n * @param cfi_2 CFI 2\n */\n\nexports.timeFormatter = timeFormatter;\nvar compareCfi = function compareCfi(cfi_1, cfi_2) {\n  var epubcfi = new _epubjs.EpubCFI();\n  return epubcfi.compare(cfi_1, cfi_2);\n};\n/**\n * Split CFI range into two starting CFI and ending CFI\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\n\nexports.compareCfi = compareCfi;\nvar cfiRangeSpliter = function cfiRangeSpliter(cfiRange) {\n  var content = cfiRange.slice(8, -1);\n  var _content$split = content.split(','),\n    _content$split2 = _slicedToArray(_content$split, 3),\n    origin = _content$split2[0],\n    start = _content$split2[1],\n    end = _content$split2[2];\n  if (!origin || !start || !end) return null;\n  var startCfi = \"epubcfi(\".concat(origin + start, \")\");\n  var endCfi = \"epubcfi(\".concat(origin + end, \")\");\n  return {\n    startCfi: startCfi,\n    endCfi: endCfi\n  };\n};\n/**\n * Whether the two CFI ranges nested\n * - true : Nested\n * - false : Not nested\n * - null : Invalid CFIRange\n * @param cfiRange1 First CFIRange\n * @param cfiRange2 Second CFIRange\n */\n\nexports.cfiRangeSpliter = cfiRangeSpliter;\nvar clashCfiRange = function clashCfiRange(baseCfiRange, targetCfiRange) {\n  var splitCfi1 = cfiRangeSpliter(baseCfiRange);\n  var splitCfi2 = cfiRangeSpliter(targetCfiRange);\n  if (!splitCfi1 || !splitCfi2) return null;\n  var s1 = splitCfi1.startCfi,\n    e1 = splitCfi1.endCfi;\n  var s2 = splitCfi2.startCfi,\n    e2 = splitCfi2.endCfi;\n  if (compareCfi(s2, s1) <= 0 && compareCfi(s1, e2) <= 0 || compareCfi(s2, e1) <= 0 && compareCfi(e1, e2) <= 0 || compareCfi(s1, s2) <= 0 && compareCfi(e2, e1) <= 0) {\n    return true;\n  }\n  return false;\n};\n/**\n * Extract paragraph CFI from CFIRange\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\n\nexports.clashCfiRange = clashCfiRange;\nvar getParagraphCfi = function getParagraphCfi(cfiRange) {\n  if (!cfiRange) return;\n  var content = cfiRange.slice(8, -1);\n  var _content$split3 = content.split(','),\n    _content$split4 = _slicedToArray(_content$split3, 3),\n    origin = _content$split4[0],\n    start = _content$split4[1],\n    end = _content$split4[2];\n  if (!origin || !start || !end) return null;\n  var cfi = \"epubcfi(\".concat(origin, \")\");\n  return cfi;\n};\n/**\n * Get specific DOM Element from CFI\n * - **â€» Warning**: Other Iframe must not exist in the Reader page!\n * @param cfi CFI\n * @returns HTML Element or Null\n */\n\nexports.getParagraphCfi = getParagraphCfi;\nvar getNodefromCfi = function getNodefromCfi(cfi) {\n  var epubcfi = cfi.slice(8, -1);\n  /* Remove Id */\n\n  var pureCfi = epubcfi.replace(/\\[.*?\\]/gi, '');\n  /* Only CFI Base */\n\n  var splitCfi = pureCfi.split('!');\n  if (splitCfi.length < 1 || splitCfi[1] === \"\") {\n    return null;\n  }\n  /* Remove Body tag CFI */\n\n  var cfiPath = splitCfi[1].split('/').slice(2).map(function (x) {\n    return Number(x);\n  });\n  var iframe = document.querySelector('iframe');\n  if (!iframe) return null;\n  var iframeBody = iframe.contentWindow && iframe.contentWindow.document.body;\n  if (!iframeBody) return null;\n  var component = iframeBody;\n  /* Find Node based on CFI */\n\n  var _iterator = _createForOfIteratorHelper(cfiPath),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var idx = _step.value;\n      var childNodes = component && component.childNodes;\n      /* Bookmark / Highlight filtering.. */\n\n      var filtered = _toConsumableArray(childNodes).filter(function (n) {\n        return !n.dataset || !n.dataset.bookmark || !n.dataset.highlight;\n      });\n      component = filtered[idx - 1];\n      if (!component) {\n        component = null;\n        break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return component;\n};\n/**\n * Selection absolute location\n * @param viewer viewerRef.current\n * @param bookStyle bookStyle\n * @param bookFlow book-flow\n * @param MIN_VIEWER_WIDTH min viewer width\n * @param MIN_VIEWER_HEIGHT min viewer height\n * @param VIEWER_HEADER_HEIGHT viewer header height\n * @param CONTEXTMENU_WIDTH contextmenu width\n * @returns Contextmenu location\n */\n\nexports.getNodefromCfi = getNodefromCfi;\nvar getSelectionPosition = function getSelectionPosition(viewer, bookStyle, bookFlow, MIN_VIEWER_WIDTH, MIN_VIEWER_HEIGHT, VIEWER_HEADER_HEIGHT, CONTEXTMENU_WIDTH) {\n  var _window = window,\n    windowWidth = _window.innerWidth,\n    windowHeight = _window.innerHeight;\n  var iframeWidth = viewer.offsetWidth;\n  var scrollTop = viewer.querySelector('div').scrollTop;\n  var iframe = viewer.querySelector('iframe');\n  var selection_ = iframe && iframe.contentWindow && iframe.contentWindow.getSelection();\n  if (!selection_ || selection_.rangeCount === 0) return null;\n  var range = selection_.getRangeAt(0);\n  var _range$getBoundingCli = range.getBoundingClientRect(),\n    selectionX = _range$getBoundingCli.x,\n    selectionY = _range$getBoundingCli.y,\n    selectionHeight = _range$getBoundingCli.height,\n    selectionWidth = _range$getBoundingCli.width;\n  var marginLeft = ~~((windowWidth - MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal / 2);\n  var marginTop = bookFlow === \"scrolled-doc\" ? 0 : ~~((windowHeight - VIEWER_HEADER_HEIGHT - MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical / 2);\n  var x = ~~(selectionX % iframeWidth + marginLeft + (selectionWidth / 2 - CONTEXTMENU_WIDTH / 2));\n  var y = ~~(selectionY + selectionHeight + VIEWER_HEADER_HEIGHT + marginTop - scrollTop);\n  return {\n    x: x,\n    y: y,\n    height: selectionHeight,\n    width: selectionWidth\n  };\n};\n/**\n * Debounce\n * @param func Target function\n * @param timeout delay\n */\n\nexports.getSelectionPosition = getSelectionPosition;\nfunction debounce(timeout, func) {\n  var timer;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      func.apply(void 0, args);\n    }, timeout);\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","compareCfi","clashCfiRange","cfiRangeSpliter","debounce","timeFormatter","getSelectionPosition","getParagraphCfi","getNodefromCfi","_epubjs","require","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_createForOfIteratorHelper","o","allowArrayLike","it","length","i","F","s","n","done","e","_e2","f","normalCompletion","didErr","err","call","step","next","_e3","return","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","minLen","prototype","toString","slice","constructor","name","test","len","arr2","_i","_arr","_n","_d","_s","_e","push","time","yyyy","getFullYear","mm","getMonth","dd","getDate","msg","concat","cfi_1","cfi_2","epubcfi","EpubCFI","compare","cfiRange","content","_content$split","split","_content$split2","origin","start","end","startCfi","endCfi","baseCfiRange","targetCfiRange","splitCfi1","splitCfi2","s1","e1","s2","e2","_content$split3","_content$split4","cfi","pureCfi","replace","splitCfi","cfiPath","map","x","Number","iframe","document","querySelector","iframeBody","contentWindow","body","component","_iterator","_step","idx","childNodes","filtered","filter","dataset","bookmark","highlight","viewer","bookStyle","bookFlow","MIN_VIEWER_WIDTH","MIN_VIEWER_HEIGHT","VIEWER_HEADER_HEIGHT","CONTEXTMENU_WIDTH","_window","window","windowWidth","innerWidth","windowHeight","innerHeight","iframeWidth","offsetWidth","scrollTop","selection_","getSelection","rangeCount","range","getRangeAt","_range$getBoundingCli","getBoundingClientRect","selectionX","selectionY","y","selectionHeight","height","selectionWidth","width","marginLeft","marginHorizontal","marginTop","marginVertical","timeout","func","timer","_len","arguments","args","_key","clearTimeout","setTimeout","apply"],"sources":["/home/parallels/Downloads/react-epub-viewer-demo/node_modules/react-epub-viewer/lib/lib/utils/commonUtil.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compareCfi = exports.clashCfiRange = exports.cfiRangeSpliter = void 0;\nexports.debounce = debounce;\nexports.timeFormatter = exports.getSelectionPosition = exports.getParagraphCfi = exports.getNodefromCfi = void 0;\n\nvar _epubjs = require(\"epubjs\");\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * DateTime to `yyyy-mm-dd`\n * @param {Date} time \n */\nvar timeFormatter = function timeFormatter(time) {\n  var yyyy = time.getFullYear();\n  var mm = time.getMonth() + 1;\n  var dd = time.getDate();\n  var msg = \"\".concat(yyyy, \"-\").concat(mm, \"-\").concat(dd);\n  return msg;\n};\n/**\n * Comparison of two CFI sizes\n * - -1 : CFI 1 < CFI 2\n * - 0 : CFI 1 == CFI 2\n * - 1 : CFI 1 > CFI 2\n * @param cfi_1 CFI 1\n * @param cfi_2 CFI 2\n */\n\n\nexports.timeFormatter = timeFormatter;\n\nvar compareCfi = function compareCfi(cfi_1, cfi_2) {\n  var epubcfi = new _epubjs.EpubCFI();\n  return epubcfi.compare(cfi_1, cfi_2);\n};\n/**\n * Split CFI range into two starting CFI and ending CFI\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\n\n\nexports.compareCfi = compareCfi;\n\nvar cfiRangeSpliter = function cfiRangeSpliter(cfiRange) {\n  var content = cfiRange.slice(8, -1);\n\n  var _content$split = content.split(','),\n      _content$split2 = _slicedToArray(_content$split, 3),\n      origin = _content$split2[0],\n      start = _content$split2[1],\n      end = _content$split2[2];\n\n  if (!origin || !start || !end) return null;\n  var startCfi = \"epubcfi(\".concat(origin + start, \")\");\n  var endCfi = \"epubcfi(\".concat(origin + end, \")\");\n  return {\n    startCfi: startCfi,\n    endCfi: endCfi\n  };\n};\n/**\n * Whether the two CFI ranges nested\n * - true : Nested\n * - false : Not nested\n * - null : Invalid CFIRange\n * @param cfiRange1 First CFIRange\n * @param cfiRange2 Second CFIRange\n */\n\n\nexports.cfiRangeSpliter = cfiRangeSpliter;\n\nvar clashCfiRange = function clashCfiRange(baseCfiRange, targetCfiRange) {\n  var splitCfi1 = cfiRangeSpliter(baseCfiRange);\n  var splitCfi2 = cfiRangeSpliter(targetCfiRange);\n  if (!splitCfi1 || !splitCfi2) return null;\n  var s1 = splitCfi1.startCfi,\n      e1 = splitCfi1.endCfi;\n  var s2 = splitCfi2.startCfi,\n      e2 = splitCfi2.endCfi;\n\n  if (compareCfi(s2, s1) <= 0 && compareCfi(s1, e2) <= 0 || compareCfi(s2, e1) <= 0 && compareCfi(e1, e2) <= 0 || compareCfi(s1, s2) <= 0 && compareCfi(e2, e1) <= 0) {\n    return true;\n  }\n\n  return false;\n};\n/**\n * Extract paragraph CFI from CFIRange\n * - null : Invalid CFIRange\n * @param cfiRange CFIRange\n */\n\n\nexports.clashCfiRange = clashCfiRange;\n\nvar getParagraphCfi = function getParagraphCfi(cfiRange) {\n  if (!cfiRange) return;\n  var content = cfiRange.slice(8, -1);\n\n  var _content$split3 = content.split(','),\n      _content$split4 = _slicedToArray(_content$split3, 3),\n      origin = _content$split4[0],\n      start = _content$split4[1],\n      end = _content$split4[2];\n\n  if (!origin || !start || !end) return null;\n  var cfi = \"epubcfi(\".concat(origin, \")\");\n  return cfi;\n};\n/**\n * Get specific DOM Element from CFI\n * - **â€» Warning**: Other Iframe must not exist in the Reader page!\n * @param cfi CFI\n * @returns HTML Element or Null\n */\n\n\nexports.getParagraphCfi = getParagraphCfi;\n\nvar getNodefromCfi = function getNodefromCfi(cfi) {\n  var epubcfi = cfi.slice(8, -1);\n  /* Remove Id */\n\n  var pureCfi = epubcfi.replace(/\\[.*?\\]/gi, '');\n  /* Only CFI Base */\n\n  var splitCfi = pureCfi.split('!');\n\n  if (splitCfi.length < 1 || splitCfi[1] === \"\") {\n    return null;\n  }\n  /* Remove Body tag CFI */\n\n\n  var cfiPath = splitCfi[1].split('/').slice(2).map(function (x) {\n    return Number(x);\n  });\n  var iframe = document.querySelector('iframe');\n  if (!iframe) return null;\n  var iframeBody = iframe.contentWindow && iframe.contentWindow.document.body;\n  if (!iframeBody) return null;\n  var component = iframeBody;\n  /* Find Node based on CFI */\n\n  var _iterator = _createForOfIteratorHelper(cfiPath),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var idx = _step.value;\n      var childNodes = component && component.childNodes;\n      /* Bookmark / Highlight filtering.. */\n\n      var filtered = _toConsumableArray(childNodes).filter(function (n) {\n        return !n.dataset || !n.dataset.bookmark || !n.dataset.highlight;\n      });\n\n      component = filtered[idx - 1];\n\n      if (!component) {\n        component = null;\n        break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return component;\n};\n/**\n * Selection absolute location\n * @param viewer viewerRef.current\n * @param bookStyle bookStyle\n * @param bookFlow book-flow\n * @param MIN_VIEWER_WIDTH min viewer width\n * @param MIN_VIEWER_HEIGHT min viewer height\n * @param VIEWER_HEADER_HEIGHT viewer header height\n * @param CONTEXTMENU_WIDTH contextmenu width\n * @returns Contextmenu location\n */\n\n\nexports.getNodefromCfi = getNodefromCfi;\n\nvar getSelectionPosition = function getSelectionPosition(viewer, bookStyle, bookFlow, MIN_VIEWER_WIDTH, MIN_VIEWER_HEIGHT, VIEWER_HEADER_HEIGHT, CONTEXTMENU_WIDTH) {\n  var _window = window,\n      windowWidth = _window.innerWidth,\n      windowHeight = _window.innerHeight;\n  var iframeWidth = viewer.offsetWidth;\n  var scrollTop = viewer.querySelector('div').scrollTop;\n  var iframe = viewer.querySelector('iframe');\n  var selection_ = iframe && iframe.contentWindow && iframe.contentWindow.getSelection();\n  if (!selection_ || selection_.rangeCount === 0) return null;\n  var range = selection_.getRangeAt(0);\n\n  var _range$getBoundingCli = range.getBoundingClientRect(),\n      selectionX = _range$getBoundingCli.x,\n      selectionY = _range$getBoundingCli.y,\n      selectionHeight = _range$getBoundingCli.height,\n      selectionWidth = _range$getBoundingCli.width;\n\n  var marginLeft = ~~((windowWidth - MIN_VIEWER_WIDTH) / 100 * bookStyle.marginHorizontal / 2);\n  var marginTop = bookFlow === \"scrolled-doc\" ? 0 : ~~((windowHeight - VIEWER_HEADER_HEIGHT - MIN_VIEWER_HEIGHT) / 100 * bookStyle.marginVertical / 2);\n  var x = ~~(selectionX % iframeWidth + marginLeft + (selectionWidth / 2 - CONTEXTMENU_WIDTH / 2));\n  var y = ~~(selectionY + selectionHeight + VIEWER_HEADER_HEIGHT + marginTop - scrollTop);\n  return {\n    x: x,\n    y: y,\n    height: selectionHeight,\n    width: selectionWidth\n  };\n};\n/**\n * Debounce\n * @param func Target function\n * @param timeout delay\n */\n\n\nexports.getSelectionPosition = getSelectionPosition;\n\nfunction debounce(timeout, func) {\n  var timer;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      func.apply(void 0, args);\n    }, timeout);\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}